import{r as a,b as W,N as U,O as I,d as S,u as A,L as k,e as $,B as V,R as H,f as j,h as K}from"./vendor-7be28376.js";import{A as P,a as F,b as Y}from"./aws-85ea8cc3.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var O={exports:{}},L={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G=a,Q=Symbol.for("react.element"),X=Symbol.for("react.fragment"),Z=Object.prototype.hasOwnProperty,ee=G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,se={key:!0,ref:!0,__self:!0,__source:!0};function _(t,s,n){var c,r={},i=null,l=null;n!==void 0&&(i=""+n),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(c in s)Z.call(s,c)&&!se.hasOwnProperty(c)&&(r[c]=s[c]);if(t&&t.defaultProps)for(c in s=t.defaultProps,s)r[c]===void 0&&(r[c]=s[c]);return{$$typeof:Q,type:t,key:i,ref:l,props:r,_owner:ee.current}}L.Fragment=X;L.jsx=_;L.jsxs=_;O.exports=L;var e=O.exports,D={},R=W;D.createRoot=R.createRoot,D.hydrateRoot=R.hydrateRoot;const B=a.createContext(void 0);function te({children:t}){const[s,n]=a.useState(!1),[c,r]=a.useState(!0),[i,l]=a.useState(null);a.useEffect(()=>{d()},[]);async function d(){try{const m=await P.currentAuthenticatedUser();l(m),n(!0)}catch{l(null),n(!1)}finally{r(!1)}}async function o(m,y){try{const u=await P.signIn(m,y);return l(u),n(!0),u}catch(u){throw u}}async function x(){try{await P.signOut(),l(null),n(!1)}catch(m){console.error("Error signing out:",m)}}const h={isAuthenticated:s,isLoading:c,user:i,signIn:o,signOut:x};return e.jsx(B.Provider,{value:h,children:t})}function v(){const t=a.useContext(B);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const re=({children:t})=>{const{isAuthenticated:s,isLoading:n}=v();return n?e.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):s?e.jsx(e.Fragment,{children:t}):e.jsx(U,{to:"/login",replace:!0})},ae=()=>{var r,i,l;const{isAuthenticated:t,isLoading:s,user:n}=v(),c=(l=(i=(r=n==null?void 0:n.signInUserSession)==null?void 0:r.accessToken)==null?void 0:i.payload["cognito:groups"])==null?void 0:l.includes("admin");return s?e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):t?c?e.jsx(I,{}):e.jsx(U,{to:"/dashboard",replace:!0}):e.jsx(U,{to:"/login",replace:!0})},ne=()=>{const{isAuthenticated:t,isLoading:s}=v();return s?e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):t?e.jsx(I,{}):e.jsx(U,{to:"/login",replace:!0})},le=()=>{var c,r,i;const{signOut:t,user:s}=v(),n=(i=(r=(c=s==null?void 0:s.signInUserSession)==null?void 0:c.accessToken)==null?void 0:r.payload["cognito:groups"])==null?void 0:i.includes("admin");return e.jsxs("div",{className:"w-64 bg-white shadow-md h-full",children:[e.jsx("div",{className:"p-6",children:e.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"TaskBuddy"})}),e.jsx("nav",{className:"mt-6",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(S,{to:"/",className:({isActive:l})=>`flex items-center px-6 py-3 hover:bg-blue-50 ${l?"bg-blue-100 text-blue-700":"text-gray-700"}`,children:"Dashboard"})}),n&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(S,{to:"/admin/tasks",className:({isActive:l})=>`flex items-center px-6 py-3 hover:bg-blue-50 ${l?"bg-blue-100 text-blue-700":"text-gray-700"}`,children:"Manage Tasks"})}),e.jsx("li",{children:e.jsx(S,{to:"/admin/users",className:({isActive:l})=>`flex items-center px-6 py-3 hover:bg-blue-50 ${l?"bg-blue-100 text-blue-700":"text-gray-700"}`,children:"Manage Users"})})]}),!n&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(S,{to:"/dashboard",className:({isActive:l})=>`flex items-center px-6 py-3 hover:bg-blue-50 ${l?"bg-blue-100 text-blue-700":"text-gray-700"}`,children:"Dashboard"})}),e.jsx("li",{children:e.jsx(S,{to:"/tasks",className:({isActive:l})=>`flex items-center px-6 py-3 hover:bg-blue-50 ${l?"bg-blue-100 text-blue-700":"text-gray-700"}`,children:"My Tasks"})})]}),e.jsx("li",{children:e.jsx(S,{to:"/profile",className:({isActive:l})=>`flex items-center px-6 py-3 hover:bg-blue-50 ${l?"bg-blue-100 text-blue-700":"text-gray-700"}`,children:"Profile"})}),e.jsx("li",{children:e.jsx("button",{onClick:t,className:"w-full text-left px-6 py-3 text-gray-700 hover:bg-red-50 hover:text-red-700",children:"Sign Out"})})]})})]})},ie=()=>e.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e.jsx(le,{}),e.jsx("main",{className:"flex-1 overflow-auto p-6",children:e.jsx(I,{})})]}),p=({children:t,variant:s="primary",size:n="md",isLoading:c=!1,fullWidth:r=!1,className:i="",disabled:l,...d})=>{const o="inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",x={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500"},h={sm:"text-sm px-3 py-1",md:"text-base px-4 py-2",lg:"text-lg px-6 py-3"},m=r?"w-full":"";return e.jsx("button",{className:`${o} ${x[s]} ${h[n]} ${m} ${l||c?"opacity-70 cursor-not-allowed":""} ${i}`,disabled:l||c,...d,children:c?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):t})},de=()=>{const[t,s]=a.useState(""),[n,c]=a.useState(""),[r,i]=a.useState(""),[l,d]=a.useState(!1),{signIn:o}=v(),x=A(),h=async m=>{m.preventDefault(),i(""),d(!0);try{await o(t,n),x("/")}catch(y){i(y.message||"Failed to sign in")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsx("div",{children:e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to TaskBuddy"})}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:h,children:[r&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:r}),e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Username",value:t,onChange:m=>s(m.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:m=>c(m.target.value)})]})]}),e.jsx("div",{children:e.jsx(p,{type:"submit",fullWidth:!0,isLoading:l,children:"Sign in"})})]})]})})},f=({children:t,className:s="",title:n})=>e.jsxs("div",{className:`bg-white rounded-lg shadow-md overflow-hidden ${s}`,children:[n&&e.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:n})}),e.jsx("div",{className:"px-6 py-4",children:t})]}),ce=()=>{const{user:t}=v(),[s,n]=a.useState({});return a.useEffect(()=>{t&&n(t.attributes||{})},[t]),e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"User Profile"}),e.jsx(f,{className:"mb-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Username"}),e.jsx("p",{className:"mt-1 text-lg",children:(t==null?void 0:t.username)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"mt-1 text-lg",children:s.email||"N/A"})]}),s.name&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsx("p",{className:"mt-1 text-lg",children:s.name})]})]})})]})},oe=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(k,{to:"/admin/users/create",children:e.jsx(p,{variant:"secondary",children:"Create User"})}),e.jsx(k,{to:"/admin/tasks/create",children:e.jsx(p,{children:"Create Task"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(f,{title:"Tasks",children:[e.jsx("div",{className:"text-3xl font-bold",children:"0"}),e.jsx("p",{className:"text-gray-500",children:"Total tasks"})]}),e.jsxs(f,{title:"Users",children:[e.jsx("div",{className:"text-3xl font-bold",children:"0"}),e.jsx("p",{className:"text-gray-500",children:"Registered users"})]}),e.jsxs(f,{title:"Completed",children:[e.jsx("div",{className:"text-3xl font-bold",children:"0"}),e.jsx("p",{className:"text-gray-500",children:"Completed tasks"})]})]})]});function w(){const[t,s]=a.useState(!1),[n,c]=a.useState(null),r="taskbuddyApi";async function i({path:l,method:d="GET",body:o,headers:x={}}){s(!0),c(null);try{const y={headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await F.Auth.currentSession()).getIdToken().getJwtToken()}`,...x}};o&&(y.body=JSON.stringify(o)),console.log("API Request:",{path:l,method:d,options:y});const u=await F.get(r,l,y);return console.log("API Response:",u),u}catch(h){throw console.error("API Error:",h),c(h instanceof Error?h:new Error("Unknown error occurred")),h}finally{s(!1)}}return{callApi:i,loading:t,error:n}}const xe=()=>{const[t,s]=a.useState([]),[n,c]=a.useState(!0),[r,i]=a.useState(""),{callApi:l}=w();return a.useEffect(()=>{(async()=>{try{const o=await l({path:"/admin/tasks",headers:{"x-admin-access":"true"}});s(Array.isArray(o)?o:[])}catch(o){console.error("Error fetching tasks:",o),i("Failed to load tasks")}finally{c(!1)}})()},[]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Manage Tasks"}),e.jsx(k,{to:"/admin/tasks/create",children:e.jsx(p,{children:"Create Task"})})]}),r&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:r}),e.jsx(f,{children:n?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Loading tasks..."})}):t.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(d=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${d.status==="completed"?"bg-green-100 text-green-800":d.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:d.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.priority}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(d.createdAt).toLocaleDateString()})]},d.taskId))})]})}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No tasks available"})})})]})},me=()=>{const[t,s]=a.useState([]),[n,c]=a.useState(!0),[r,i]=a.useState(""),{callApi:l}=w();return a.useEffect(()=>{(async()=>{try{const o=await l({path:"/admin/users",headers:{"x-admin-access":"true"}});s(Array.isArray(o)?o:[])}catch(o){console.error("Error fetching users:",o),i("Failed to load users")}finally{c(!1)}})()},[]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Manage Users"}),e.jsx(k,{to:"/admin/users/create",children:e.jsx(p,{children:"Create User"})})]}),r&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:r}),e.jsx(f,{children:n?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Loading users..."})}):t.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(d=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(k,{to:`/admin/users/${d.userId}`,className:"text-blue-600 hover:text-blue-900",children:d.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.role}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${d.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:d.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.department||"-"})]},d.userId))})]})}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No users available"})})})]})},ue=()=>{const[t,s]=a.useState(""),[n,c]=a.useState(""),[r,i]=a.useState("medium"),[l,d]=a.useState(""),[o,x]=a.useState(""),[h,m]=a.useState([]),[y,u]=a.useState(!1),[T,E]=a.useState(""),b=A(),{callApi:N}=w();a.useEffect(()=>{(async()=>{try{const z=(await N({path:"/users"})).filter(J=>J.role==="user");m(z)}catch(C){console.error("Error fetching users:",C)}})()},[]);const q=async g=>{g.preventDefault(),u(!0),E("");try{await N({path:"/tasks",method:"POST",body:{title:t,description:n,priority:r,assignedTo:l,dueDate:o||void 0,sendNotification:!0}}),b("/admin/tasks")}catch(C){console.error("Error creating task:",C),E("Failed to create task. Please try again.")}finally{u(!1)}};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Create Task"}),T&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:T}),e.jsx(f,{children:e.jsxs("form",{onSubmit:q,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",id:"title",value:t,onChange:g=>s(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{id:"description",value:n,onChange:g=>c(g.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{id:"priority",value:r,onChange:g=>i(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"assignedTo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Assign To"}),e.jsxs("select",{id:"assignedTo",value:l,onChange:g=>d(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select a user"}),h.map(g=>e.jsxs("option",{value:g.userId,children:[g.name," (",g.email,")"]},g.userId))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",id:"dueDate",value:o,onChange:g=>x(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx(p,{type:"button",variant:"secondary",className:"mr-2",onClick:()=>b("/admin/tasks"),children:"Cancel"}),e.jsx(p,{type:"submit",isLoading:y,children:"Create Task"})]})]})})]})},M={async createUser(t){try{const s=await fetch("https://wd1cddmaod.execute-api.eu-west-1.amazonaws.com/admin/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await P.currentSession()).getIdToken().getJwtToken()}`},body:JSON.stringify({email:t.email,name:t.name,role:t.role||"user"})});if(!s.ok)throw new Error(`API error: ${s.status}`);const n=await s.json();return{user:{Username:t.username},tempPassword:n.tempPassword||"Check email for password"}}catch(s){throw console.error("Error creating user:",s),s}},async resetUserPassword(t){try{const s=await fetch(`https://wd1cddmaod.execute-api.eu-west-1.amazonaws.com/admin/users/${t}/reset-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await P.currentSession()).getIdToken().getJwtToken()}`}});if(!s.ok)throw new Error(`API error: ${s.status}`);return{tempPassword:(await s.json()).tempPassword||"Check email for password"}}catch(s){throw console.error("Error resetting password:",s),s}}},he=()=>{const[t,s]=a.useState(""),[n,c]=a.useState(""),[r,i]=a.useState("user"),[l,d]=a.useState(""),[o,x]=a.useState(!1),[h,m]=a.useState(""),[y,u]=a.useState(""),T=A();w();const E=async b=>{b.preventDefault(),x(!0),m(""),u("");try{console.log("Creating user:",{name:t,email:n});const N=await M.createUser({username:n,email:n,name:t});console.log("User created:",N),u(`User created successfully! Temporary password: ${N.tempPassword}`),s(""),c(""),i("user"),d(""),setTimeout(()=>{T("/admin/users")},5e3)}catch(N){console.error("Error creating user:",N),N instanceof Error?m(`Failed to create user: ${N.message}`):m("Failed to create user. Please try again.")}finally{x(!1)}};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Create User"}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:h}),y&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded mb-4",children:y}),e.jsx(f,{children:e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",id:"name",value:t,onChange:b=>s(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",value:n,onChange:b=>c(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),e.jsxs("select",{id:"role",value:r,onChange:b=>i(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department (Optional)"}),e.jsx("input",{type:"text",id:"department",value:l,onChange:b=>d(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx(p,{type:"button",variant:"secondary",className:"mr-2",onClick:()=>T("/admin/users"),children:"Cancel"}),e.jsx(p,{type:"submit",isLoading:o,children:"Create User"})]})]})})]})},pe=()=>{const{id:t}=$(),[s,n]=a.useState(null),[c,r]=a.useState(!0),[i,l]=a.useState(""),{callApi:d}=w(),o=A();a.useEffect(()=>{t&&(async()=>{try{const m=await d({path:`/admin/users/${t}`,headers:{"x-admin-access":"true"}});n(m)}catch(m){console.error("Error fetching user details:",m),l("Failed to load user details")}finally{r(!1)}})()},[t]);const x=()=>{s&&o(`/admin/users/${s.email}/reset-password`)};return c?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Loading user details..."})}):i?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}):s?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"User Details"}),e.jsx(p,{onClick:()=>o("/admin/users"),variant:"secondary",children:"Back to Users"})]}),e.jsx(f,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.email})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Role"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.role})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("dd",{className:"mt-1",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full 
                    ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.isActive?"Active":"Inactive"})})]}),s.department&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Department"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.department})]}),s.phoneNumber&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Phone Number"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.phoneNumber})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Created"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(s.createdAt).toLocaleDateString()})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Actions"}),e.jsx("div",{className:"mt-2 flex space-x-3",children:e.jsx(p,{onClick:x,children:"Reset Password"})})]})]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500",children:"User not found"}),e.jsx(p,{onClick:()=>o("/admin/users"),className:"mt-4",children:"Back to Users"})]})},ge=()=>{const{username:t}=$(),[s,n]=a.useState(!1),[c,r]=a.useState(""),[i,l]=a.useState(""),d=A(),o=async()=>{if(t){n(!0),r(""),l("");try{const x=await M.resetUserPassword(t);l(x.tempPassword)}catch(x){console.error("Error resetting password:",x),x instanceof Error?r(`Failed to reset password: ${x.message}`):r("Failed to reset password. Please try again.")}finally{n(!1)}}};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Reset User Password"}),c&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:c}),e.jsxs(f,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700",children:["You are about to reset the password for user: ",e.jsx("strong",{children:t})]}),e.jsx("p",{className:"text-gray-500 mt-2",children:"This will generate a new temporary password that the user will need to change on their next login."})]}),i?e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:[e.jsx("p",{className:"font-bold",children:"Password reset successfully!"}),e.jsxs("p",{className:"mt-2",children:["Temporary password: ",e.jsx("strong",{children:i})]}),e.jsx("p",{className:"text-sm mt-2",children:"Make sure to share this password with the user securely."})]})}):null,e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(p,{type:"button",variant:"secondary",onClick:()=>d(-1),children:"Back"}),!i&&e.jsx(p,{type:"button",onClick:o,isLoading:s,children:"Reset Password"})]})]})]})},je=()=>{const[t,s]=a.useState({total:0,completed:0,inProgress:0,pending:0}),[n,c]=a.useState(!0),[r,i]=a.useState(""),{callApi:l}=w(),{user:d}=v();return a.useEffect(()=>{d&&(async()=>{try{const x=await l({path:"/tasks/stats",headers:{"x-user-id":(d==null?void 0:d.username)||""}});s(x)}catch(x){console.error("Error fetching task stats:",x),i("Failed to load task statistics")}finally{c(!1)}})()},[d]),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"My Dashboard"}),r&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:r}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(f,{title:"Total Tasks",children:[e.jsx("div",{className:"text-3xl font-bold",children:t.total}),e.jsx("p",{className:"text-gray-500",children:"Assigned to you"})]}),e.jsxs(f,{title:"Pending",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:t.pending}),e.jsx("p",{className:"text-gray-500",children:"Not started"})]}),e.jsxs(f,{title:"In Progress",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-500",children:t.inProgress}),e.jsx("p",{className:"text-gray-500",children:"Currently working"})]}),e.jsxs(f,{title:"Completed",children:[e.jsx("div",{className:"text-3xl font-bold text-green-500",children:t.completed}),e.jsx("p",{className:"text-gray-500",children:"Finished tasks"})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(k,{to:"/tasks",className:"text-blue-600 hover:text-blue-800 font-medium",children:"View all my tasks →"})})]})},fe=()=>{const[t,s]=a.useState([]),[n,c]=a.useState(!0),[r,i]=a.useState(""),{callApi:l}=w(),{user:d}=v();return a.useEffect(()=>{d&&(async()=>{try{const x=await l({path:"/tasks/assigned",headers:{"x-user-id":(d==null?void 0:d.username)||""}});s(Array.isArray(x)?x:[])}catch(x){console.error("Error fetching tasks:",x),i("Failed to load your tasks")}finally{c(!1)}})()},[d]),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"My Tasks"}),r&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:r}),e.jsx(f,{children:n?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Loading tasks..."})}):t.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(o=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                        ${o.status==="completed"?"bg-green-100 text-green-800":o.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:o.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.priority}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(k,{to:`/tasks/${o.taskId}`,className:"text-blue-600 hover:text-blue-900",children:"View Details"})})]},o.taskId))})]})}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No tasks assigned to you"})})})]})},ye=()=>{const{id:t}=$(),[s,n]=a.useState(null),[c,r]=a.useState(!0),[i,l]=a.useState(""),[d,o]=a.useState(!1),{callApi:x}=w(),h=A();a.useEffect(()=>{t&&(async()=>{try{const u=await x({path:`/tasks/${t}`});n(u)}catch(u){console.error("Error fetching task details:",u),l("Failed to load task details")}finally{r(!1)}})()},[t]);const m=async y=>{if(s){o(!0);try{const u=await x({path:`/tasks/${t}/status`,method:"PUT",body:{status:y}});n(u)}catch(u){console.error("Error updating task status:",u),l("Failed to update task status")}finally{o(!1)}}};return c?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Loading task details..."})}):i?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}):s?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.title}),e.jsx(p,{onClick:()=>h("/tasks"),variant:"secondary",children:"Back to Tasks"})]}),e.jsx(f,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Task Details"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("dd",{className:"mt-1",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full 
                    ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:s.status})})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Priority"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.priority})]}),s.dueDate&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Due Date"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(s.dueDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Created"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(s.createdAt).toLocaleDateString()})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Description"}),e.jsx("div",{className:"mt-2 prose prose-sm text-gray-500",children:s.description||"No description provided"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Actions"}),e.jsxs("div",{className:"mt-2 flex space-x-3",children:[s.status==="pending"&&e.jsx(p,{onClick:()=>m("in_progress"),isLoading:d,disabled:d,children:"Start Task"}),s.status==="in_progress"&&e.jsx(p,{onClick:()=>m("completed"),isLoading:d,disabled:d,children:"Complete Task"})]})]})]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500",children:"Task not found"}),e.jsx(p,{onClick:()=>h("/tasks"),className:"mt-4",children:"Back to Tasks"})]})},be=()=>e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Page not found"}),e.jsx("a",{href:"/",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Return to Dashboard"})]});function Ne(){return e.jsx(te,{children:e.jsx(V,{children:e.jsxs(H,{children:[e.jsx(j,{path:"/login",element:e.jsx(de,{})}),e.jsxs(j,{element:e.jsx(re,{children:e.jsx(ie,{})}),children:[e.jsx(j,{path:"/profile",element:e.jsx(ce,{})}),e.jsxs(j,{element:e.jsx(ae,{}),children:[e.jsx(j,{path:"/",element:e.jsx(oe,{})}),e.jsx(j,{path:"/admin/tasks",element:e.jsx(xe,{})}),e.jsx(j,{path:"/admin/users",element:e.jsx(me,{})}),e.jsx(j,{path:"/admin/tasks/create",element:e.jsx(ue,{})}),e.jsx(j,{path:"/admin/users/create",element:e.jsx(he,{})}),e.jsx(j,{path:"/admin/users/:id",element:e.jsx(pe,{})}),e.jsx(j,{path:"/admin/users/:username/reset-password",element:e.jsx(ge,{})})]}),e.jsxs(j,{element:e.jsx(ne,{}),children:[e.jsx(j,{path:"/dashboard",element:e.jsx(je,{})}),e.jsx(j,{path:"/tasks",element:e.jsx(fe,{})}),e.jsx(j,{path:"/tasks/:id",element:e.jsx(ye,{})})]})]}),e.jsx(j,{path:"*",element:e.jsx(be,{})})]})})})}Y.configure({Auth:{region:"eu-west-1",userPoolId:"eu-west-1_J7EKiwTfA",userPoolWebClientId:"n7u78450uvmbtgjdf6iai58cm",mandatorySignIn:!0},API:{endpoints:[{name:"taskbuddyApi",endpoint:"https://wd1cddmaod.execute-api.eu-west-1.amazonaws.com",region:"eu-west-1"}]}});D.createRoot(document.getElementById("root")).render(e.jsx(K.StrictMode,{children:e.jsx(Ne,{})}));
//# sourceMappingURL=index-27290b98.js.map
