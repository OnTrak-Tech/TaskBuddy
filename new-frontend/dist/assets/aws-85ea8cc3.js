import{g as uu,a as Gi,c as cu}from"./vendor-7be28376.js";var fu="Logging",lu=globalThis&&globalThis.__values||function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ut=globalThis&&globalThis.__read||function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return i},Ft=globalThis&&globalThis.__spreadArray||function(n,t,e){if(e||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return n.concat(i||Array.prototype.slice.call(t))},wo={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},We;(function(n){n.DEBUG="DEBUG",n.ERROR="ERROR",n.INFO="INFO",n.WARN="WARN",n.VERBOSE="VERBOSE"})(We||(We={}));var fe=function(){function n(t,e){e===void 0&&(e=We.WARN),this.name=t,this.level=e,this._pluggables=[]}return n.prototype._padding=function(t){return t<10?"0"+t:""+t},n.prototype._ts=function(){var t=new Date;return[this._padding(t.getMinutes()),this._padding(t.getSeconds())].join(":")+"."+t.getMilliseconds()},n.prototype.configure=function(t){return t?(this._config=t,this._config):this._config},n.prototype._log=function(t){for(var e,r,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var s=this.level;n.LOG_LEVEL&&(s=n.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(s=window.LOG_LEVEL);var u=wo[s],c=wo[t];if(c>=u){var a=console.log.bind(console);t===We.ERROR&&console.error&&(a=console.error.bind(console)),t===We.WARN&&console.warn&&(a=console.warn.bind(console));var f="[".concat(t,"] ").concat(this._ts()," ").concat(this.name),l="";if(o.length===1&&typeof o[0]=="string")l="".concat(f," - ").concat(o[0]),a(l);else if(o.length===1)l="".concat(f," ").concat(o[0]),a(f,o[0]);else if(typeof o[0]=="string"){var p=o.slice(1);p.length===1&&(p=p[0]),l="".concat(f," - ").concat(o[0]," ").concat(p),a("".concat(f," - ").concat(o[0]),p)}else l="".concat(f," ").concat(o),a(f,o);try{for(var g=lu(this._pluggables),v=g.next();!v.done;v=g.next()){var m=v.value,w={message:l,timestamp:Date.now()};m.pushLogs([w])}}catch(_){e={error:_}}finally{try{v&&!v.done&&(r=g.return)&&r.call(g)}finally{if(e)throw e.error}}}},n.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log.apply(this,Ft([We.INFO],Ut(t),!1))},n.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log.apply(this,Ft([We.INFO],Ut(t),!1))},n.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log.apply(this,Ft([We.WARN],Ut(t),!1))},n.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log.apply(this,Ft([We.ERROR],Ut(t),!1))},n.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log.apply(this,Ft([We.DEBUG],Ut(t),!1))},n.prototype.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log.apply(this,Ft([We.VERBOSE],Ut(t),!1))},n.prototype.addPluggable=function(t){t&&t.getCategoryName()===fu&&(this._pluggables.push(t),t.configure(this._config))},n.prototype.listPluggables=function(){return this._pluggables},n.LOG_LEVEL=null,n}(),hu=globalThis&&globalThis.__read||function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return i},Pr=new fe("Amplify"),du=function(){function n(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Geo=null,this.Notifications=null,this.Logger=fe,this.ServiceWorker=null}return n.prototype.register=function(t){Pr.debug("component registered in amplify",t),this._components.push(t),typeof t.getModuleName=="function"?(this._modules[t.getModuleName()]=t,this[t.getModuleName()]=t):Pr.debug("no getModuleName method for component",t),t.configure(this._config)},n.prototype.configure=function(t){var e=this;return t?(this._config=Object.assign(this._config,t),Pr.debug("amplify config",this._config),Object.entries(this._modules).forEach(function(r){var o=hu(r,2);o[0];var i=o[1];Object.keys(i).forEach(function(s){e._modules[s]&&(i[s]=e._modules[s])})}),this._components.map(function(r){r.configure(e._config)}),this._config):this._config},n.prototype.addPluggable=function(t){t&&t.getCategory&&typeof t.getCategory=="function"&&this._components.map(function(e){e.addPluggable&&typeof e.addPluggable=="function"&&e.addPluggable(t)})},n}(),gt=new du,ue;(function(n){n.WebUnknown="0",n.React="1",n.NextJs="2",n.Angular="3",n.VueJs="4",n.Nuxt="5",n.Svelte="6",n.ServerSideUnknown="100",n.ReactSSR="101",n.NextJsSSR="102",n.AngularSSR="103",n.VueJsSSR="104",n.NuxtSSR="105",n.SvelteSSR="106",n.ReactNative="201",n.Expo="202"})(ue||(ue={}));var Gt;(function(n){n.API="api",n.Auth="auth",n.Analytics="analytics",n.DataStore="datastore",n.Geo="geo",n.InAppMessaging="inappmessaging",n.Interactions="interactions",n.Predictions="predictions",n.PubSub="pubsub",n.PushNotification="pushnotification",n.Storage="storage"})(Gt||(Gt={}));var So;(function(n){n.Record="1",n.UpdateEndpoint="2"})(So||(So={}));var lt;(function(n){n.GraphQl="1",n.Get="2",n.Post="3",n.Put="4",n.Patch="5",n.Del="6",n.Head="7"})(lt||(lt={}));var ai;(function(n){n.FederatedSignIn="30"})(ai||(ai={}));var _o;(function(n){n.Subscribe="1",n.GraphQl="2"})(_o||(_o={}));var Eo;(function(n){n.None="0"})(Eo||(Eo={}));var To;(function(n){n.None="0"})(To||(To={}));var Ao;(function(n){n.None="0"})(Ao||(Ao={}));var Io;(function(n){n.Convert="1",n.Identify="2",n.Interpret="3"})(Io||(Io={}));var ui;(function(n){n.Subscribe="1"})(ui||(ui={}));var Co;(function(n){n.None="0"})(Co||(Co={}));var Oo;(function(n){n.Put="1",n.Get="2",n.List="3",n.Copy="4",n.Remove="5",n.GetProperties="6"})(Oo||(Oo={}));var Ns="5.3.26",lr=function(){return typeof window<"u"},Xt=function(){return typeof window<"u"},Rs=function(){return typeof document<"u"},$i=function(){return typeof process<"u"},dn=function(n,t){return!!Object.keys(n).find(function(e){return e.startsWith(t)})};function pu(){var n=function(r){return r.startsWith("_react")||r.startsWith("__react")},t=function(r){return Object.keys(r).find(n)},e=function(){return Array.from(document.querySelectorAll("[id]"))};return Rs()&&e().some(t)}function gu(){return $i()&&typeof process.env<"u"&&!!Object.keys(process.env).find(function(n){return n.includes("react")})}function vu(){return Xt()&&dn(window,"__VUE")}function yu(){return lr()&&dn(window,"__VUE")}function mu(){return Xt()&&dn(window,"__SVELTE")}function bu(){return $i()&&typeof process.env<"u"&&!!Object.keys(process.env).find(function(n){return n.includes("svelte")})}function wu(){return Xt()&&window.next&&typeof window.next=="object"}function Su(){return lr()&&(dn(window,"__next")||dn(window,"__NEXT"))}function _u(){return Xt()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function Eu(){return lr()&&typeof window.__NUXT_PATHS__<"u"}function Tu(){var n=!!(Rs()&&document.querySelector("[ng-version]")),t=!!(Xt()&&typeof window.ng<"u");return n||t}function Au(){var n;return $i()&&typeof process.env=="object"&&((n=process.env.npm_lifecycle_script)===null||n===void 0?void 0:n.startsWith("ng "))||!1}function Iu(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function Cu(){return lr()&&typeof window.expo<"u"}function Ou(){return Xt()}var xu=[{platform:ue.Expo,detectionMethod:Cu},{platform:ue.ReactNative,detectionMethod:Iu},{platform:ue.NextJs,detectionMethod:wu},{platform:ue.Nuxt,detectionMethod:_u},{platform:ue.Angular,detectionMethod:Tu},{platform:ue.React,detectionMethod:pu},{platform:ue.VueJs,detectionMethod:vu},{platform:ue.Svelte,detectionMethod:mu},{platform:ue.WebUnknown,detectionMethod:Ou},{platform:ue.NextJsSSR,detectionMethod:Su},{platform:ue.NuxtSSR,detectionMethod:Eu},{platform:ue.ReactSSR,detectionMethod:gu},{platform:ue.VueJsSSR,detectionMethod:yu},{platform:ue.AngularSSR,detectionMethod:Au},{platform:ue.SvelteSSR,detectionMethod:bu}];function Nu(){var n;return((n=xu.find(function(t){return t.detectionMethod()}))===null||n===void 0?void 0:n.platform)||ue.ServerSideUnknown}var cn,Fn=[],Jn=!1,Ru=10,Du=10,ku=1e3,zi=function(){if(!cn){if(cn=Nu(),Jn)for(;Fn.length;)Fn.pop()();else Fn.forEach(function(n){return n()});xo(ue.ServerSideUnknown,Ru),xo(ue.WebUnknown,Du)}return cn},Ds=function(n){Jn||Fn.push(n)};function Pu(){cn=void 0}function xo(n,t){cn===n&&!Jn&&setTimeout(function(){Pu(),Jn=!0,setTimeout(zi,ku)},t)}var Uu=globalThis&&globalThis.__read||function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return i},ks="aws-amplify",Fu=function(){function n(){this.userAgent="".concat(ks,"/").concat(Ns)}return Object.defineProperty(n.prototype,"framework",{get:function(){return zi()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isReactNative",{get:function(){return this.framework===ue.ReactNative||this.framework===ue.Expo},enumerable:!1,configurable:!0}),n.prototype.observeFrameworkChanges=function(t){Ds(t)},n}(),Ur=new Fu,Mu=function(n){var t=n===void 0?{}:n,e=t.category,r=t.action;t.framework;var o=[[ks,Ns]];return e&&o.push([e,r]),o.push(["framework",zi()]),o},Sn=function(n){var t=Mu(n),e=t.map(function(r){var o=Uu(r,2),i=o[0],s=o[1];return"".concat(i,"/").concat(s)}).join(" ");return e},fn=globalThis&&globalThis.__assign||function(){return fn=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},fn.apply(this,arguments)},Fr=globalThis&&globalThis.__read||function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return i},No=globalThis&&globalThis.__spreadArray||function(n,t,e){if(e||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return n.concat(i||Array.prototype.slice.call(t))},ct=new fe("Hub"),Lu=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default";function Bu(n){return n.onHubCapsule!==void 0}var ju=function(){function n(t){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}return n.prototype._remove=function(t,e){if(t instanceof RegExp){var r=this.patterns.find(function(i){var s=i.pattern;return s.source===t.source});if(!r){ct.warn("No listeners for ".concat(t));return}this.patterns=No([],Fr(this.patterns.filter(function(i){return i!==r})),!1)}else{var o=this.listeners[t];if(!o){ct.warn("No listeners for ".concat(t));return}this.listeners[t]=No([],Fr(o.filter(function(i){var s=i.callback;return s!==e})),!1)}},n.prototype.remove=function(t,e){this._remove(t,e)},n.prototype.dispatch=function(t,e,r,o){if(r===void 0&&(r=""),this.protectedChannels.indexOf(t)>-1){var i=o===Lu;i||ct.warn("WARNING: ".concat(t," is protected and dispatching on it can have unintended consequences"))}var s={channel:t,payload:fn({},e),source:r,patternInfo:[]};try{this._toListeners(s)}catch(u){ct.error(u)}},n.prototype.listen=function(t,e,r){var o=this;r===void 0&&(r="noname");var i;if(Bu(e))ct.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),i=e.onHubCapsule.bind(e);else{if(typeof e!="function")throw new Error("No callback supplied to Hub");i=e}if(t instanceof RegExp)this.patterns.push({pattern:t,callback:i});else{var s=this.listeners[t];s||(s=[],this.listeners[t]=s),s.push({name:r,callback:i})}return function(){o._remove(t,i)}},n.prototype._toListeners=function(t){var e=t.channel,r=t.payload,o=this.listeners[e];if(o&&o.forEach(function(s){ct.debug("Dispatching to ".concat(e," with "),r);try{s.callback(t)}catch(u){ct.error(u)}}),this.patterns.length>0){if(!r.message){ct.warn("Cannot perform pattern matching without a message key");return}var i=r.message;this.patterns.forEach(function(s){var u=i.match(s.pattern);if(u){var c=Fr(u),a=c.slice(1),f=fn(fn({},t),{patternInfo:a});try{s.callback(f)}catch(l){ct.error(l)}}})}},n}(),ot=new ju("__default__"),Ku=function(n){if(n.isResolved)return n;var t=!0,e=!1,r=!1,o=n.then(function(i){return r=!0,t=!1,i},function(i){throw e=!0,t=!1,i});return o.isFullfilled=function(){return r},o.isPending=function(){return t},o.isRejected=function(){return e},o},qu=function(){if(typeof self>"u")return!1;var n=self;return typeof n.WorkerGlobalScope<"u"&&self instanceof n.WorkerGlobalScope},et=function(){var n=typeof window<"u"&&typeof window.document<"u",t=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;return{isBrowser:n,isNode:t}},Vu=globalThis&&globalThis.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ro=globalThis&&globalThis.__awaiter||function(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})},Mr=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(e=0)),e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Hu=globalThis&&globalThis.__read||function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return i},Gu=globalThis&&globalThis.__spreadArray||function(n,t,e){if(e||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return n.concat(i||Array.prototype.slice.call(t))},Tn=new fe("Util"),_t=function(n){Vu(t,n);function t(e){var r=n.call(this,e)||this;return r.nonRetryable=!0,r}return t}(Error),Ps=function(n){var t="nonRetryable";return n&&n[t]};function $u(n,t,e,r){return Ro(this,void 0,void 0,function(){var o=this;return Mr(this,function(i){if(typeof n!="function")throw Error("functionToRetry must be a function");return[2,new Promise(function(s,u){return Ro(o,void 0,void 0,function(){var c,a,f,l,p,g,v;return Mr(this,function(m){switch(m.label){case 0:c=0,a=!1,l=function(){},r&&r.then(function(){a=!0,clearTimeout(f),l()}),g=function(){var w,_,S,T;return Mr(this,function(I){switch(I.label){case 0:c++,Tn.debug("".concat(n.name," attempt #").concat(c," with this vars: ").concat(JSON.stringify(t))),I.label=1;case 1:return I.trys.push([1,3,,7]),w={},_=s,[4,n.apply(void 0,Gu([],Hu(t),!1))];case 2:return[2,(w.value=_.apply(void 0,[I.sent()]),w)];case 3:return S=I.sent(),p=S,Tn.debug("error on ".concat(n.name),S),Ps(S)?(Tn.debug("".concat(n.name," non retryable error"),S),[2,{value:u(S)}]):(T=e(c,t,S),Tn.debug("".concat(n.name," retrying in ").concat(T," ms")),T===!1||a?[2,{value:u(S)}]:[3,4]);case 4:return[4,new Promise(function(N){l=N,f=setTimeout(l,T)})];case 5:I.sent(),I.label=6;case 6:return[3,7];case 7:return[2]}})},m.label=1;case 1:return a?[3,3]:[5,g()];case 2:return v=m.sent(),typeof v=="object"?[2,v.value]:[3,1];case 3:return u(p),[2]}})})})]})})}var Us=5*60*1e3;function Fs(n){n===void 0&&(n=Us);var t=100,e=100;return function(r){var o=Math.pow(2,r)*t+e*Math.random();return o>n?!1:o}}var Ms=function(n,t,e,r){return e===void 0&&(e=Us),$u(n,t,Fs(e),r)},hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.Observable=void 0;function Wi(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Do(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Yi(n,t,e){return t&&Do(n.prototype,t),e&&Do(n,e),n}var Ji=function(){return typeof Symbol=="function"},Xi=function(n){return Ji()&&!!Symbol[n]},Qi=function(n){return Xi(n)?Symbol[n]:"@@"+n};Ji()&&!Xi("observable")&&(Symbol.observable=Symbol("observable"));var zu=Qi("iterator"),ci=Qi("observable"),Ls=Qi("species");function Xn(n,t){var e=n[t];if(e!=null){if(typeof e!="function")throw new TypeError(e+" is not a function");return e}}function nn(n){var t=n.constructor;return t!==void 0&&(t=t[Ls],t===null&&(t=void 0)),t!==void 0?t:dr}function Wu(n){return n instanceof dr}function $t(n){$t.log?$t.log(n):setTimeout(function(){throw n})}function Mn(n){Promise.resolve().then(function(){try{n()}catch(t){$t(t)}})}function Bs(n){var t=n._cleanup;if(t!==void 0&&(n._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{var e=Xn(t,"unsubscribe");e&&e.call(t)}}catch(r){$t(r)}}function fi(n){n._observer=void 0,n._queue=void 0,n._state="closed"}function Yu(n){var t=n._queue;if(t){n._queue=void 0,n._state="ready";for(var e=0;e<t.length&&(js(n,t[e].type,t[e].value),n._state!=="closed");++e);}}function js(n,t,e){n._state="running";var r=n._observer;try{var o=Xn(r,t);switch(t){case"next":o&&o.call(r,e);break;case"error":if(fi(n),o)o.call(r,e);else throw e;break;case"complete":fi(n),o&&o.call(r);break}}catch(i){$t(i)}n._state==="closed"?Bs(n):n._state==="running"&&(n._state="ready")}function Lr(n,t,e){if(n._state!=="closed"){if(n._state==="buffering"){n._queue.push({type:t,value:e});return}if(n._state!=="ready"){n._state="buffering",n._queue=[{type:t,value:e}],Mn(function(){return Yu(n)});return}js(n,t,e)}}var Ju=function(){function n(t,e){Wi(this,n),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var r=new Xu(this);try{this._cleanup=e.call(void 0,r)}catch(o){r.error(o)}this._state==="initializing"&&(this._state="ready")}return Yi(n,[{key:"unsubscribe",value:function(){this._state!=="closed"&&(fi(this),Bs(this))}},{key:"closed",get:function(){return this._state==="closed"}}]),n}(),Xu=function(){function n(t){Wi(this,n),this._subscription=t}return Yi(n,[{key:"next",value:function(e){Lr(this._subscription,"next",e)}},{key:"error",value:function(e){Lr(this._subscription,"error",e)}},{key:"complete",value:function(){Lr(this._subscription,"complete")}},{key:"closed",get:function(){return this._subscription._state==="closed"}}]),n}(),dr=function(){function n(t){if(Wi(this,n),!(this instanceof n))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}return Yi(n,[{key:"subscribe",value:function(e){return(typeof e!="object"||e===null)&&(e={next:e,error:arguments[1],complete:arguments[2]}),new Ju(e,this._subscriber)}},{key:"forEach",value:function(e){var r=this;return new Promise(function(o,i){if(typeof e!="function"){i(new TypeError(e+" is not a function"));return}function s(){u.unsubscribe(),o()}var u=r.subscribe({next:function(c){try{e(c,s)}catch(a){i(a),u.unsubscribe()}},error:i,complete:o})})}},{key:"map",value:function(e){var r=this;if(typeof e!="function")throw new TypeError(e+" is not a function");var o=nn(this);return new o(function(i){return r.subscribe({next:function(s){try{s=e(s)}catch(u){return i.error(u)}i.next(s)},error:function(s){i.error(s)},complete:function(){i.complete()}})})}},{key:"filter",value:function(e){var r=this;if(typeof e!="function")throw new TypeError(e+" is not a function");var o=nn(this);return new o(function(i){return r.subscribe({next:function(s){try{if(!e(s))return}catch(u){return i.error(u)}i.next(s)},error:function(s){i.error(s)},complete:function(){i.complete()}})})}},{key:"reduce",value:function(e){var r=this;if(typeof e!="function")throw new TypeError(e+" is not a function");var o=nn(this),i=arguments.length>1,s=!1,u=arguments[1],c=u;return new o(function(a){return r.subscribe({next:function(f){var l=!s;if(s=!0,!l||i)try{c=e(c,f)}catch(p){return a.error(p)}else c=f},error:function(f){a.error(f)},complete:function(){if(!s&&!i)return a.error(new TypeError("Cannot reduce an empty sequence"));a.next(c),a.complete()}})})}},{key:"concat",value:function(){for(var e=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var s=nn(this);return new s(function(u){var c,a=0;function f(l){c=l.subscribe({next:function(p){u.next(p)},error:function(p){u.error(p)},complete:function(){a===o.length?(c=void 0,u.complete()):f(s.from(o[a++]))}})}return f(e),function(){c&&(c.unsubscribe(),c=void 0)}})}},{key:"flatMap",value:function(e){var r=this;if(typeof e!="function")throw new TypeError(e+" is not a function");var o=nn(this);return new o(function(i){var s=[],u=r.subscribe({next:function(a){if(e)try{a=e(a)}catch(l){return i.error(l)}var f=o.from(a).subscribe({next:function(l){i.next(l)},error:function(l){i.error(l)},complete:function(){var l=s.indexOf(f);l>=0&&s.splice(l,1),c()}});s.push(f)},error:function(a){i.error(a)},complete:function(){c()}});function c(){u.closed&&s.length===0&&i.complete()}return function(){s.forEach(function(a){return a.unsubscribe()}),u.unsubscribe()}})}},{key:ci,value:function(){return this}}],[{key:"from",value:function(e){var r=typeof this=="function"?this:n;if(e==null)throw new TypeError(e+" is not an object");var o=Xn(e,ci);if(o){var i=o.call(e);if(Object(i)!==i)throw new TypeError(i+" is not an object");return Wu(i)&&i.constructor===r?i:new r(function(s){return i.subscribe(s)})}if(Xi("iterator")&&(o=Xn(e,zu),o))return new r(function(s){Mn(function(){if(!s.closed){var u=!0,c=!1,a=void 0;try{for(var f=o.call(e)[Symbol.iterator](),l;!(u=(l=f.next()).done);u=!0){var p=l.value;if(s.next(p),s.closed)return}}catch(g){c=!0,a=g}finally{try{!u&&f.return!=null&&f.return()}finally{if(c)throw a}}s.complete()}})});if(Array.isArray(e))return new r(function(s){Mn(function(){if(!s.closed){for(var u=0;u<e.length;++u)if(s.next(e[u]),s.closed)return;s.complete()}})});throw new TypeError(e+" is not observable")}},{key:"of",value:function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=typeof this=="function"?this:n;return new i(function(s){Mn(function(){if(!s.closed){for(var u=0;u<r.length;++u)if(s.next(r[u]),s.closed)return;s.complete()}})})}},{key:Ls,get:function(){return this}}]),n}();hr.Observable=dr;Ji()&&Object.defineProperty(dr,Symbol("extensions"),{value:{symbol:ci,hostReportError:$t},configurable:!0});var Qu=hr.Observable;const Zu=uu(Qu);var ec=Zu;const zt=ec;var tc=globalThis&&globalThis.__values||function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},nc=function(){function n(){}return n.prototype.networkMonitor=function(t){if(et().isNode)return zt.from([{online:!0}]);var e=qu()?self:window;return new zt(function(r){r.next({online:e.navigator.onLine});var o=function(){return r.next({online:!0})},i=function(){return r.next({online:!1})};return e.addEventListener("online",o),e.addEventListener("offline",i),n._observers.push(r),function(){e.removeEventListener("online",o),e.removeEventListener("offline",i),n._observers=n._observers.filter(function(s){return s!==r})}})},n._observerOverride=function(t){var e,r,o=function(c){if(c.closed)return n._observers=n._observers.filter(function(a){return a!==c}),"continue";c.next(t)};try{for(var i=tc(n._observers),s=i.next();!s.done;s=i.next()){var u=s.value;o(u)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},n._observers=[],n}();const rc=nc;var ic=globalThis&&globalThis.__read||function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return i},oc=1e3*60*5,qe={clockOffset:0,getDateWithClockOffset:function(){return qe.clockOffset?new Date(new Date().getTime()+qe.clockOffset):new Date},getClockOffset:function(){return qe.clockOffset},getHeaderStringFromDate:function(n){return n===void 0&&(n=qe.getDateWithClockOffset()),n.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(n){var t=ic(n.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),e=t[1],r=t[2],o=t[3],i=t[4],s=t[5],u=t[6];return new Date(Date.UTC(Number(e),Number(r)-1,Number(o),Number(i),Number(s),Number(u)))},isClockSkewed:function(n){return Math.abs(n.getTime()-qe.getDateWithClockOffset().getTime())>=oc},isClockSkewError:function(n){if(!n.response||!n.response.headers)return!1;var t=n.response.headers;return!!(["BadRequestException","InvalidSignatureException"].includes(t["x-amzn-errortype"])&&(t.date||t.Date))},setClockOffset:function(n){qe.clockOffset=n}};function sc(n){return n.split("").map(function(t){return t.charCodeAt(0).toString(16).padStart(2,"0")}).join("")}function ac(n){return n.match(/.{2}/g).map(function(t){return String.fromCharCode(parseInt(t,16))}).join("")}var Ks=function(n){return Object.keys(n).map(function(t){return t.toLowerCase()}).sort().join(";")},uc="X-Amz-Algorithm",qs="X-Amz-Date",cc="X-Amz-Credential",fc="X-Amz-Expires",lc="X-Amz-Signature",hc="X-Amz-SignedHeaders",Zi="X-Amz-Security-Token",dc="authorization",li="host",pc=qs.toLowerCase(),gc=Zi.toLowerCase(),Vs="aws4_request",eo="AWS4-HMAC-SHA256",vc="AWS4",yc="e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",mc="UNSIGNED-PAYLOAD",bc=function(n,t,e){return"".concat(n,"/").concat(t,"/").concat(e,"/").concat(Vs)},wc=function(n){var t=n.toISOString().replace(/[:\-]|\.\d{3}/g,"");return{longDate:t,shortDate:t.slice(0,8)}},Hs=function(n){var t=n.credentials,e=n.signingDate,r=e===void 0?new Date:e,o=n.signingRegion,i=n.signingService,s=n.uriEscapePath,u=s===void 0?!0:s,c=t.accessKeyId,a=t.secretAccessKey,f=t.sessionToken,l=wc(r),p=l.longDate,g=l.shortDate,v=bc(g,o,i);return{accessKeyId:c,credentialScope:v,longDate:p,secretAccessKey:a,sessionToken:f,shortDate:g,signingRegion:o,signingService:i,uriEscapePath:u}},Et={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hi=function(n,t){return hi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])},hi(n,t)};function Sc(n,t){hi(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var di=function(){return di=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},di.apply(this,arguments)};function _c(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(e[r[o]]=n[r[o]]);return e}function Ec(n,t,e,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,r);else for(var u=n.length-1;u>=0;u--)(s=n[u])&&(i=(o<3?s(i):o>3?s(t,e,i):s(t,e))||i);return o>3&&i&&Object.defineProperty(t,e,i),i}function Tc(n,t){return function(e,r){t(e,r,n)}}function Ac(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)}function Ic(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})}function Cc(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function Oc(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}function xc(n,t){for(var e in n)e!=="default"&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function pi(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gs(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return i}function Nc(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(Gs(arguments[t]));return n}function Rc(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var r=Array(n),o=0,t=0;t<e;t++)for(var i=arguments[t],s=0,u=i.length;s<u;s++,o++)r[o]=i[s];return r}function pn(n){return this instanceof pn?(this.v=n,this):new pn(n)}function Dc(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(p){r[p]&&(o[p]=function(g){return new Promise(function(v,m){i.push([p,g,v,m])>1||u(p,g)})})}function u(p,g){try{c(r[p](g))}catch(v){l(i[0][3],v)}}function c(p){p.value instanceof pn?Promise.resolve(p.value.v).then(a,f):l(i[0][2],p)}function a(p){u("next",p)}function f(p){u("throw",p)}function l(p,g){p(g),i.shift(),i.length&&u(i[0][0],i[0][1])}}function kc(n){var t,e;return t={},r("next"),r("throw",function(o){throw o}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(o,i){t[o]=n[o]?function(s){return(e=!e)?{value:pn(n[o](s)),done:o==="return"}:i?i(s):s}:i}}function Pc(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof pi=="function"?pi(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(i){e[i]=n[i]&&function(s){return new Promise(function(u,c){s=n[i](s),o(u,c,s.done,s.value)})}}function o(i,s,u,c){Promise.resolve(c).then(function(a){i({value:a,done:u})},s)}}function Uc(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}function Fc(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)Object.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}function Mc(n){return n&&n.__esModule?n:{default:n}}function Lc(n,t){if(!t.has(n))throw new TypeError("attempted to get private field on non-instance");return t.get(n)}function Bc(n,t,e){if(!t.has(n))throw new TypeError("attempted to set private field on non-instance");return t.set(n,e),e}const jc=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return di},__asyncDelegator:kc,__asyncGenerator:Dc,__asyncValues:Pc,__await:pn,__awaiter:Ic,__classPrivateFieldGet:Lc,__classPrivateFieldSet:Bc,__createBinding:Oc,__decorate:Ec,__exportStar:xc,__extends:Sc,__generator:Cc,__importDefault:Mc,__importStar:Fc,__makeTemplateObject:Uc,__metadata:Ac,__param:Tc,__read:Gs,__rest:_c,__spread:Nc,__spreadArrays:Rc,__values:pi},Symbol.toStringTag,{value:"Module"})),$s=Gi(jc);var pr={},Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.MAX_HASHABLE_LENGTH=Fe.INIT=Fe.KEY=Fe.DIGEST_LENGTH=Fe.BLOCK_SIZE=void 0;Fe.BLOCK_SIZE=64;Fe.DIGEST_LENGTH=32;Fe.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);Fe.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];Fe.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1;var gr={};Object.defineProperty(gr,"__esModule",{value:!0});gr.RawSha256=void 0;var Be=Fe,Kc=function(){function n(){this.state=Int32Array.from(Be.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return n.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var e=0,r=t.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>Be.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=t[e++],r--,this.bufferLength===Be.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},n.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,e=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(e.setUint8(this.bufferLength++,128),r%Be.BLOCK_SIZE>=Be.BLOCK_SIZE-8){for(var o=this.bufferLength;o<Be.BLOCK_SIZE;o++)e.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(var o=this.bufferLength;o<Be.BLOCK_SIZE-8;o++)e.setUint8(o,0);e.setUint32(Be.BLOCK_SIZE-8,Math.floor(t/4294967296),!0),e.setUint32(Be.BLOCK_SIZE-4,t),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(Be.DIGEST_LENGTH),o=0;o<8;o++)i[o*4]=this.state[o]>>>24&255,i[o*4+1]=this.state[o]>>>16&255,i[o*4+2]=this.state[o]>>>8&255,i[o*4+3]=this.state[o]>>>0&255;return i},n.prototype.hashBuffer=function(){for(var t=this,e=t.buffer,r=t.state,o=r[0],i=r[1],s=r[2],u=r[3],c=r[4],a=r[5],f=r[6],l=r[7],p=0;p<Be.BLOCK_SIZE;p++){if(p<16)this.temp[p]=(e[p*4]&255)<<24|(e[p*4+1]&255)<<16|(e[p*4+2]&255)<<8|e[p*4+3]&255;else{var g=this.temp[p-2],v=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10;g=this.temp[p-15];var m=(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3;this.temp[p]=(v+this.temp[p-7]|0)+(m+this.temp[p-16]|0)}var w=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&a^~c&f)|0)+(l+(Be.KEY[p]+this.temp[p]|0)|0)|0,_=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&i^o&s^i&s)|0;l=f,f=a,a=c,c=u+w|0,u=s,s=i,i=o,o=w+_|0}r[0]+=o,r[1]+=i,r[2]+=s,r[3]+=u,r[4]+=c,r[5]+=a,r[6]+=f,r[7]+=l},n}();gr.RawSha256=Kc;var zs={},vr={},qc=function(n){for(var t=[],e=0,r=n.length;e<r;e++){var o=n.charCodeAt(e);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,o&63|128);else if(e+1<n.length&&(o&64512)===55296&&(n.charCodeAt(e+1)&64512)===56320){var i=65536+((o&1023)<<10)+(n.charCodeAt(++e)&1023);t.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else t.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(t)},Vc=function(n){for(var t="",e=0,r=n.length;e<r;e++){var o=n[e];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){var i=n[++e];t+=String.fromCharCode((o&31)<<6|i&63)}else if(240<=o&&o<365){var s=[o,n[++e],n[++e],n[++e]],u="%"+s.map(function(c){return c.toString(16)}).join("%");t+=decodeURIComponent(u)}else t+=String.fromCharCode((o&15)<<12|(n[++e]&63)<<6|n[++e]&63)}return t};function Hc(n){return new TextEncoder().encode(n)}function Gc(n){return new TextDecoder("utf-8").decode(n)}var $c=function(n){return typeof TextEncoder=="function"?Hc(n):qc(n)},zc=function(n){return typeof TextDecoder=="function"?Gc(n):Vc(n)};const Wc=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:$c,toUtf8:zc},Symbol.toStringTag,{value:"Module"})),Yc=Gi(Wc);Object.defineProperty(vr,"__esModule",{value:!0});vr.convertToBuffer=void 0;var Jc=Yc,Xc=typeof Buffer<"u"&&Buffer.from?function(n){return Buffer.from(n,"utf8")}:Jc.fromUtf8;function Qc(n){return n instanceof Uint8Array?n:typeof n=="string"?Xc(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}vr.convertToBuffer=Qc;var yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.isEmptyData=void 0;function Zc(n){return typeof n=="string"?n.length===0:n.byteLength===0}yr.isEmptyData=Zc;var mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.numToUint8=void 0;function ef(n){return new Uint8Array([(n&4278190080)>>24,(n&16711680)>>16,(n&65280)>>8,n&255])}mr.numToUint8=ef;var br={};Object.defineProperty(br,"__esModule",{value:!0});br.uint32ArrayFrom=void 0;function tf(n){if(!Array.from){for(var t=new Uint32Array(n.length),e=0;e<n.length;)t[e]=n[e];return t}return Uint32Array.from(n)}br.uint32ArrayFrom=tf;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.uint32ArrayFrom=n.numToUint8=n.isEmptyData=n.convertToBuffer=void 0;var t=vr;Object.defineProperty(n,"convertToBuffer",{enumerable:!0,get:function(){return t.convertToBuffer}});var e=yr;Object.defineProperty(n,"isEmptyData",{enumerable:!0,get:function(){return e.isEmptyData}});var r=mr;Object.defineProperty(n,"numToUint8",{enumerable:!0,get:function(){return r.numToUint8}});var o=br;Object.defineProperty(n,"uint32ArrayFrom",{enumerable:!0,get:function(){return o.uint32ArrayFrom}})})(zs);Object.defineProperty(pr,"__esModule",{value:!0});pr.Sha256=void 0;var ko=$s,Qn=Fe,gi=gr,vi=zs,nf=function(){function n(t){if(this.hash=new gi.RawSha256,t){this.outer=new gi.RawSha256;var e=rf(t),r=new Uint8Array(Qn.BLOCK_SIZE);r.set(e);for(var o=0;o<Qn.BLOCK_SIZE;o++)e[o]^=54,r[o]^=92;this.hash.update(e),this.outer.update(r);for(var o=0;o<e.byteLength;o++)e[o]=0}}return n.prototype.update=function(t){if(!((0,vi.isEmptyData)(t)||this.error))try{this.hash.update((0,vi.convertToBuffer)(t))}catch(e){this.error=e}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return(0,ko.__awaiter)(this,void 0,void 0,function(){return(0,ko.__generator)(this,function(t){return[2,this.digestSync()]})})},n}();pr.Sha256=nf;function rf(n){var t=(0,vi.convertToBuffer)(n);if(t.byteLength>Qn.BLOCK_SIZE){var e=new gi.RawSha256;e.update(t),t=e.digest()}var r=new Uint8Array(Qn.BLOCK_SIZE);return r.set(t),r}(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=$s;(0,t.__exportStar)(pr,n)})(Et);var Ws={};for(var An=0;An<256;An++){var In=An.toString(16).toLowerCase();In.length===1&&(In="0"+In),Ws[An]=In}function of(n){for(var t="",e=0;e<n.byteLength;e++)t+=Ws[n[e]];return t}var an=function(n,t){var e=new Et.Sha256(n);e.update(t);var r=e.digestSync();return r},yi=function(n,t){var e=an(n,t);return of(e)},sf=globalThis&&globalThis.__read||function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return i},af=function(n){return Object.entries(n).map(function(t){var e,r=sf(t,2),o=r[0],i=r[1];return{key:o.toLowerCase(),value:(e=i==null?void 0:i.trim().replace(/\s+/g," "))!==null&&e!==void 0?e:""}}).sort(function(t,e){return t.key<e.key?-1:1}).map(function(t){return"".concat(t.key,":").concat(t.value,`
`)}).join("")},Br=globalThis&&globalThis.__read||function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return i},uf=function(n){return Array.from(n).sort(function(t,e){var r=Br(t,2),o=r[0],i=r[1],s=Br(e,2),u=s[0],c=s[1];return o===u?i<c?-1:1:o<u?-1:1}).map(function(t){var e=Br(t,2),r=e[0],o=e[1];return"".concat(Po(r),"=").concat(Po(o))}).join("&")},Po=function(n){return encodeURIComponent(n).replace(/[!'()*]/g,cf)},cf=function(n){return"%".concat(n.charCodeAt(0).toString(16).toUpperCase())},ff=function(n,t){return t===void 0&&(t=!0),n?t?encodeURIComponent(n).replace(/%2F/g,"/"):n:"/"},lf=function(n){if(n==null)return yc;if(hf(n)){var t=yi(null,n);return t}return mc},hf=function(n){return typeof n=="string"||ArrayBuffer.isView(n)||df(n)},df=function(n){return typeof ArrayBuffer=="function"&&n instanceof ArrayBuffer||Object.prototype.toString.call(n)==="[object ArrayBuffer]"},pf=function(n,t){var e=n.body,r=n.headers,o=n.method,i=n.url;return t===void 0&&(t=!0),[o,ff(i.pathname,t),uf(i.searchParams),af(r),Ks(r),lf(e)].join(`
`)},gf=function(n,t,e,r){var o="".concat(vc).concat(n),i=an(o,t),s=an(i,e),u=an(s,r),c=an(u,Vs);return c},vf=function(n,t,e){return[eo,n,t,e].join(`
`)},Ys=function(n,t){var e=t.credentialScope,r=t.longDate,o=t.secretAccessKey,i=t.shortDate,s=t.signingRegion,u=t.signingService,c=t.uriEscapePath,a=pf(n,c),f=yi(null,a),l=vf(r,e,f),p=yi(gf(o,i,s,u),l);return p},ln=globalThis&&globalThis.__assign||function(){return ln=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},ln.apply(this,arguments)},yf=function(n,t){var e=Hs(t),r=e.accessKeyId,o=e.credentialScope,i=e.longDate,s=e.sessionToken,u=ln({},n.headers);u[li]=n.url.host,u[pc]=i,s&&(u[gc]=s);var c=ln(ln({},n),{headers:u}),a=Ys(c,e),f="Credential=".concat(r,"/").concat(o),l="SignedHeaders=".concat(Ks(u)),p="Signature=".concat(a);return u[dc]="".concat(eo," ").concat(f,", ").concat(l,", ").concat(p),c},Zn=globalThis&&globalThis.__assign||function(){return Zn=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Zn.apply(this,arguments)},mf=globalThis&&globalThis.__rest||function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(e[r[o]]=n[r[o]]);return e},bf=globalThis&&globalThis.__read||function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return i},wf=function(n,t){var e,r,o,i,s=n.body,u=n.method,c=u===void 0?"GET":u,a=n.url,f=t.expiration,l=mf(t,["expiration"]),p=Hs(l),g=p.accessKeyId,v=p.credentialScope,m=p.longDate,w=p.sessionToken,_=new URL(a);Object.entries(Zn(Zn((e={},e[uc]=eo,e[cc]="".concat(g,"/").concat(v),e[qs]=m,e[hc]=li,e),f&&(r={},r[fc]=f.toString(),r)),w&&(o={},o[Zi]=w,o))).forEach(function(I){var N=bf(I,2),D=N[0],U=N[1];_.searchParams.append(D,U)});var S={body:s,headers:(i={},i[li]=a.host,i),method:c,url:_},T=Ys(S,p);return _.searchParams.append(lc,T),_},Wt=globalThis&&globalThis.__assign||function(){return Wt=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Wt.apply(this,arguments)},Sf="iotdevicegateway",_f=/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com(.cn)?$/,Js=function(){function n(){}return n.sign=function(t,e,r){if(t.headers=t.headers||{},t.body&&!t.data)throw new Error('The attribute "body" was found on the request object. Please use the attribute "data" instead.');var o=Wt(Wt({},t),{body:t.data,url:new URL(t.url)}),i=Uo(o,e,r),s=yf(o,i);return s.url=s.url.toString(),s.headers.Authorization=s.headers.authorization,s.headers["X-Amz-Security-Token"]=s.headers["x-amz-security-token"],delete s.headers.authorization,delete s.headers["x-amz-security-token"],s},n.signUrl=function(t,e,r,o){var i=typeof t=="object"?t.url:t,s=typeof t=="object"?t.method:"GET",u=typeof t=="object"?t.body:void 0,c={body:u,method:s,url:new URL(i)},a=Uo(c,e,r,o),f=wf(c,a);return e.session_token&&!Xs(a.signingService)&&f.searchParams.append(Zi,e.session_token),f.toString()},n}(),Uo=function(n,t,e,r){var o=t??{},i=o.access_key,s=o.secret_key,u=o.session_token,c=Ef(n.url),a=c.region,f=c.service,l=e??{},p=l.region,g=p===void 0?a:p,v=l.service,m=v===void 0?f:v,w=Wt({accessKeyId:i,secretAccessKey:s},Xs(m)?{sessionToken:u}:{});return Wt({credentials:w,signingDate:qe.getDateWithClockOffset(),signingRegion:g,signingService:m},r&&{expiration:r})},Ef=function(n){var t,e=n.host,r=(t=e.match(_f))!==null&&t!==void 0?t:[],o=r.slice(1,3);return o[1]==="es"&&(o=o.reverse()),{service:o[0],region:o[1]}},Xs=function(n){return n!==Sf},er=globalThis&&globalThis.__assign||function(){return er=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},er.apply(this,arguments)},Tf=new fe("Parser"),Qs=function(n){var t={};if(n.aws_mobile_analytics_app_id){var e={AWSPinpoint:{appId:n.aws_mobile_analytics_app_id,region:n.aws_mobile_analytics_app_region}};t.Analytics=e}(n.aws_cognito_identity_pool_id||n.aws_user_pools_id)&&(t.Auth={userPoolId:n.aws_user_pools_id,userPoolWebClientId:n.aws_user_pools_web_client_id,region:n.aws_cognito_region,identityPoolId:n.aws_cognito_identity_pool_id,identityPoolRegion:n.aws_cognito_region,mandatorySignIn:n.aws_mandatory_sign_in==="enable",signUpVerificationMethod:n.aws_cognito_sign_up_verification_method||"code"});var r;return n.aws_user_files_s3_bucket?r={AWSS3:{bucket:n.aws_user_files_s3_bucket,region:n.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:n.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:r=n?n.Storage||n:{},n.Logging&&(t.Logging=er(er({},n.Logging),{region:n.aws_project_region})),n.geo&&(t.Geo=Object.assign({},n.geo),n.geo.amazon_location_service&&(t.Geo={AmazonLocationService:n.geo.amazon_location_service})),t.Analytics=Object.assign({},t.Analytics,n.Analytics),t.Auth=Object.assign({},t.Auth,n.Auth),t.Storage=Object.assign({},r),t.Logging=Object.assign({},t.Logging,n.Logging),Tf.debug("parse config",n,"to amplifyconfig",t),t},mi={exports:{}},Fo=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(Fo){var Mo=new Uint8Array(16);mi.exports=function(){return Fo(Mo),Mo}}else{var Lo=new Array(16);mi.exports=function(){for(var t=0,e;t<16;t++)t&3||(e=Math.random()*4294967296),Lo[t]=e>>>((t&3)<<3)&255;return Lo}}var Zs=mi.exports,ea=[];for(var Cn=0;Cn<256;++Cn)ea[Cn]=(Cn+256).toString(16).substr(1);function Af(n,t){var e=t||0,r=ea;return[r[n[e++]],r[n[e++]],r[n[e++]],r[n[e++]],"-",r[n[e++]],r[n[e++]],"-",r[n[e++]],r[n[e++]],"-",r[n[e++]],r[n[e++]],"-",r[n[e++]],r[n[e++]],r[n[e++]],r[n[e++]],r[n[e++]],r[n[e++]]].join("")}var ta=Af,If=Zs,Cf=ta,Bo,jr,Kr=0,qr=0;function Of(n,t,e){var r=t&&e||0,o=t||[];n=n||{};var i=n.node||Bo,s=n.clockseq!==void 0?n.clockseq:jr;if(i==null||s==null){var u=If();i==null&&(i=Bo=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),s==null&&(s=jr=(u[6]<<8|u[7])&16383)}var c=n.msecs!==void 0?n.msecs:new Date().getTime(),a=n.nsecs!==void 0?n.nsecs:qr+1,f=c-Kr+(a-qr)/1e4;if(f<0&&n.clockseq===void 0&&(s=s+1&16383),(f<0||c>Kr)&&n.nsecs===void 0&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Kr=c,qr=a,jr=s,c+=122192928e5;var l=((c&268435455)*1e4+a)%4294967296;o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=l&255;var p=c/4294967296*1e4&268435455;o[r++]=p>>>8&255,o[r++]=p&255,o[r++]=p>>>24&15|16,o[r++]=p>>>16&255,o[r++]=s>>>8|128,o[r++]=s&255;for(var g=0;g<6;++g)o[r+g]=i[g];return t||Cf(o)}var xf=Of,Nf=Zs,Rf=ta;function Df(n,t,e){var r=t&&e||0;typeof n=="string"&&(t=n==="binary"?new Array(16):null,n=null),n=n||{};var o=n.random||(n.rng||Nf)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t)for(var i=0;i<16;++i)t[r+i]=o[i];return t||Rf(o)}var kf=Df,Pf=xf,na=kf,to=na;to.v1=Pf;to.v4=na;var Uf=to,Ff=globalThis&&globalThis.__awaiter||function(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})},Mf=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(e=0)),e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},mt=new fe("CognitoCredentials"),Lf=new Promise(function(n,t){if(!et().isBrowser)return mt.debug("not in the browser, directly resolved"),n();var e=window.gapi&&window.gapi.auth2?window.gapi.auth2:null;if(e)return mt.debug("google api already loaded"),n();setTimeout(function(){return n()},2e3)}),Bf=function(){function n(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return n.prototype.refreshGoogleToken=function(){return Ff(this,void 0,void 0,function(){return Mf(this,function(t){switch(t.label){case 0:return this.initialized?[3,2]:(mt.debug("need to wait for the Google SDK loaded"),[4,Lf]);case 1:t.sent(),this.initialized=!0,mt.debug("finish waiting"),t.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}})})},n.prototype._refreshGoogleTokenImpl=function(){var t=null;return et().isBrowser&&(t=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),t?new Promise(function(e,r){t.getAuthInstance().then(function(o){o||(mt.debug("google Auth undefined"),r(new _t("google Auth undefined")));var i=o.currentUser.get();i.isSignedIn()?(mt.debug("refreshing the google access token"),i.reloadAuthResponse().then(function(s){var u=s.id_token,c=s.expires_at;e({token:u,expires_at:c})}).catch(function(s){s&&s.error==="network_error"?r("Network error reloading google auth response"):r(new _t("Failed to reload google auth response"))})):r(new _t("User is not signed in with Google"))}).catch(function(o){mt.debug("Failed to refresh google token",o),r(new _t("Failed to refresh google token"))})}):(mt.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},n}(),jf=globalThis&&globalThis.__awaiter||function(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})},Kf=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(e=0)),e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ot=new fe("CognitoCredentials"),qf=new Promise(function(n,t){if(!et().isBrowser)return Ot.debug("not in the browser, directly resolved"),n();var e=window.FB;if(e)return Ot.debug("FB SDK already loaded"),n();setTimeout(function(){return n()},2e3)}),Vf=function(){function n(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return n.prototype.refreshFacebookToken=function(){return jf(this,void 0,void 0,function(){return Kf(this,function(t){switch(t.label){case 0:return this.initialized?[3,2]:(Ot.debug("need to wait for the Facebook SDK loaded"),[4,qf]);case 1:t.sent(),this.initialized=!0,Ot.debug("finish waiting"),t.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}})})},n.prototype._refreshFacebookTokenImpl=function(){var t=null;if(et().isBrowser&&(t=window.FB),!t){var e="no fb sdk available";return Ot.debug(e),Promise.reject(new _t(e))}return new Promise(function(r,o){t.getLoginStatus(function(i){if(!i||!i.authResponse){var s="no response from facebook when refreshing the jwt token";Ot.debug(s),o(new _t(s))}else{var u=i.authResponse,c=u.accessToken,a=u.expiresIn,f=new Date,l=a*1e3+f.getTime();if(!c){var s="the jwtToken is undefined";Ot.debug(s),o(new _t(s))}r({token:c,expires_at:l})}},{scope:"public_profile,email"})})},n}(),Hf=new Bf,Gf=new Vf,At={},$f=function(){function n(){}return n.setItem=function(t,e){return At[t]=e,At[t]},n.getItem=function(t){return Object.prototype.hasOwnProperty.call(At,t)?At[t]:void 0},n.removeItem=function(t){return delete At[t]},n.clear=function(){return At={},At},n}(),no=function(){function n(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch{this.storageWindow=$f}}return n.prototype.getStorage=function(){return this.storageWindow},n}(),ra={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-window"]},zf={partitions:[ra,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-window"]}]},Wf=globalThis&&globalThis.__values||function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Yf=function(n){var t,e,r=zf.partitions;try{for(var o=Wf(r),i=o.next();!i.done;i=o.next()){var s=i.value,u=s.regions,c=s.outputs,a=s.regionRegex,f=new RegExp(a);if(u.includes(n)||f.test(n))return c.dnsSuffix}}catch(l){t={error:l}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return ra.outputs.dnsSuffix};function Jf(n,t){return t=t||{},new Promise(function(e,r){var o=new XMLHttpRequest,i=[],s=[],u={},c=function(){return{ok:(o.status/100|0)==2,statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:c,headers:{keys:function(){return i},entries:function(){return s},get:function(f){return u[f.toLowerCase()]},has:function(f){return f.toLowerCase()in u}}}};for(var a in o.open(t.method||"get",n,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(f,l,p){i.push(l=l.toLowerCase()),s.push([l,p]),u[l]=u[l]?u[l]+","+p:p}),e(c())},o.onerror=r,o.withCredentials=t.credentials=="include",t.headers)o.setRequestHeader(a,t.headers[a]);o.send(t.body||null)})}const Xf=Object.freeze(Object.defineProperty({__proto__:null,default:Jf},Symbol.toStringTag,{value:"Module"})),jo=Gi(Xf);self.fetch||(self.fetch=jo.default||jo);var Vr=function(n){var t;return function(){return t||(t=n()),t}},tr=globalThis&&globalThis.__assign||function(){return tr=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},tr.apply(this,arguments)},Qf=globalThis&&globalThis.__awaiter||function(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})},Zf=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(e=0)),e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},el=function(n){return!["HEAD","GET","DELETE"].includes(n.toUpperCase())},tl=function(n,t){var e=n.url,r=n.method,o=n.headers,i=n.body,s=t.abortSignal;return Qf(void 0,void 0,void 0,function(){var u,c,a,f,l,p,g;return Zf(this,function(v){switch(v.label){case 0:return v.trys.push([0,2,,3]),[4,fetch(e,{method:r,headers:o,body:el(r)?i:void 0,signal:s})];case 1:return u=v.sent(),[3,3];case 2:throw c=v.sent(),c instanceof TypeError?new Error("Network error"):c;case 3:return a={},(p=u.headers)===null||p===void 0||p.forEach(function(m,w){a[w.toLowerCase()]=m}),f={statusCode:u.status,headers:a,body:null},l=Object.assign((g=u.body)!==null&&g!==void 0?g:{},{text:Vr(function(){return u.text()}),blob:Vr(function(){return u.blob()}),json:Vr(function(){return u.json()})}),[2,tr(tr({},f),{body:l})]}})})},nr=globalThis&&globalThis.__assign||function(){return nr=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},nr.apply(this,arguments)},nl=globalThis&&globalThis.__awaiter||function(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})},rl=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(e=0)),e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},il=3,ol=function(n){var t=n.maxAttempts,e=t===void 0?il:t,r=n.retryDecider,o=n.computeDelay,i=n.abortSignal;if(e<1)throw new Error("maxAttempts must be greater than 0");return function(s,u){return function(a){var f;return nl(this,void 0,void 0,function(){var l,p,g,v,m,w;return rl(this,function(_){switch(_.label){case 0:p=(f=u.attemptsCount)!==null&&f!==void 0?f:0,v=function(){if(g)return Ko(g,p),g;throw Ko(l,p),l},_.label=1;case 1:if(!(!(i!=null&&i.aborted)&&p<e))return[3,11];_.label=2;case 2:return _.trys.push([2,4,,5]),[4,s(a)];case 3:return g=_.sent(),l=void 0,[3,5];case 4:return m=_.sent(),l=m,g=void 0,[3,5];case 5:return p=u.attemptsCount>p?u.attemptsCount:p+1,u.attemptsCount=p,[4,r(g,l)];case 6:return _.sent()?!(i!=null&&i.aborted)&&p<e?(w=o(p),[4,sl(w,i)]):[3,8]:[3,9];case 7:_.sent(),_.label=8;case 8:return[3,1];case 9:return[2,v()];case 10:return[3,1];case 11:if(i!=null&&i.aborted)throw new Error("Request aborted.");return[2,v()]}})})}}},sl=function(n,t){if(t!=null&&t.aborted)return Promise.resolve();var e,r,o=new Promise(function(i){r=i,e=setTimeout(i,n)});return t==null||t.addEventListener("abort",function i(s){clearTimeout(e),t==null||t.removeEventListener("abort",i),r()}),o},Ko=function(n,t){var e;Object.prototype.toString.call(n)==="[object Object]"&&(n.$metadata=nr(nr({},(e=n.$metadata)!==null&&e!==void 0?e:{}),{attempts:t}))},qo=5*60*1e3,al=function(n){var t=Fs(qo),e=t(n);return e===!1?qo:e},ul=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],cl=function(n){return ul.includes(n)},fl=globalThis&&globalThis.__awaiter||function(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})},ll=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(e=0)),e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},hl=function(n){return function(t,e){return fl(void 0,void 0,void 0,function(){var r,o,i,s;return ll(this,function(u){switch(u.label){case 0:return e==null?[3,1]:(o=e,[3,3]);case 1:return[4,n(t)];case 2:o=u.sent(),u.label=3;case 3:return r=((s=o)!==null&&s!==void 0?s:{}).name,i=t==null?void 0:t.statusCode,[2,vl(e)||gl(i,r)||cl(r)||yl(i,r)]}})})}},dl=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],pl=["TimeoutError","RequestTimeout","RequestTimeoutException"],gl=function(n,t){return n===429||dl.includes(t)},vl=function(n){return(n==null?void 0:n.name)==="Network error"},yl=function(n,t){return[500,502,503,504].includes(n)||pl.includes(t)},ml=globalThis&&globalThis.__awaiter||function(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})},bl=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(e=0)),e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},wl=function(n){var t=n.userAgentHeader,e=t===void 0?"x-amz-user-agent":t,r=n.userAgentValue,o=r===void 0?"":r;return function(i){return function(u){return ml(this,void 0,void 0,function(){var c,a,f;return bl(this,function(l){switch(l.label){case 0:return o.trim().length!==0?[3,2]:[4,i(u)];case 1:return c=l.sent(),[2,c];case 2:return a=e.toLowerCase(),u.headers[a]=u.headers[a]?"".concat(u.headers[a]," ").concat(o):o,[4,i(u)];case 3:return f=l.sent(),[2,f]}})})}}},ia=function(n,t){return function(e,r){for(var o={},i=function(a){return n(a,r)},s=t.length-1;s>=0;s--){var u=t[s],c=u(r);i=c(i,o)}return i(e)}},Sl=ia(tl,[wl,ol]),rr=globalThis&&globalThis.__assign||function(){return rr=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},rr.apply(this,arguments)},wr=function(n){var t,e,r=n.headers,o=n.statusCode;return rr(rr({},_l(n)?n.$metadata:{}),{httpStatusCode:o,requestId:(e=(t=r["x-amzn-requestid"])!==null&&t!==void 0?t:r["x-amzn-request-id"])!==null&&e!==void 0?e:r["x-amz-request-id"],extendedRequestId:r["x-amz-id-2"],cfId:r["x-amz-cf-id"]})},_l=function(n){return typeof(n==null?void 0:n.$metadata)=="object"},oa=globalThis&&globalThis.__awaiter||function(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})},sa=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(e=0)),e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},El=globalThis&&globalThis.__read||function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return i},ro=function(n){return oa(void 0,void 0,void 0,function(){var t,e,r,o,i,s,u,c,a,f;return sa(this,function(l){switch(l.label){case 0:return!n||n.statusCode<300?[2]:[4,io(n)];case 1:return t=l.sent(),e=function(p){var g=El(p.toString().split(/[\,\:]+/),1),v=g[0];return v.includes("#")?v.split("#")[1]:v},r=e((c=(u=(s=n.headers["x-amzn-errortype"])!==null&&s!==void 0?s:t.code)!==null&&u!==void 0?u:t.__type)!==null&&c!==void 0?c:"UnknownError"),o=(f=(a=t.message)!==null&&a!==void 0?a:t.Message)!==null&&f!==void 0?f:"Unknown error",i=new Error(o),[2,Object.assign(i,{name:r,$metadata:wr(n)})]}})})},io=function(n){return oa(void 0,void 0,void 0,function(){var t;return sa(this,function(e){switch(e.label){case 0:if(!n.body)throw new Error("Missing response payload");return[4,n.body.json()];case 1:return t=e.sent(),[2,Object.assign(t,{$metadata:wr(n)})]}})})},Tl=globalThis&&globalThis.__awaiter||function(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})},Al=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(e=0)),e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Il="cognito-identity",Cl=function(n){var t=n.region;return{url:new URL("https://cognito-identity.".concat(t,".").concat(Yf(t)))}},Ol=function(){return function(n,t){return function(r){return Tl(this,void 0,void 0,function(){return Al(this,function(o){return r.headers["cache-control"]="no-store",[2,n(r)]})})}}},aa=ia(Sl,[Ol]),oo={service:Il,endpointResolver:Cl,retryDecider:hl(ro),computeDelay:al,userAgentValue:Sn()};Ds(function(){oo.userAgentValue=Sn()});var ua=function(n){return{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.".concat(n)}},ca=function(n,t,e){var r=n.url;return{headers:t,url:r,body:e,method:"POST"}},hn=globalThis&&globalThis.__assign||function(){return hn=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},hn.apply(this,arguments)},xl=globalThis&&globalThis.__awaiter||function(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})},Nl=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(e=0)),e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},fa=function(n,t,e,r){return function(o,i){return xl(void 0,void 0,void 0,function(){var s,u,c,a;return Nl(this,function(f){switch(f.label){case 0:return s=hn(hn({},r),o),[4,s.endpointResolver(s,i)];case 1:return u=f.sent(),[4,t(i,u)];case 2:return c=f.sent(),[4,n(c,hn({},s))];case 3:return a=f.sent(),[4,e(a)];case 4:return[2,f.sent()]}})})}},Rl=globalThis&&globalThis.__awaiter||function(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})},Dl=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(e=0)),e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},kl=function(n,t){var e=ua("GetId"),r=JSON.stringify(n);return ca(t,e,r)},Pl=function(n){return Rl(void 0,void 0,void 0,function(){var t,e;return Dl(this,function(r){switch(r.label){case 0:return n.statusCode>=300?[4,ro(n)]:[3,2];case 1:throw t=r.sent(),t;case 2:return[4,io(n)];case 3:return e=r.sent(),[2,{IdentityId:e.IdentityId,$metadata:wr(n)}]}})})},On=fa(aa,kl,Pl,oo),Ul=globalThis&&globalThis.__awaiter||function(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})},Fl=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(e=0)),e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ml=function(n,t){var e=ua("GetCredentialsForIdentity"),r=JSON.stringify(n);return ca(t,e,r)},Ll=function(n){return Ul(void 0,void 0,void 0,function(){var t,e;return Fl(this,function(r){switch(r.label){case 0:return n.statusCode>=300?[4,ro(n)]:[3,2];case 1:throw t=r.sent(),t;case 2:return[4,io(n)];case 3:return e=r.sent(),[2,{IdentityId:e.IdentityId,Credentials:Bl(e.Credentials),$metadata:wr(n)}]}})})},Bl=function(n){return n===void 0&&(n={}),{AccessKeyId:n.AccessKeyId,SecretKey:n.SecretKey,SessionToken:n.SessionToken,Expiration:new Date(n.Expiration*1e3)}},xn=fa(aa,Ml,Ll,oo),ir=globalThis&&globalThis.__assign||function(){return ir=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},ir.apply(this,arguments)},Te=globalThis&&globalThis.__awaiter||function(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})},Ae=globalThis&&globalThis.__generator||function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(e=0)),e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},H=new fe("Credentials"),jl=50*60*1e3,Kl="CognitoIdentityId-",ql=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",Vl=function(n,t,e){ot.dispatch("core",{event:n,data:t,message:e},"Credentials",ql)},Hl=function(){function n(t){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(t),this._refreshHandlers.google=Hf.refreshGoogleToken,this._refreshHandlers.facebook=Gf.refreshFacebookToken}return n.prototype.getModuleName=function(){return"Credentials"},n.prototype.getCredSource=function(){return this._credentials_source},n.prototype.configure=function(t){if(!t)return this._config||{};this._config=Object.assign({},this._config,t);var e=this._config.refreshHandlers;return e&&(this._refreshHandlers=ir(ir({},this._refreshHandlers),e)),this._storage=this._config.storage,this._storage||(this._storage=new no().getStorage()),this._storageSync=Promise.resolve(),typeof this._storage.sync=="function"&&(this._storageSync=this._storage.sync()),Vl("credentials_configured",null,"Credentials has been configured successfully"),this._config},n.prototype.get=function(){return H.debug("getting credentials"),this._pickupCredentials()},n.prototype._getCognitoIdentityIdStorageKey=function(t){return"".concat(Kl).concat(t)},n.prototype._pickupCredentials=function(){return H.debug("picking up credentials"),!this._gettingCredPromise||!this._gettingCredPromise.isPending()?(H.debug("getting new cred promise"),this._gettingCredPromise=Ku(this._keepAlive())):H.debug("getting old cred promise"),this._gettingCredPromise},n.prototype._keepAlive=function(){return Te(this,void 0,void 0,function(){var t,e,r,o,i,s,u,c;return Ae(this,function(a){switch(a.label){case 0:if(H.debug("checking if credentials exists and not expired"),t=this._credentials,t&&!this._isExpired(t)&&!this._isPastTTL())return H.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(t)];if(H.debug("need to get a new credential or refresh the existing one"),e=this.Auth,r=e===void 0?gt.Auth:e,!r||typeof r.currentUserCredentials!="function")return[2,this._setCredentialsForGuest()];if(!(!this._isExpired(t)&&this._isPastTTL()))return[3,6];H.debug("ttl has passed but token is not yet expired"),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,r.currentUserPoolUser()];case 2:return o=a.sent(),[4,r.currentSession()];case 3:return i=a.sent(),s=i.refreshToken,u=new Promise(function(f,l){o.refreshSession(s,function(p,g){return p?l(p):f(g)})}),[4,u];case 4:return a.sent(),[3,6];case 5:return c=a.sent(),H.debug("Error attempting to refreshing the session",c),[3,6];case 6:return[2,r.currentUserCredentials()]}})})},n.prototype.refreshFederatedToken=function(t){H.debug("Getting federated credentials");var e=t.provider,r=t.user,o=t.token,i=t.identity_id,s=t.expires_at;s=new Date(s).getFullYear()===1970?s*1e3:s;var u=this;return H.debug("checking if federated jwt token expired"),s>new Date().getTime()?(H.debug("token not expired"),this._setCredentialsFromFederation({provider:e,token:o,user:r,identity_id:i,expires_at:s})):u._refreshHandlers[e]&&typeof u._refreshHandlers[e]=="function"?(H.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:u._refreshHandlers[e],provider:e,user:r})):(H.debug("no refresh handler for provider:",e),this.clear(),Promise.reject("no refresh handler for provider"))},n.prototype._providerRefreshWithRetry=function(t){var e=this,r=t.refreshHandler,o=t.provider,i=t.user,s=10*1e3;return Ms(r,[],s).then(function(u){return H.debug("refresh federated token sucessfully",u),e._setCredentialsFromFederation({provider:o,token:u.token,user:i,identity_id:u.identity_id,expires_at:u.expires_at})}).catch(function(u){var c=typeof u=="string"&&u.toLowerCase().lastIndexOf("network error",u.length)===0;return c||e.clear(),H.debug("refresh federated token failed",u),Promise.reject("refreshing federation token failed: "+u)})},n.prototype._isExpired=function(t){if(!t)return H.debug("no credentials for expiration check"),!0;H.debug("are these credentials expired?",t);var e=Date.now(),r=t.expiration;return r.getTime()<=e},n.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},n.prototype._setCredentialsForGuest=function(){var t;return Te(this,void 0,void 0,function(){var e,r,o,i,s,u,c,a,f,l,p=this;return Ae(this,function(g){switch(g.label){case 0:return H.debug("setting credentials for guest"),!((t=this._config)===null||t===void 0)&&t.identityPoolId||(this._config=Object.assign({},this._config,Qs(this._config||{}).Auth)),e=this._config,r=e.identityPoolId,o=e.region,i=e.mandatorySignIn,s=e.identityPoolRegion,i?[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")]:r?!s&&!o?(H.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")]):(c=this,[4,this._getGuestIdentityId()]):(H.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")]);case 1:return u=c._identityId=g.sent(),a={region:s??o},f=function(){return Te(p,void 0,void 0,function(){var v,m;return Ae(this,function(w){switch(w.label){case 0:return u?[3,2]:[4,On(a,{IdentityPoolId:r})];case 1:v=w.sent().IdentityId,this._identityId=v,w.label=2;case 2:return[4,xn(a,{IdentityId:this._identityId})];case 3:return m=w.sent().Credentials,[2,{identityId:this._identityId,accessKeyId:m.AccessKeyId,secretAccessKey:m.SecretKey,sessionToken:m.SessionToken,expiration:m.Expiration}]}})})},l=f().catch(function(v){return Te(p,void 0,void 0,function(){return Ae(this,function(m){throw v})})}),[2,this._loadCredentials(l,"guest",!1,null).then(function(v){return v}).catch(function(v){return Te(p,void 0,void 0,function(){var m,w=this;return Ae(this,function(_){switch(_.label){case 0:return v.name==="ResourceNotFoundException"&&v.message==="Identity '".concat(u,"' not found.")?(H.debug("Failed to load guest credentials"),[4,this._removeGuestIdentityId()]):[3,2];case 1:return _.sent(),m=function(){return Te(w,void 0,void 0,function(){var S,T;return Ae(this,function(I){switch(I.label){case 0:return[4,On(a,{IdentityPoolId:r})];case 1:return S=I.sent().IdentityId,this._identityId=S,[4,xn(a,{IdentityId:S})];case 2:return T=I.sent().Credentials,[2,{identityId:S,accessKeyId:T.AccessKeyId,secretAccessKey:T.SecretKey,sessionToken:T.SessionToken,expiration:T.Expiration}]}})})},l=m().catch(function(S){return Te(w,void 0,void 0,function(){return Ae(this,function(T){throw S})})}),[2,this._loadCredentials(l,"guest",!1,null)];case 2:return[2,v]}})})})]}})})},n.prototype._setCredentialsFromFederation=function(t){var e=this,r=t.provider,o=t.token,i=t.identity_id,s={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"},u=s[r]||r;if(!u)return Promise.reject("You must specify a federated provider");var c={};c[u]=o;var a=this._config,f=a.identityPoolId,l=a.region,p=a.identityPoolRegion;if(!f)return H.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!p&&!l)return H.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var g={region:p??l},v=function(){return Te(e,void 0,void 0,function(){var w,_;return Ae(this,function(S){switch(S.label){case 0:return i?[3,2]:[4,On(g,{IdentityPoolId:f,Logins:c})];case 1:w=S.sent().IdentityId,i=w,S.label=2;case 2:return[4,xn(g,{IdentityId:i,Logins:c})];case 3:return _=S.sent().Credentials,[2,{identityId:i,accessKeyId:_.AccessKeyId,secretAccessKey:_.SecretKey,sessionToken:_.SessionToken,expiration:_.Expiration}]}})})},m=v().catch(function(w){return Te(e,void 0,void 0,function(){return Ae(this,function(_){throw w})})});return this._loadCredentials(m,"federated",!0,t)},n.prototype._setCredentialsFromSession=function(t){var e=this;H.debug("set credentials from session");var r=t.getIdToken().getJwtToken(),o=this._config,i=o.region,s=o.userPoolId,u=o.identityPoolId,c=o.identityPoolRegion;if(!u)return H.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!c&&!i)return H.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var a="cognito-idp."+i+".amazonaws.com/"+s,f={};f[a]=r;var l={region:c??i},p=function(){return Te(e,void 0,void 0,function(){var v,m,w,_,S,T,I,N,D,U;return Ae(this,function(k){switch(k.label){case 0:return[4,this._getGuestIdentityId()];case 1:return v=k.sent(),v?[3,3]:[4,On(l,{IdentityPoolId:u,Logins:f})];case 2:w=k.sent().IdentityId,m=w,k.label=3;case 3:return[4,xn(l,{IdentityId:v||m,Logins:f})];case 4:return _=k.sent(),S=_.Credentials,T=S.AccessKeyId,I=S.Expiration,N=S.SecretKey,D=S.SessionToken,U=_.IdentityId,this._identityId=U,v?(H.debug("The guest identity ".concat(v," has been successfully linked to the logins")),v===U&&H.debug("The guest identity ".concat(v," has become the primary identity")),[4,this._removeGuestIdentityId()]):[3,6];case 5:k.sent(),k.label=6;case 6:return[2,{accessKeyId:T,secretAccessKey:N,sessionToken:D,expiration:I,identityId:U}]}})})},g=p().catch(function(v){return Te(e,void 0,void 0,function(){return Ae(this,function(m){throw v})})});return this._loadCredentials(g,"userPool",!0,null)},n.prototype._loadCredentials=function(t,e,r,o){var i=this,s=this;return new Promise(function(u,c){t.then(function(a){return Te(i,void 0,void 0,function(){var f,l,p,g,v;return Ae(this,function(m){switch(m.label){case 0:if(H.debug("Load credentials successfully",a),this._identityId&&!a.identityId&&(a.identityId=this._identityId),s._credentials=a,s._credentials.authenticated=r,s._credentials_source=e,s._nextCredentialsRefresh=new Date().getTime()+jl,e==="federated"){f=Object.assign({id:this._credentials.identityId},o.user),l=o.provider,p=o.token,g=o.expires_at,v=o.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:l,token:p,user:f,expires_at:g,identity_id:v}))}catch(w){H.debug("Failed to put federated info into auth storage",w)}}return e!=="guest"?[3,2]:[4,this._setGuestIdentityId(a.identityId)];case 1:m.sent(),m.label=2;case 2:return u(s._credentials),[2]}})})}).catch(function(a){if(a){H.debug("Failed to load credentials",t),H.debug("Error loading credentials",a),c(a);return}})})},n.prototype.set=function(t,e){return e==="session"?this._setCredentialsFromSession(t):e==="federation"?this._setCredentialsFromFederation(t):e==="guest"?this._setCredentialsForGuest():(H.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},n.prototype.clear=function(){return Te(this,void 0,void 0,function(){return Ae(this,function(t){return this._credentials=null,this._credentials_source=null,H.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]})})},n.prototype._getGuestIdentityId=function(){return Te(this,void 0,void 0,function(){var t,e;return Ae(this,function(r){switch(r.label){case 0:t=this._config.identityPoolId,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),[2,this._storage.getItem(this._getCognitoIdentityIdStorageKey(t))];case 3:return e=r.sent(),H.debug("Failed to get the cached guest identityId",e),[3,4];case 4:return[2]}})})},n.prototype._setGuestIdentityId=function(t){return Te(this,void 0,void 0,function(){var e,r;return Ae(this,function(o){switch(o.label){case 0:e=this._config.identityPoolId,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._storageSync];case 2:return o.sent(),this._storage.setItem(this._getCognitoIdentityIdStorageKey(e),t),[3,4];case 3:return r=o.sent(),H.debug("Failed to cache guest identityId",r),[3,4];case 4:return[2]}})})},n.prototype._removeGuestIdentityId=function(){return Te(this,void 0,void 0,function(){var t;return Ae(this,function(e){return t=this._config.identityPoolId,H.debug("removing ".concat(this._getCognitoIdentityIdStorageKey(t)," from storage")),this._storage.removeItem(this._getCognitoIdentityIdStorageKey(t)),[2]})})},n.prototype.shear=function(t){return{accessKeyId:t.accessKeyId,sessionToken:t.sessionToken,secretAccessKey:t.secretAccessKey,identityId:t.identityId,authenticated:t.authenticated}},n}(),pt=new Hl(null);gt.register(pt);var Nn={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Vo;function Gl(){if(Vo)return Nn;Vo=1,Nn.parse=s,Nn.serialize=a;var n=Object.prototype.toString,t=Object.prototype.hasOwnProperty,e=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,r=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,o=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/;function s(g,v){if(typeof g!="string")throw new TypeError("argument str must be a string");var m={},w=g.length;if(w<2)return m;var _=v&&v.decode||f,S=0,T=0,I=0;do{if(T=g.indexOf("=",S),T===-1)break;if(I=g.indexOf(";",S),I===-1)I=w;else if(T>I){S=g.lastIndexOf(";",T-1)+1;continue}var N=u(g,S,T),D=c(g,T,N),U=g.slice(N,D);if(!t.call(m,U)){var k=u(g,T+1,I),B=c(g,I,k);g.charCodeAt(k)===34&&g.charCodeAt(B-1)===34&&(k++,B--);var K=g.slice(k,B);m[U]=p(K,_)}S=I+1}while(S<w);return m}function u(g,v,m){do{var w=g.charCodeAt(v);if(w!==32&&w!==9)return v}while(++v<m);return m}function c(g,v,m){for(;v>m;){var w=g.charCodeAt(--v);if(w!==32&&w!==9)return v+1}return m}function a(g,v,m){var w=m&&m.encode||encodeURIComponent;if(typeof w!="function")throw new TypeError("option encode is invalid");if(!e.test(g))throw new TypeError("argument name is invalid");var _=w(v);if(!r.test(_))throw new TypeError("argument val is invalid");var S=g+"="+_;if(!m)return S;if(m.maxAge!=null){var T=Math.floor(m.maxAge);if(!isFinite(T))throw new TypeError("option maxAge is invalid");S+="; Max-Age="+T}if(m.domain){if(!o.test(m.domain))throw new TypeError("option domain is invalid");S+="; Domain="+m.domain}if(m.path){if(!i.test(m.path))throw new TypeError("option path is invalid");S+="; Path="+m.path}if(m.expires){var I=m.expires;if(!l(I)||isNaN(I.valueOf()))throw new TypeError("option expires is invalid");S+="; Expires="+I.toUTCString()}if(m.httpOnly&&(S+="; HttpOnly"),m.secure&&(S+="; Secure"),m.partitioned&&(S+="; Partitioned"),m.priority){var N=typeof m.priority=="string"?m.priority.toLowerCase():m.priority;switch(N){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(m.sameSite){var D=typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite;switch(D){case!0:S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"strict":S+="; SameSite=Strict";break;case"none":S+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return S}function f(g){return g.indexOf("%")!==-1?decodeURIComponent(g):g}function l(g){return n.call(g)==="[object Date]"}function p(g,v){try{return v(g)}catch{return g}}return Nn}var Ln=Gl();function $l(){const n=typeof window>"u"?void 0:window.TEST_HAS_DOCUMENT_COOKIE;return typeof n=="boolean"?n:typeof document=="object"&&typeof document.cookie=="string"}function zl(n){return typeof n=="string"?Ln.parse(n):typeof n=="object"&&n!==null?n:{}}function Hr(n,t={}){const e=Wl(n);if(!t.doNotParse)try{return JSON.parse(e)}catch{}return n}function Wl(n){return n&&n[0]==="j"&&n[1]===":"?n.substr(2):n}class Gr{constructor(t,e={}){this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.update=()=>{if(!this.HAS_DOCUMENT_COOKIE)return;const o=this.cookies;this.cookies=Ln.parse(document.cookie),this._checkChanges(o)};const r=typeof document>"u"?"":document.cookie;this.cookies=zl(t||r),this.defaultSetOptions=e,this.HAS_DOCUMENT_COOKIE=$l()}_emitChange(t){for(let e=0;e<this.changeListeners.length;++e)this.changeListeners[e](t)}_checkChanges(t){new Set(Object.keys(t).concat(Object.keys(this.cookies))).forEach(r=>{t[r]!==this.cookies[r]&&this._emitChange({name:r,value:Hr(this.cookies[r])})})}_startPolling(){this.pollingInterval=setInterval(this.update,300)}_stopPolling(){this.pollingInterval&&clearInterval(this.pollingInterval)}get(t,e={}){return e.doNotUpdate||this.update(),Hr(this.cookies[t],e)}getAll(t={}){t.doNotUpdate||this.update();const e={};for(let r in this.cookies)e[r]=Hr(this.cookies[r],t);return e}set(t,e,r){r?r=Object.assign(Object.assign({},this.defaultSetOptions),r):r=this.defaultSetOptions;const o=typeof e=="string"?e:JSON.stringify(e);this.cookies=Object.assign(Object.assign({},this.cookies),{[t]:o}),this.HAS_DOCUMENT_COOKIE&&(document.cookie=Ln.serialize(t,o,r)),this._emitChange({name:t,value:e,options:r})}remove(t,e){const r=e=Object.assign(Object.assign(Object.assign({},this.defaultSetOptions),e),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=Object.assign({},this.cookies),delete this.cookies[t],this.HAS_DOCUMENT_COOKIE&&(document.cookie=Ln.serialize(t,"",r)),this._emitChange({name:t,value:void 0,options:e})}addChangeListener(t){this.changeListeners.push(t),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===1&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.addEventListener("change",this.update):this._startPolling())}removeChangeListener(t){const e=this.changeListeners.indexOf(t);e>=0&&this.changeListeners.splice(e,1),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===0&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.removeEventListener("change",this.update):this._stopPolling())}}var or=globalThis&&globalThis.__assign||function(){return or=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},or.apply(this,arguments)},Ho=et().isBrowser,Yl=365*24*60*60*1e3,Jl=function(){function n(t){t===void 0&&(t={}),this.cookies=new Gr,this.store=Ho?window.localStorage:Object.create(null),this.cookies=t.req?new Gr(decodeURIComponent(t.req.headers.cookie)):new Gr,Object.assign(this.store,this.cookies.getAll())}return Object.defineProperty(n.prototype,"length",{get:function(){return Object.entries(this.store).length},enumerable:!1,configurable:!0}),n.prototype.clear=function(){var t=this;Array.from(new Array(this.length)).map(function(e,r){return t.key(r)}).forEach(function(e){return t.removeItem(e)})},n.prototype.getItem=function(t){return this.getLocalItem(t)},n.prototype.getLocalItem=function(t){return Object.prototype.hasOwnProperty.call(this.store,t)?this.store[t]:null},n.prototype.getUniversalItem=function(t){return this.cookies.get(t)},n.prototype.key=function(t){return Object.keys(this.store)[t]},n.prototype.removeItem=function(t){this.removeLocalItem(t),this.removeUniversalItem(t)},n.prototype.removeLocalItem=function(t){delete this.store[t]},n.prototype.removeUniversalItem=function(t){this.cookies.remove(t,{path:"/"})},n.prototype.setItem=function(t,e){this.setLocalItem(t,e);var r=t.split(".").pop(),o=["LastAuthUser","accessToken","refreshToken","idToken"];o.includes(r??"")&&this.setUniversalItem(t,e,{expires:new Date(Date.now()+Yl)})},n.prototype.setLocalItem=function(t,e){this.store[t]=e},n.prototype.setUniversalItem=function(t,e,r){r===void 0&&(r={}),this.cookies.set(t,e,or(or({},r),{path:"/",sameSite:!0,secure:!(Ho&&window.location.hostname==="localhost")}))},n}(),Xl=typeof Symbol<"u"&&typeof Symbol.for=="function",la=Xl?Symbol.for("INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER",ha="x-amz-user-agent";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bi=function(n,t){return bi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])},bi(n,t)};function Ql(n,t){bi(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Xe={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:new no().getStorage()};function Go(n){var t=0;t=n.length;for(var e=n.length;e>=0;e-=1){var r=n.charCodeAt(e);r>127&&r<=2047?t+=1:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&(e-=1)}return t}function qt(){var n=new Date;return n.getTime()}function Rn(n){return Number.isInteger?Number.isInteger(n):Zl(n)}function Zl(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}var ft=new fe("StorageCache"),eh=function(){function n(t){this.config=Object.assign({},t),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return n.prototype.getModuleName=function(){return"Cache"},n.prototype.checkConfig=function(){Rn(this.config.capacityInBytes)||(ft.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=Xe.capacityInBytes),Rn(this.config.itemMaxSize)||(ft.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=Xe.itemMaxSize),Rn(this.config.defaultTTL)||(ft.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=Xe.defaultTTL),Rn(this.config.defaultPriority)||(ft.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=Xe.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(ft.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=Xe.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(ft.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=Xe.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(ft.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=Xe.warningThreshold);var t=5*1024*1024;this.config.capacityInBytes>t&&(ft.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=Xe.capacityInBytes)},n.prototype.fillCacheItem=function(t,e,r){var o={key:t,data:e,timestamp:qt(),visitedTime:qt(),priority:r.priority,expires:r.expires,type:typeof e,byteSize:0};return o.byteSize=Go(JSON.stringify(o)),o.byteSize=Go(JSON.stringify(o)),o},n.prototype.configure=function(t){return t?(t.keyPrefix&&ft.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,t,t.Cache),this.checkConfig(),this.config):this.config},n}(),Oe=new fe("Cache"),th=function(n){Ql(t,n);function t(e){var r=this,o=e?Object.assign({},Xe,e):Xe;return r=n.call(this,o)||this,r.config.storage=o.storage,r.getItem=r.getItem.bind(r),r.setItem=r.setItem.bind(r),r.removeItem=r.removeItem.bind(r),r}return t.prototype._decreaseCurSizeInBytes=function(e){var r=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(r-e).toString())},t.prototype._increaseCurSizeInBytes=function(e){var r=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(r+e).toString())},t.prototype._refreshItem=function(e,r){return e.visitedTime=qt(),this.config.storage.setItem(r,JSON.stringify(e)),e},t.prototype._isExpired=function(e){var r=this.config.storage.getItem(e),o=JSON.parse(r);return qt()>=o.expires},t.prototype._removeItem=function(e,r){var o=r||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(o),this.config.storage.removeItem(e)},t.prototype._setItem=function(e,r){this._increaseCurSizeInBytes(r.byteSize);try{this.config.storage.setItem(e,JSON.stringify(r))}catch(o){this._decreaseCurSizeInBytes(r.byteSize),Oe.error("Failed to set item "+o)}},t.prototype._sizeToPop=function(e){var r=this.getCacheCurSize()+e-this.config.capacityInBytes,o=(1-this.config.warningThreshold)*this.config.capacityInBytes;return r>o?r:o},t.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},t.prototype._findValidKeys=function(){for(var e=[],r=[],o=0;o<this.config.storage.length;o+=1)r.push(this.config.storage.key(o));for(var o=0;o<r.length;o+=1){var i=r[o];i.indexOf(this.config.keyPrefix)===0&&i!==this.cacheCurSizeKey&&(this._isExpired(i)?this._removeItem(i):e.push(i))}return e},t.prototype._popOutItems=function(e,r){for(var o=[],i=r,s=0;s<e.length;s+=1){var u=this.config.storage.getItem(e[s]);if(u!=null){var c=JSON.parse(u);o.push(c)}}o.sort(function(a,f){return a.priority>f.priority?-1:a.priority<f.priority?1:a.visitedTime<f.visitedTime?-1:1});for(var s=0;s<o.length;s+=1)if(this._removeItem(o[s].key,o[s].byteSize),i-=o[s].byteSize,i<=0)return},t.prototype.setItem=function(e,r,o){Oe.log("Set item: key is "+e+", value is "+r+" with options: "+o);var i=this.config.keyPrefix+e;if(i===this.config.keyPrefix||i===this.cacheCurSizeKey){Oe.warn("Invalid key: should not be empty or 'CurSize'");return}if(typeof r>"u"){Oe.warn("The value of item should not be undefined!");return}var s={priority:o&&o.priority!==void 0?o.priority:this.config.defaultPriority,expires:o&&o.expires!==void 0?o.expires:this.config.defaultTTL+qt()};if(s.priority<1||s.priority>5){Oe.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");return}var u=this.fillCacheItem(i,r,s);if(u.byteSize>this.config.itemMaxSize){Oe.warn("Item with key: "+e+" you are trying to put into is too big!");return}try{var c=this.config.storage.getItem(i);if(c&&this._removeItem(i,JSON.parse(c).byteSize),this._isCacheFull(u.byteSize)){var a=this._findValidKeys();if(this._isCacheFull(u.byteSize)){var f=this._sizeToPop(u.byteSize);this._popOutItems(a,f)}}this._setItem(i,u)}catch(l){Oe.warn("setItem failed! "+l)}},t.prototype.getItem=function(e,r){Oe.log("Get item: key is "+e+" with options "+r);var o=null,i=this.config.keyPrefix+e;if(i===this.config.keyPrefix||i===this.cacheCurSizeKey)return Oe.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(o=this.config.storage.getItem(i),o!=null)if(this._isExpired(i))this._removeItem(i,JSON.parse(o).byteSize),o=null;else{var s=JSON.parse(o);return s=this._refreshItem(s,i),s.data}if(r&&r.callback!==void 0){var u=r.callback();return u!==null&&this.setItem(e,u,r),u}return null}catch(c){return Oe.warn("getItem failed! "+c),null}},t.prototype.removeItem=function(e){Oe.log("Remove item: key is "+e);var r=this.config.keyPrefix+e;if(!(r===this.config.keyPrefix||r===this.cacheCurSizeKey))try{var o=this.config.storage.getItem(r);o&&this._removeItem(r,JSON.parse(o).byteSize)}catch(i){Oe.warn("removeItem failed! "+i)}},t.prototype.clear=function(){Oe.log("Clear Cache");for(var e=[],r=0;r<this.config.storage.length;r+=1){var o=this.config.storage.key(r);o.indexOf(this.config.keyPrefix)===0&&e.push(o)}try{for(var r=0;r<e.length;r+=1)this.config.storage.removeItem(e[r])}catch(i){Oe.warn("clear failed! "+i)}},t.prototype.getAllKeys=function(){for(var e=[],r=0;r<this.config.storage.length;r+=1){var o=this.config.storage.key(r);o.indexOf(this.config.keyPrefix)===0&&o!==this.cacheCurSizeKey&&e.push(o.substring(this.config.keyPrefix.length))}return e},t.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},t.prototype.createInstance=function(e){return(!e.keyPrefix||e.keyPrefix===Xe.keyPrefix)&&(Oe.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=qt.toString()),new t(e)},t}(eh),gn=new th;gt.register(gn);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wi=function(n,t){return wi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])},wi(n,t)};function da(n,t){wi(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Se=function(){return Se=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Se.apply(this,arguments)};function W(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})}function Y(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function ht(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return i}var sr;(function(n){n.Cognito="COGNITO",n.Google="Google",n.Facebook="Facebook",n.Amazon="LoginWithAmazon",n.Apple="SignInWithApple"})(sr||(sr={}));function $r(n){var t=["provider"];return n&&!!t.find(function(e){return n.hasOwnProperty(e)})}function nh(n){var t=["customProvider"];return n&&!!t.find(function(e){return n.hasOwnProperty(e)})}function rh(n){var t=["customState"];return n&&!!t.find(function(e){return n.hasOwnProperty(e)})}function Nt(n){return n.redirectSignIn!==void 0}var J;(function(n){n.NoConfig="noConfig",n.MissingAuthConfig="missingAuthConfig",n.EmptyUsername="emptyUsername",n.InvalidUsername="invalidUsername",n.EmptyPassword="emptyPassword",n.EmptyCode="emptyCode",n.SignUpError="signUpError",n.NoMFA="noMFA",n.InvalidMFA="invalidMFA",n.EmptyChallengeResponse="emptyChallengeResponse",n.NoUserSession="noUserSession",n.Default="default",n.DeviceConfig="deviceConfig",n.NetworkError="networkError",n.AutoSignInError="autoSignInError"})(J||(J={}));function ih(n){return!!n.username}var $o;(function(n){n.API_KEY="API_KEY",n.AWS_IAM="AWS_IAM",n.OPENID_CONNECT="OPENID_CONNECT",n.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS",n.AWS_LAMBDA="AWS_LAMBDA"})($o||($o={}));/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var zo=function(){function n(e){var r=e||{},o=r.ValidationData,i=r.Username,s=r.Password,u=r.AuthParameters,c=r.ClientMetadata;this.validationData=o||{},this.authParameters=u||{},this.clientMetadata=c||{},this.username=i,this.password=s}var t=n.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},n}(),Z={},Sr={};Sr.byteLength=ah;Sr.toByteArray=ch;Sr.fromByteArray=hh;var ut=[],je=[],oh=typeof Uint8Array<"u"?Uint8Array:Array,zr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Mt=0,sh=zr.length;Mt<sh;++Mt)ut[Mt]=zr[Mt],je[zr.charCodeAt(Mt)]=Mt;je["-".charCodeAt(0)]=62;je["_".charCodeAt(0)]=63;function pa(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function ah(n){var t=pa(n),e=t[0],r=t[1];return(e+r)*3/4-r}function uh(n,t,e){return(t+e)*3/4-e}function ch(n){var t,e=pa(n),r=e[0],o=e[1],i=new oh(uh(n,r,o)),s=0,u=o>0?r-4:r,c;for(c=0;c<u;c+=4)t=je[n.charCodeAt(c)]<<18|je[n.charCodeAt(c+1)]<<12|je[n.charCodeAt(c+2)]<<6|je[n.charCodeAt(c+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=t&255;return o===2&&(t=je[n.charCodeAt(c)]<<2|je[n.charCodeAt(c+1)]>>4,i[s++]=t&255),o===1&&(t=je[n.charCodeAt(c)]<<10|je[n.charCodeAt(c+1)]<<4|je[n.charCodeAt(c+2)]>>2,i[s++]=t>>8&255,i[s++]=t&255),i}function fh(n){return ut[n>>18&63]+ut[n>>12&63]+ut[n>>6&63]+ut[n&63]}function lh(n,t,e){for(var r,o=[],i=t;i<e;i+=3)r=(n[i]<<16&16711680)+(n[i+1]<<8&65280)+(n[i+2]&255),o.push(fh(r));return o.join("")}function hh(n){for(var t,e=n.length,r=e%3,o=[],i=16383,s=0,u=e-r;s<u;s+=i)o.push(lh(n,s,s+i>u?u:s+i));return r===1?(t=n[e-1],o.push(ut[t>>2]+ut[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],o.push(ut[t>>10]+ut[t>>4&63]+ut[t<<2&63]+"=")),o.join("")}var so={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */so.read=function(n,t,e,r,o){var i,s,u=o*8-r-1,c=(1<<u)-1,a=c>>1,f=-7,l=e?o-1:0,p=e?-1:1,g=n[t+l];for(l+=p,i=g&(1<<-f)-1,g>>=-f,f+=u;f>0;i=i*256+n[t+l],l+=p,f-=8);for(s=i&(1<<-f)-1,i>>=-f,f+=r;f>0;s=s*256+n[t+l],l+=p,f-=8);if(i===0)i=1-a;else{if(i===c)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,r),i=i-a}return(g?-1:1)*s*Math.pow(2,i-r)};so.write=function(n,t,e,r,o,i){var s,u,c,a=i*8-o-1,f=(1<<a)-1,l=f>>1,p=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,v=r?1:-1,m=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+l>=1?t+=p/c:t+=p*Math.pow(2,1-l),t*c>=2&&(s++,c/=2),s+l>=f?(u=0,s=f):s+l>=1?(u=(t*c-1)*Math.pow(2,o),s=s+l):(u=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;n[e+g]=u&255,g+=v,u/=256,o-=8);for(s=s<<o|u,a+=o;a>0;n[e+g]=s&255,g+=v,s/=256,a-=8);n[e+g-v]|=m*128};var dh={}.toString,ph=Array.isArray||function(n){return dh.call(n)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */(function(n){var t=Sr,e=so,r=ph;n.Buffer=u,n.SlowBuffer=_,n.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=window.TYPED_ARRAY_SUPPORT!==void 0?window.TYPED_ARRAY_SUPPORT:o(),n.kMaxLength=i();function o(){try{var y=new Uint8Array(1);return y.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},y.foo()===42&&typeof y.subarray=="function"&&y.subarray(1,1).byteLength===0}catch{return!1}}function i(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(y,h){if(i()<h)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(y=new Uint8Array(h),y.__proto__=u.prototype):(y===null&&(y=new u(h)),y.length=h),y}function u(y,h,d){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(y,h,d);if(typeof y=="number"){if(typeof h=="string")throw new Error("If encoding is specified then the first argument must be a string");return l(this,y)}return c(this,y,h,d)}u.poolSize=8192,u._augment=function(y){return y.__proto__=u.prototype,y};function c(y,h,d,b){if(typeof h=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&h instanceof ArrayBuffer?v(y,h,d,b):typeof h=="string"?p(y,h,d):m(y,h)}u.from=function(y,h,d){return c(null,y,h,d)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0}));function a(y){if(typeof y!="number")throw new TypeError('"size" argument must be a number');if(y<0)throw new RangeError('"size" argument must not be negative')}function f(y,h,d,b){return a(h),h<=0?s(y,h):d!==void 0?typeof b=="string"?s(y,h).fill(d,b):s(y,h).fill(d):s(y,h)}u.alloc=function(y,h,d){return f(null,y,h,d)};function l(y,h){if(a(h),y=s(y,h<0?0:w(h)|0),!u.TYPED_ARRAY_SUPPORT)for(var d=0;d<h;++d)y[d]=0;return y}u.allocUnsafe=function(y){return l(null,y)},u.allocUnsafeSlow=function(y){return l(null,y)};function p(y,h,d){if((typeof d!="string"||d==="")&&(d="utf8"),!u.isEncoding(d))throw new TypeError('"encoding" must be a valid string encoding');var b=S(h,d)|0;y=s(y,b);var E=y.write(h,d);return E!==b&&(y=y.slice(0,E)),y}function g(y,h){var d=h.length<0?0:w(h.length)|0;y=s(y,d);for(var b=0;b<d;b+=1)y[b]=h[b]&255;return y}function v(y,h,d,b){if(h.byteLength,d<0||h.byteLength<d)throw new RangeError("'offset' is out of bounds");if(h.byteLength<d+(b||0))throw new RangeError("'length' is out of bounds");return d===void 0&&b===void 0?h=new Uint8Array(h):b===void 0?h=new Uint8Array(h,d):h=new Uint8Array(h,d,b),u.TYPED_ARRAY_SUPPORT?(y=h,y.__proto__=u.prototype):y=g(y,h),y}function m(y,h){if(u.isBuffer(h)){var d=w(h.length)|0;return y=s(y,d),y.length===0||h.copy(y,0,0,d),y}if(h){if(typeof ArrayBuffer<"u"&&h.buffer instanceof ArrayBuffer||"length"in h)return typeof h.length!="number"||au(h.length)?s(y,0):g(y,h);if(h.type==="Buffer"&&r(h.data))return g(y,h.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(y){if(y>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return y|0}function _(y){return+y!=y&&(y=0),u.alloc(+y)}u.isBuffer=function(h){return!!(h!=null&&h._isBuffer)},u.compare=function(h,d){if(!u.isBuffer(h)||!u.isBuffer(d))throw new TypeError("Arguments must be Buffers");if(h===d)return 0;for(var b=h.length,E=d.length,O=0,R=Math.min(b,E);O<R;++O)if(h[O]!==d[O]){b=h[O],E=d[O];break}return b<E?-1:E<b?1:0},u.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(h,d){if(!r(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return u.alloc(0);var b;if(d===void 0)for(d=0,b=0;b<h.length;++b)d+=h[b].length;var E=u.allocUnsafe(d),O=0;for(b=0;b<h.length;++b){var R=h[b];if(!u.isBuffer(R))throw new TypeError('"list" argument must be an Array of Buffers');R.copy(E,O),O+=R.length}return E};function S(y,h){if(u.isBuffer(y))return y.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(y)||y instanceof ArrayBuffer))return y.byteLength;typeof y!="string"&&(y=""+y);var d=y.length;if(d===0)return 0;for(var b=!1;;)switch(h){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":case void 0:return be(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return rt(y).length;default:if(b)return be(y).length;h=(""+h).toLowerCase(),b=!0}}u.byteLength=S;function T(y,h,d){var b=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,h>>>=0,d<=h))return"";for(y||(y="utf8");;)switch(y){case"hex":return kr(this,h,d);case"utf8":case"utf-8":return z(this,h,d);case"ascii":return Pt(this,h,d);case"latin1":case"binary":return Dr(this,h,d);case"base64":return oe(this,h,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,h,d);default:if(b)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),b=!0}}u.prototype._isBuffer=!0;function I(y,h,d){var b=y[h];y[h]=y[d],y[d]=b}u.prototype.swap16=function(){var h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<h;d+=2)I(this,d,d+1);return this},u.prototype.swap32=function(){var h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<h;d+=4)I(this,d,d+3),I(this,d+1,d+2);return this},u.prototype.swap64=function(){var h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<h;d+=8)I(this,d,d+7),I(this,d+1,d+6),I(this,d+2,d+5),I(this,d+3,d+4);return this},u.prototype.toString=function(){var h=this.length|0;return h===0?"":arguments.length===0?z(this,0,h):T.apply(this,arguments)},u.prototype.equals=function(h){if(!u.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:u.compare(this,h)===0},u.prototype.inspect=function(){var h="",d=n.INSPECT_MAX_BYTES;return this.length>0&&(h=this.toString("hex",0,d).match(/.{2}/g).join(" "),this.length>d&&(h+=" ... ")),"<Buffer "+h+">"},u.prototype.compare=function(h,d,b,E,O){if(!u.isBuffer(h))throw new TypeError("Argument must be a Buffer");if(d===void 0&&(d=0),b===void 0&&(b=h?h.length:0),E===void 0&&(E=0),O===void 0&&(O=this.length),d<0||b>h.length||E<0||O>this.length)throw new RangeError("out of range index");if(E>=O&&d>=b)return 0;if(E>=O)return-1;if(d>=b)return 1;if(d>>>=0,b>>>=0,E>>>=0,O>>>=0,this===h)return 0;for(var R=O-E,$=b-d,ne=Math.min(R,$),ie=this.slice(E,O),Ee=h.slice(d,b),ae=0;ae<ne;++ae)if(ie[ae]!==Ee[ae]){R=ie[ae],$=Ee[ae];break}return R<$?-1:$<R?1:0};function N(y,h,d,b,E){if(y.length===0)return-1;if(typeof d=="string"?(b=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,isNaN(d)&&(d=E?0:y.length-1),d<0&&(d=y.length+d),d>=y.length){if(E)return-1;d=y.length-1}else if(d<0)if(E)d=0;else return-1;if(typeof h=="string"&&(h=u.from(h,b)),u.isBuffer(h))return h.length===0?-1:D(y,h,d,b,E);if(typeof h=="number")return h=h&255,u.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?E?Uint8Array.prototype.indexOf.call(y,h,d):Uint8Array.prototype.lastIndexOf.call(y,h,d):D(y,[h],d,b,E);throw new TypeError("val must be string, number or Buffer")}function D(y,h,d,b,E){var O=1,R=y.length,$=h.length;if(b!==void 0&&(b=String(b).toLowerCase(),b==="ucs2"||b==="ucs-2"||b==="utf16le"||b==="utf-16le")){if(y.length<2||h.length<2)return-1;O=2,R/=2,$/=2,d/=2}function ne(mo,bo){return O===1?mo[bo]:mo.readUInt16BE(bo*O)}var ie;if(E){var Ee=-1;for(ie=d;ie<R;ie++)if(ne(y,ie)===ne(h,Ee===-1?0:ie-Ee)){if(Ee===-1&&(Ee=ie),ie-Ee+1===$)return Ee*O}else Ee!==-1&&(ie-=ie-Ee),Ee=-1}else for(d+$>R&&(d=R-$),ie=d;ie>=0;ie--){for(var ae=!0,En=0;En<$;En++)if(ne(y,ie+En)!==ne(h,En)){ae=!1;break}if(ae)return ie}return-1}u.prototype.includes=function(h,d,b){return this.indexOf(h,d,b)!==-1},u.prototype.indexOf=function(h,d,b){return N(this,h,d,b,!0)},u.prototype.lastIndexOf=function(h,d,b){return N(this,h,d,b,!1)};function U(y,h,d,b){d=Number(d)||0;var E=y.length-d;b?(b=Number(b),b>E&&(b=E)):b=E;var O=h.length;if(O%2!==0)throw new TypeError("Invalid hex string");b>O/2&&(b=O/2);for(var R=0;R<b;++R){var $=parseInt(h.substr(R*2,2),16);if(isNaN($))return R;y[d+R]=$}return R}function k(y,h,d,b){return vt(be(h,y.length-d),y,d,b)}function B(y,h,d,b){return vt(Pe(h),y,d,b)}function K(y,h,d,b){return B(y,h,d,b)}function X(y,h,d,b){return vt(rt(h),y,d,b)}function re(y,h,d,b){return vt(nt(h,y.length-d),y,d,b)}u.prototype.write=function(h,d,b,E){if(d===void 0)E="utf8",b=this.length,d=0;else if(b===void 0&&typeof d=="string")E=d,b=this.length,d=0;else if(isFinite(d))d=d|0,isFinite(b)?(b=b|0,E===void 0&&(E="utf8")):(E=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var O=this.length-d;if((b===void 0||b>O)&&(b=O),h.length>0&&(b<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");for(var R=!1;;)switch(E){case"hex":return U(this,h,d,b);case"utf8":case"utf-8":return k(this,h,d,b);case"ascii":return B(this,h,d,b);case"latin1":case"binary":return K(this,h,d,b);case"base64":return X(this,h,d,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,h,d,b);default:if(R)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),R=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function oe(y,h,d){return h===0&&d===y.length?t.fromByteArray(y):t.fromByteArray(y.slice(h,d))}function z(y,h,d){d=Math.min(y.length,d);for(var b=[],E=h;E<d;){var O=y[E],R=null,$=O>239?4:O>223?3:O>191?2:1;if(E+$<=d){var ne,ie,Ee,ae;switch($){case 1:O<128&&(R=O);break;case 2:ne=y[E+1],(ne&192)===128&&(ae=(O&31)<<6|ne&63,ae>127&&(R=ae));break;case 3:ne=y[E+1],ie=y[E+2],(ne&192)===128&&(ie&192)===128&&(ae=(O&15)<<12|(ne&63)<<6|ie&63,ae>2047&&(ae<55296||ae>57343)&&(R=ae));break;case 4:ne=y[E+1],ie=y[E+2],Ee=y[E+3],(ne&192)===128&&(ie&192)===128&&(Ee&192)===128&&(ae=(O&15)<<18|(ne&63)<<12|(ie&63)<<6|Ee&63,ae>65535&&ae<1114112&&(R=ae))}}R===null?(R=65533,$=1):R>65535&&(R-=65536,b.push(R>>>10&1023|55296),R=56320|R&1023),b.push(R),E+=$}return de(b)}var me=4096;function de(y){var h=y.length;if(h<=me)return String.fromCharCode.apply(String,y);for(var d="",b=0;b<h;)d+=String.fromCharCode.apply(String,y.slice(b,b+=me));return d}function Pt(y,h,d){var b="";d=Math.min(y.length,d);for(var E=h;E<d;++E)b+=String.fromCharCode(y[E]&127);return b}function Dr(y,h,d){var b="";d=Math.min(y.length,d);for(var E=h;E<d;++E)b+=String.fromCharCode(y[E]);return b}function kr(y,h,d){var b=y.length;(!h||h<0)&&(h=0),(!d||d<0||d>b)&&(d=b);for(var E="",O=h;O<d;++O)E+=ge(y[O]);return E}function L(y,h,d){for(var b=y.slice(h,d),E="",O=0;O<b.length;O+=2)E+=String.fromCharCode(b[O]+b[O+1]*256);return E}u.prototype.slice=function(h,d){var b=this.length;h=~~h,d=d===void 0?b:~~d,h<0?(h+=b,h<0&&(h=0)):h>b&&(h=b),d<0?(d+=b,d<0&&(d=0)):d>b&&(d=b),d<h&&(d=h);var E;if(u.TYPED_ARRAY_SUPPORT)E=this.subarray(h,d),E.__proto__=u.prototype;else{var O=d-h;E=new u(O,void 0);for(var R=0;R<O;++R)E[R]=this[R+h]}return E};function M(y,h,d){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+h>d)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(h,d,b){h=h|0,d=d|0,b||M(h,d,this.length);for(var E=this[h],O=1,R=0;++R<d&&(O*=256);)E+=this[h+R]*O;return E},u.prototype.readUIntBE=function(h,d,b){h=h|0,d=d|0,b||M(h,d,this.length);for(var E=this[h+--d],O=1;d>0&&(O*=256);)E+=this[h+--d]*O;return E},u.prototype.readUInt8=function(h,d){return d||M(h,1,this.length),this[h]},u.prototype.readUInt16LE=function(h,d){return d||M(h,2,this.length),this[h]|this[h+1]<<8},u.prototype.readUInt16BE=function(h,d){return d||M(h,2,this.length),this[h]<<8|this[h+1]},u.prototype.readUInt32LE=function(h,d){return d||M(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},u.prototype.readUInt32BE=function(h,d){return d||M(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},u.prototype.readIntLE=function(h,d,b){h=h|0,d=d|0,b||M(h,d,this.length);for(var E=this[h],O=1,R=0;++R<d&&(O*=256);)E+=this[h+R]*O;return O*=128,E>=O&&(E-=Math.pow(2,8*d)),E},u.prototype.readIntBE=function(h,d,b){h=h|0,d=d|0,b||M(h,d,this.length);for(var E=d,O=1,R=this[h+--E];E>0&&(O*=256);)R+=this[h+--E]*O;return O*=128,R>=O&&(R-=Math.pow(2,8*d)),R},u.prototype.readInt8=function(h,d){return d||M(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},u.prototype.readInt16LE=function(h,d){d||M(h,2,this.length);var b=this[h]|this[h+1]<<8;return b&32768?b|4294901760:b},u.prototype.readInt16BE=function(h,d){d||M(h,2,this.length);var b=this[h+1]|this[h]<<8;return b&32768?b|4294901760:b},u.prototype.readInt32LE=function(h,d){return d||M(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},u.prototype.readInt32BE=function(h,d){return d||M(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},u.prototype.readFloatLE=function(h,d){return d||M(h,4,this.length),e.read(this,h,!0,23,4)},u.prototype.readFloatBE=function(h,d){return d||M(h,4,this.length),e.read(this,h,!1,23,4)},u.prototype.readDoubleLE=function(h,d){return d||M(h,8,this.length),e.read(this,h,!0,52,8)},u.prototype.readDoubleBE=function(h,d){return d||M(h,8,this.length),e.read(this,h,!1,52,8)};function q(y,h,d,b,E,O){if(!u.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>E||h<O)throw new RangeError('"value" argument is out of bounds');if(d+b>y.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(h,d,b,E){if(h=+h,d=d|0,b=b|0,!E){var O=Math.pow(2,8*b)-1;q(this,h,d,b,O,0)}var R=1,$=0;for(this[d]=h&255;++$<b&&(R*=256);)this[d+$]=h/R&255;return d+b},u.prototype.writeUIntBE=function(h,d,b,E){if(h=+h,d=d|0,b=b|0,!E){var O=Math.pow(2,8*b)-1;q(this,h,d,b,O,0)}var R=b-1,$=1;for(this[d+R]=h&255;--R>=0&&($*=256);)this[d+R]=h/$&255;return d+b},u.prototype.writeUInt8=function(h,d,b){return h=+h,d=d|0,b||q(this,h,d,1,255,0),u.TYPED_ARRAY_SUPPORT||(h=Math.floor(h)),this[d]=h&255,d+1};function Q(y,h,d,b){h<0&&(h=65535+h+1);for(var E=0,O=Math.min(y.length-d,2);E<O;++E)y[d+E]=(h&255<<8*(b?E:1-E))>>>(b?E:1-E)*8}u.prototype.writeUInt16LE=function(h,d,b){return h=+h,d=d|0,b||q(this,h,d,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[d]=h&255,this[d+1]=h>>>8):Q(this,h,d,!0),d+2},u.prototype.writeUInt16BE=function(h,d,b){return h=+h,d=d|0,b||q(this,h,d,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[d]=h>>>8,this[d+1]=h&255):Q(this,h,d,!1),d+2};function te(y,h,d,b){h<0&&(h=4294967295+h+1);for(var E=0,O=Math.min(y.length-d,4);E<O;++E)y[d+E]=h>>>(b?E:3-E)*8&255}u.prototype.writeUInt32LE=function(h,d,b){return h=+h,d=d|0,b||q(this,h,d,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[d+3]=h>>>24,this[d+2]=h>>>16,this[d+1]=h>>>8,this[d]=h&255):te(this,h,d,!0),d+4},u.prototype.writeUInt32BE=function(h,d,b){return h=+h,d=d|0,b||q(this,h,d,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[d]=h>>>24,this[d+1]=h>>>16,this[d+2]=h>>>8,this[d+3]=h&255):te(this,h,d,!1),d+4},u.prototype.writeIntLE=function(h,d,b,E){if(h=+h,d=d|0,!E){var O=Math.pow(2,8*b-1);q(this,h,d,b,O-1,-O)}var R=0,$=1,ne=0;for(this[d]=h&255;++R<b&&($*=256);)h<0&&ne===0&&this[d+R-1]!==0&&(ne=1),this[d+R]=(h/$>>0)-ne&255;return d+b},u.prototype.writeIntBE=function(h,d,b,E){if(h=+h,d=d|0,!E){var O=Math.pow(2,8*b-1);q(this,h,d,b,O-1,-O)}var R=b-1,$=1,ne=0;for(this[d+R]=h&255;--R>=0&&($*=256);)h<0&&ne===0&&this[d+R+1]!==0&&(ne=1),this[d+R]=(h/$>>0)-ne&255;return d+b},u.prototype.writeInt8=function(h,d,b){return h=+h,d=d|0,b||q(this,h,d,1,127,-128),u.TYPED_ARRAY_SUPPORT||(h=Math.floor(h)),h<0&&(h=255+h+1),this[d]=h&255,d+1},u.prototype.writeInt16LE=function(h,d,b){return h=+h,d=d|0,b||q(this,h,d,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[d]=h&255,this[d+1]=h>>>8):Q(this,h,d,!0),d+2},u.prototype.writeInt16BE=function(h,d,b){return h=+h,d=d|0,b||q(this,h,d,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[d]=h>>>8,this[d+1]=h&255):Q(this,h,d,!1),d+2},u.prototype.writeInt32LE=function(h,d,b){return h=+h,d=d|0,b||q(this,h,d,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[d]=h&255,this[d+1]=h>>>8,this[d+2]=h>>>16,this[d+3]=h>>>24):te(this,h,d,!0),d+4},u.prototype.writeInt32BE=function(h,d,b){return h=+h,d=d|0,b||q(this,h,d,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),u.TYPED_ARRAY_SUPPORT?(this[d]=h>>>24,this[d+1]=h>>>16,this[d+2]=h>>>8,this[d+3]=h&255):te(this,h,d,!1),d+4};function pe(y,h,d,b,E,O){if(d+b>y.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function le(y,h,d,b,E){return E||pe(y,h,d,4),e.write(y,h,d,b,23,4),d+4}u.prototype.writeFloatLE=function(h,d,b){return le(this,h,d,!0,b)},u.prototype.writeFloatBE=function(h,d,b){return le(this,h,d,!1,b)};function _e(y,h,d,b,E){return E||pe(y,h,d,8),e.write(y,h,d,b,52,8),d+8}u.prototype.writeDoubleLE=function(h,d,b){return _e(this,h,d,!0,b)},u.prototype.writeDoubleBE=function(h,d,b){return _e(this,h,d,!1,b)},u.prototype.copy=function(h,d,b,E){if(b||(b=0),!E&&E!==0&&(E=this.length),d>=h.length&&(d=h.length),d||(d=0),E>0&&E<b&&(E=b),E===b||h.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("sourceStart out of bounds");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),h.length-d<E-b&&(E=h.length-d+b);var O=E-b,R;if(this===h&&b<d&&d<E)for(R=O-1;R>=0;--R)h[R+d]=this[R+b];else if(O<1e3||!u.TYPED_ARRAY_SUPPORT)for(R=0;R<O;++R)h[R+d]=this[R+b];else Uint8Array.prototype.set.call(h,this.subarray(b,b+O),d);return O},u.prototype.fill=function(h,d,b,E){if(typeof h=="string"){if(typeof d=="string"?(E=d,d=0,b=this.length):typeof b=="string"&&(E=b,b=this.length),h.length===1){var O=h.charCodeAt(0);O<256&&(h=O)}if(E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!u.isEncoding(E))throw new TypeError("Unknown encoding: "+E)}else typeof h=="number"&&(h=h&255);if(d<0||this.length<d||this.length<b)throw new RangeError("Out of range index");if(b<=d)return this;d=d>>>0,b=b===void 0?this.length:b>>>0,h||(h=0);var R;if(typeof h=="number")for(R=d;R<b;++R)this[R]=h;else{var $=u.isBuffer(h)?h:be(new u(h,E).toString()),ne=$.length;for(R=0;R<b-d;++R)this[R+d]=$[R%ne]}return this};var ke=/[^+\/0-9A-Za-z-_]/g;function Le(y){if(y=Ge(y).replace(ke,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function Ge(y){return y.trim?y.trim():y.replace(/^\s+|\s+$/g,"")}function ge(y){return y<16?"0"+y.toString(16):y.toString(16)}function be(y,h){h=h||1/0;for(var d,b=y.length,E=null,O=[],R=0;R<b;++R){if(d=y.charCodeAt(R),d>55295&&d<57344){if(!E){if(d>56319){(h-=3)>-1&&O.push(239,191,189);continue}else if(R+1===b){(h-=3)>-1&&O.push(239,191,189);continue}E=d;continue}if(d<56320){(h-=3)>-1&&O.push(239,191,189),E=d;continue}d=(E-55296<<10|d-56320)+65536}else E&&(h-=3)>-1&&O.push(239,191,189);if(E=null,d<128){if((h-=1)<0)break;O.push(d)}else if(d<2048){if((h-=2)<0)break;O.push(d>>6|192,d&63|128)}else if(d<65536){if((h-=3)<0)break;O.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((h-=4)<0)break;O.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return O}function Pe(y){for(var h=[],d=0;d<y.length;++d)h.push(y.charCodeAt(d)&255);return h}function nt(y,h){for(var d,b,E,O=[],R=0;R<y.length&&!((h-=2)<0);++R)d=y.charCodeAt(R),b=d>>8,E=d%256,O.push(E),O.push(b);return O}function rt(y){return t.toByteArray(Le(y))}function vt(y,h,d,b){for(var E=0;E<b&&!(E+d>=h.length||E>=y.length);++E)h[E+d]=y[E];return E}function au(y){return y!==y}})(Z);var Ve;typeof window<"u"&&window.crypto&&(Ve=window.crypto);!Ve&&typeof window<"u"&&window.msCrypto&&(Ve=window.msCrypto);!Ve&&typeof window<"u"&&window.crypto&&(Ve=window.crypto);if(!Ve&&typeof require=="function")try{Ve=require("crypto")}catch{}function gh(){if(Ve){if(typeof Ve.getRandomValues=="function")try{return Ve.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof Ve.randomBytes=="function")try{return Ve.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}function vh(n){for(var t=n.words,e=n.sigBytes,r=[],o=0;o<e;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((i&15).toString(16))}return r.join("")}var yh=function(){function n(e,r){e=this.words=e||[],r!=null?this.sigBytes=r:this.sigBytes=e.length*4}var t=n.prototype;return t.random=function(r){for(var o=[],i=0;i<r;i+=4)o.push(gh());return new n(o,r)},t.toString=function(){return vh(this)},n}();function P(n,t){n!=null&&this.fromString(n,t)}function xe(){return new P(null)}var Tt,mh=0xdeadbeefcafe,Wo=(mh&16777215)==15715070;function bh(n,t,e,r,o,i){for(;--i>=0;){var s=t*this[n++]+e[r]+o;o=Math.floor(s/67108864),e[r++]=s&67108863}return o}function wh(n,t,e,r,o,i){for(var s=t&32767,u=t>>15;--i>=0;){var c=this[n]&32767,a=this[n++]>>15,f=u*c+a*s;c=s*c+((f&32767)<<15)+e[r]+(o&1073741823),o=(c>>>30)+(f>>>15)+u*a+(o>>>30),e[r++]=c&1073741823}return o}function Sh(n,t,e,r,o,i){for(var s=t&16383,u=t>>14;--i>=0;){var c=this[n]&16383,a=this[n++]>>14,f=u*c+a*s;c=s*c+((f&16383)<<14)+e[r]+o,o=(c>>28)+(f>>14)+u*a,e[r++]=c&268435455}return o}var Yo=typeof navigator<"u";Yo&&Wo&&navigator.appName=="Microsoft Internet Explorer"?(P.prototype.am=wh,Tt=30):Yo&&Wo&&navigator.appName!="Netscape"?(P.prototype.am=bh,Tt=26):(P.prototype.am=Sh,Tt=28);P.prototype.DB=Tt;P.prototype.DM=(1<<Tt)-1;P.prototype.DV=1<<Tt;var ao=52;P.prototype.FV=Math.pow(2,ao);P.prototype.F1=ao-Tt;P.prototype.F2=2*Tt-ao;var _h="0123456789abcdefghijklmnopqrstuvwxyz",_r=new Array,Qt,He;Qt="0".charCodeAt(0);for(He=0;He<=9;++He)_r[Qt++]=He;Qt="a".charCodeAt(0);for(He=10;He<36;++He)_r[Qt++]=He;Qt="A".charCodeAt(0);for(He=10;He<36;++He)_r[Qt++]=He;function Jo(n){return _h.charAt(n)}function Eh(n,t){var e=_r[n.charCodeAt(t)];return e??-1}function Th(n){for(var t=this.t-1;t>=0;--t)n[t]=this[t];n.t=this.t,n.s=this.s}function Ah(n){this.t=1,this.s=n<0?-1:0,n>0?this[0]=n:n<-1?this[0]=n+this.DV:this.t=0}function uo(n){var t=xe();return t.fromInt(n),t}function Ih(n,t){var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;for(var r=n.length,o=!1,i=0;--r>=0;){var s=Eh(n,r);if(s<0){n.charAt(r)=="-"&&(o=!0);continue}o=!1,i==0?this[this.t++]=s:i+e>this.DB?(this[this.t-1]|=(s&(1<<this.DB-i)-1)<<i,this[this.t++]=s>>this.DB-i):this[this.t-1]|=s<<i,i+=e,i>=this.DB&&(i-=this.DB)}this.clamp(),o&&P.ZERO.subTo(this,this)}function Ch(){for(var n=this.s&this.DM;this.t>0&&this[this.t-1]==n;)--this.t}function Oh(n){if(this.s<0)return"-"+this.negate().toString(n);var t;if(n==16)t=4;else if(n==8)t=3;else if(n==2)t=1;else if(n==32)t=5;else if(n==4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");var e=(1<<t)-1,r,o=!1,i="",s=this.t,u=this.DB-s*this.DB%t;if(s-- >0)for(u<this.DB&&(r=this[s]>>u)>0&&(o=!0,i=Jo(r));s>=0;)u<t?(r=(this[s]&(1<<u)-1)<<t-u,r|=this[--s]>>(u+=this.DB-t)):(r=this[s]>>(u-=t)&e,u<=0&&(u+=this.DB,--s)),r>0&&(o=!0),o&&(i+=Jo(r));return o?i:"0"}function xh(){var n=xe();return P.ZERO.subTo(this,n),n}function Nh(){return this.s<0?this.negate():this}function Rh(n){var t=this.s-n.s;if(t!=0)return t;var e=this.t;if(t=e-n.t,t!=0)return this.s<0?-t:t;for(;--e>=0;)if((t=this[e]-n[e])!=0)return t;return 0}function co(n){var t=1,e;return(e=n>>>16)!=0&&(n=e,t+=16),(e=n>>8)!=0&&(n=e,t+=8),(e=n>>4)!=0&&(n=e,t+=4),(e=n>>2)!=0&&(n=e,t+=2),(e=n>>1)!=0&&(n=e,t+=1),t}function Dh(){return this.t<=0?0:this.DB*(this.t-1)+co(this[this.t-1]^this.s&this.DM)}function kh(n,t){var e;for(e=this.t-1;e>=0;--e)t[e+n]=this[e];for(e=n-1;e>=0;--e)t[e]=0;t.t=this.t+n,t.s=this.s}function Ph(n,t){for(var e=n;e<this.t;++e)t[e-n]=this[e];t.t=Math.max(this.t-n,0),t.s=this.s}function Uh(n,t){var e=n%this.DB,r=this.DB-e,o=(1<<r)-1,i=Math.floor(n/this.DB),s=this.s<<e&this.DM,u;for(u=this.t-1;u>=0;--u)t[u+i+1]=this[u]>>r|s,s=(this[u]&o)<<e;for(u=i-1;u>=0;--u)t[u]=0;t[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()}function Fh(n,t){t.s=this.s;var e=Math.floor(n/this.DB);if(e>=this.t){t.t=0;return}var r=n%this.DB,o=this.DB-r,i=(1<<r)-1;t[0]=this[e]>>r;for(var s=e+1;s<this.t;++s)t[s-e-1]|=(this[s]&i)<<o,t[s-e]=this[s]>>r;r>0&&(t[this.t-e-1]|=(this.s&i)<<o),t.t=this.t-e,t.clamp()}function Mh(n,t){for(var e=0,r=0,o=Math.min(n.t,this.t);e<o;)r+=this[e]-n[e],t[e++]=r&this.DM,r>>=this.DB;if(n.t<this.t){for(r-=n.s;e<this.t;)r+=this[e],t[e++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;e<n.t;)r-=n[e],t[e++]=r&this.DM,r>>=this.DB;r-=n.s}t.s=r<0?-1:0,r<-1?t[e++]=this.DV+r:r>0&&(t[e++]=r),t.t=e,t.clamp()}function Lh(n,t){var e=this.abs(),r=n.abs(),o=e.t;for(t.t=o+r.t;--o>=0;)t[o]=0;for(o=0;o<r.t;++o)t[o+e.t]=e.am(0,r[o],t,o,0,e.t);t.s=0,t.clamp(),this.s!=n.s&&P.ZERO.subTo(t,t)}function Bh(n){for(var t=this.abs(),e=n.t=2*t.t;--e>=0;)n[e]=0;for(e=0;e<t.t-1;++e){var r=t.am(e,t[e],n,2*e,0,1);(n[e+t.t]+=t.am(e+1,2*t[e],n,2*e+1,r,t.t-e-1))>=t.DV&&(n[e+t.t]-=t.DV,n[e+t.t+1]=1)}n.t>0&&(n[n.t-1]+=t.am(e,t[e],n,2*e,0,1)),n.s=0,n.clamp()}function jh(n,t,e){var r=n.abs();if(!(r.t<=0)){var o=this.abs();if(o.t<r.t){t!=null&&t.fromInt(0),e!=null&&this.copyTo(e);return}e==null&&(e=xe());var i=xe(),s=this.s,u=n.s,c=this.DB-co(r[r.t-1]);c>0?(r.lShiftTo(c,i),o.lShiftTo(c,e)):(r.copyTo(i),o.copyTo(e));var a=i.t,f=i[a-1];if(f!=0){var l=f*(1<<this.F1)+(a>1?i[a-2]>>this.F2:0),p=this.FV/l,g=(1<<this.F1)/l,v=1<<this.F2,m=e.t,w=m-a,_=t??xe();for(i.dlShiftTo(w,_),e.compareTo(_)>=0&&(e[e.t++]=1,e.subTo(_,e)),P.ONE.dlShiftTo(a,_),_.subTo(i,i);i.t<a;)i[i.t++]=0;for(;--w>=0;){var S=e[--m]==f?this.DM:Math.floor(e[m]*p+(e[m-1]+v)*g);if((e[m]+=i.am(0,S,e,w,0,a))<S)for(i.dlShiftTo(w,_),e.subTo(_,e);e[m]<--S;)e.subTo(_,e)}t!=null&&(e.drShiftTo(a,t),s!=u&&P.ZERO.subTo(t,t)),e.t=a,e.clamp(),c>0&&e.rShiftTo(c,e),s<0&&P.ZERO.subTo(e,e)}}}function Kh(n){var t=xe();return this.abs().divRemTo(n,null,t),this.s<0&&t.compareTo(P.ZERO)>0&&n.subTo(t,t),t}function qh(){if(this.t<1)return 0;var n=this[0];if(!(n&1))return 0;var t=n&3;return t=t*(2-(n&15)*t)&15,t=t*(2-(n&255)*t)&255,t=t*(2-((n&65535)*t&65535))&65535,t=t*(2-n*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Vh(n){return this.compareTo(n)==0}function Hh(n,t){for(var e=0,r=0,o=Math.min(n.t,this.t);e<o;)r+=this[e]+n[e],t[e++]=r&this.DM,r>>=this.DB;if(n.t<this.t){for(r+=n.s;e<this.t;)r+=this[e],t[e++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;e<n.t;)r+=n[e],t[e++]=r&this.DM,r>>=this.DB;r+=n.s}t.s=r<0?-1:0,r>0?t[e++]=r:r<-1&&(t[e++]=this.DV+r),t.t=e,t.clamp()}function Gh(n){var t=xe();return this.addTo(n,t),t}function $h(n){var t=xe();return this.subTo(n,t),t}function zh(n){var t=xe();return this.multiplyTo(n,t),t}function Wh(n){var t=xe();return this.divRemTo(n,t,null),t}function Zt(n){this.m=n,this.mp=n.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<n.DB-15)-1,this.mt2=2*n.t}function Yh(n){var t=xe();return n.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),n.s<0&&t.compareTo(P.ZERO)>0&&this.m.subTo(t,t),t}function Jh(n){var t=xe();return n.copyTo(t),this.reduce(t),t}function Xh(n){for(;n.t<=this.mt2;)n[n.t++]=0;for(var t=0;t<this.m.t;++t){var e=n[t]&32767,r=e*this.mpl+((e*this.mph+(n[t]>>15)*this.mpl&this.um)<<15)&n.DM;for(e=t+this.m.t,n[e]+=this.m.am(0,r,n,t,0,this.m.t);n[e]>=n.DV;)n[e]-=n.DV,n[++e]++}n.clamp(),n.drShiftTo(this.m.t,n),n.compareTo(this.m)>=0&&n.subTo(this.m,n)}function Qh(n,t){n.squareTo(t),this.reduce(t)}function Zh(n,t,e){n.multiplyTo(t,e),this.reduce(e)}Zt.prototype.convert=Yh;Zt.prototype.revert=Jh;Zt.prototype.reduce=Xh;Zt.prototype.mulTo=Zh;Zt.prototype.sqrTo=Qh;function ed(n,t,e){var r=n.bitLength(),o,i=uo(1),s=new Zt(t);if(r<=0)return i;r<18?o=1:r<48?o=3:r<144?o=4:r<768?o=5:o=6;var u=new Array,c=3,a=o-1,f=(1<<o)-1;if(u[1]=s.convert(this),o>1){var l=xe();for(s.sqrTo(u[1],l);c<=f;)u[c]=xe(),s.mulTo(l,u[c-2],u[c]),c+=2}var p=n.t-1,g,v=!0,m=xe(),w;for(r=co(n[p])-1;p>=0;){for(r>=a?g=n[p]>>r-a&f:(g=(n[p]&(1<<r+1)-1)<<a-r,p>0&&(g|=n[p-1]>>this.DB+r-a)),c=o;!(g&1);)g>>=1,--c;if((r-=c)<0&&(r+=this.DB,--p),v)u[g].copyTo(i),v=!1;else{for(;c>1;)s.sqrTo(i,m),s.sqrTo(m,i),c-=2;c>0?s.sqrTo(i,m):(w=i,i=m,m=w),s.mulTo(m,u[g],i)}for(;p>=0&&!(n[p]&1<<r);)s.sqrTo(i,m),w=i,i=m,m=w,--r<0&&(r=this.DB-1,--p)}var _=s.revert(i);return e(null,_),_}P.prototype.copyTo=Th;P.prototype.fromInt=Ah;P.prototype.fromString=Ih;P.prototype.clamp=Ch;P.prototype.dlShiftTo=kh;P.prototype.drShiftTo=Ph;P.prototype.lShiftTo=Uh;P.prototype.rShiftTo=Fh;P.prototype.subTo=Mh;P.prototype.multiplyTo=Lh;P.prototype.squareTo=Bh;P.prototype.divRemTo=jh;P.prototype.invDigit=qh;P.prototype.addTo=Hh;P.prototype.toString=Oh;P.prototype.negate=xh;P.prototype.abs=Nh;P.prototype.compareTo=Rh;P.prototype.bitLength=Dh;P.prototype.mod=Kh;P.prototype.equals=Vh;P.prototype.add=Gh;P.prototype.subtract=$h;P.prototype.multiply=zh;P.prototype.divide=Wh;P.prototype.modPow=ed;P.ZERO=uo(0);P.ONE=uo(1);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */function Wr(n){return Z.Buffer.from(new yh().random(n).toString(),"hex")}var td=/^[89a-f]/i,nd="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",rd="userAttributes.",Lt=function(){function n(e){this.N=new P(nd,16),this.g=new P("2",16),this.k=new P(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=Z.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}var t=n.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(r){var o=this;this.largeAValue?r(null,this.largeAValue):this.calculateA(this.smallAValue,function(i,s){i&&r(i,null),o.largeAValue=s,r(null,o.largeAValue)})},t.generateRandomSmallA=function(){var r=Wr(128).toString("hex"),o=new P(r,16);return o},t.generateRandomString=function(){return Wr(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(r,o,i){var s=this;this.randomPassword=this.generateRandomString();var u=""+r+o+":"+this.randomPassword,c=this.hash(u),a=Wr(16).toString("hex");this.SaltToHashDevices=this.padHex(new P(a,16)),this.g.modPow(new P(this.hexHash(this.SaltToHashDevices+c),16),this.N,function(f,l){f&&i(f,null),s.verifierDevices=s.padHex(l),i(null,null)})},t.calculateA=function(r,o){var i=this;this.g.modPow(r,this.N,function(s,u){s&&o(s,null),u.mod(i.N).equals(P.ZERO)&&o(new Error("Illegal paramater. A mod N cannot be 0."),null),o(null,u)})},t.calculateU=function(r,o){this.UHexHash=this.hexHash(this.padHex(r)+this.padHex(o));var i=new P(this.UHexHash,16);return i},t.hash=function(r){var o=new Et.Sha256;o.update(r);var i=o.digestSync(),s=Z.Buffer.from(i).toString("hex");return new Array(64-s.length).join("0")+s},t.hexHash=function(r){return this.hash(Z.Buffer.from(r,"hex"))},t.computehkdf=function(r,o){var i=Z.Buffer.concat([this.infoBits,Z.Buffer.from(String.fromCharCode(1),"utf8")]),s=new Et.Sha256(o);s.update(r);var u=s.digestSync(),c=new Et.Sha256(u);c.update(i);var a=c.digestSync(),f=a,l=f.slice(0,16);return l},t.getPasswordAuthenticationKey=function(r,o,i,s,u){var c=this;if(i.mod(this.N).equals(P.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,i),this.UValue.equals(P.ZERO))throw new Error("U cannot be zero.");var a=""+this.poolName+r+":"+o,f=this.hash(a),l=new P(this.hexHash(this.padHex(s)+f),16);this.calculateS(l,i,function(p,g){p&&u(p,null);var v=c.computehkdf(Z.Buffer.from(c.padHex(g),"hex"),Z.Buffer.from(c.padHex(c.UValue),"hex"));u(null,v)})},t.calculateS=function(r,o,i){var s=this;this.g.modPow(r,this.N,function(u,c){u&&i(u,null);var a=o.subtract(s.k.multiply(c));a.modPow(s.smallAValue.add(s.UValue.multiply(r)),s.N,function(f,l){f&&i(f,null),i(null,l.mod(s.N))})})},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return rd},t.padHex=function(r){if(!(r instanceof P))throw new Error("Not a BigInteger");var o=r.compareTo(P.ZERO)<0,i=r.abs().toString(16);if(i=i.length%2!==0?"0"+i:i,i=td.test(i)?"00"+i:i,o){var s=i.split("").map(function(c){var a=~parseInt(c,16)&15;return"0123456789ABCDEF".charAt(a)}).join(""),u=new P(s,16).add(P.ONE);i=u.toString(16),i.toUpperCase().startsWith("FF8")&&(i=i.substring(2))}return i},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var ga=function(){function n(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=n.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var r=this.jwtToken.split(".")[1];try{return JSON.parse(Z.Buffer.from(r,"base64").toString("utf8"))}catch{return{}}},n}();function id(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,Si(n,t)}function Si(n,t){return Si=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},Si(n,t)}var _i=function(n){function t(e){var r=e===void 0?{}:e,o=r.AccessToken;return n.call(this,o||"")||this}return id(t,n),t}(ga);function od(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,Ei(n,t)}function Ei(n,t){return Ei=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},Ei(n,t)}var Ti=function(n){function t(e){var r=e===void 0?{}:e,o=r.IdToken;return n.call(this,o||"")||this}return od(t,n),t}(ga);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Ai=function(){function n(e){var r=e===void 0?{}:e,o=r.RefreshToken;this.token=o||""}var t=n.prototype;return t.getToken=function(){return this.token},n}(),sd="5.0.4";/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var ad="aws-amplify/"+sd,va={userAgent:ad,isReactNative:typeof navigator<"u"&&navigator.product==="ReactNative"},ud=function(){return va.userAgent};/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Ii=function(){function n(e){var r=e===void 0?{}:e,o=r.IdToken,i=r.RefreshToken,s=r.AccessToken,u=r.ClockDrift;if(s==null||o==null)throw new Error("Id token and Access Token must be present.");this.idToken=o,this.refreshToken=i,this.accessToken=s,this.clockDrift=u===void 0?this.calculateClockDrift():u}var t=n.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){var r=Math.floor(new Date/1e3),o=Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt());return r-o},t.isValid=function(){var r=Math.floor(new Date/1e3),o=r-this.clockDrift;return o<this.accessToken.getExpiration()&&o<this.idToken.getExpiration()},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var cd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fd=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Xo=function(){function n(){}var t=n.prototype;return t.getNowString=function(){var r=new Date,o=fd[r.getUTCDay()],i=cd[r.getUTCMonth()],s=r.getUTCDate(),u=r.getUTCHours();u<10&&(u="0"+u);var c=r.getUTCMinutes();c<10&&(c="0"+c);var a=r.getUTCSeconds();a<10&&(a="0"+a);var f=r.getUTCFullYear(),l=o+" "+i+" "+s+" "+u+":"+c+":"+a+" UTC "+f;return l},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Kt=function(){function n(e){var r=e===void 0?{}:e,o=r.Name,i=r.Value;this.Name=o||"",this.Value=i||""}var t=n.prototype;return t.getValue=function(){return this.Value},t.setValue=function(r){return this.Value=r,this},t.getName=function(){return this.Name},t.setName=function(r){return this.Name=r,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var It={},ld=function(){function n(){}return n.setItem=function(e,r){return It[e]=r,It[e]},n.getItem=function(e){return Object.prototype.hasOwnProperty.call(It,e)?It[e]:void 0},n.removeItem=function(e){return delete It[e]},n.clear=function(){return It={},It},n}(),ya=function(){function n(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch{this.storageWindow=ld}}var t=n.prototype;return t.getStorage=function(){return this.storageWindow},n}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var hd=typeof navigator<"u",Qo=hd?va.isReactNative?"react-native":navigator.userAgent:"nodejs",Ci=function(){function n(e){if(e==null||e.Username==null||e.Pool==null)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||new ya().getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=n.prototype;return t.setSignInUserSession=function(r){this.clearCachedUserData(),this.signInUserSession=r,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(r){this.authenticationFlowType=r},t.initiateAuth=function(r,o){var i=this,s=r.getAuthParameters();s.USERNAME=this.username;var u=Object.keys(r.getValidationData()).length!==0?r.getValidationData():r.getClientMetadata(),c={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:s,ClientMetadata:u};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",c,function(a,f){if(a)return o.onFailure(a);var l=f.ChallengeName,p=f.ChallengeParameters;return l==="CUSTOM_CHALLENGE"?(i.Session=f.Session,o.customChallenge(p)):(i.signInUserSession=i.getCognitoUserSession(f.AuthenticationResult),i.cacheTokens(),o.onSuccess(i.signInUserSession))})},t.authenticateUser=function(r,o){return this.authenticationFlowType==="USER_PASSWORD_AUTH"?this.authenticateUserPlainUsernamePassword(r,o):this.authenticationFlowType==="USER_SRP_AUTH"||this.authenticationFlowType==="CUSTOM_AUTH"?this.authenticateUserDefaultAuth(r,o):o.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(r,o){var i=this,s=new Lt(this.pool.getUserPoolName()),u=new Xo,c,a,f={};this.deviceKey!=null&&(f.DEVICE_KEY=this.deviceKey),f.USERNAME=this.username,s.getLargeAValue(function(l,p){l&&o.onFailure(l),f.SRP_A=p.toString(16),i.authenticationFlowType==="CUSTOM_AUTH"&&(f.CHALLENGE_NAME="SRP_A");var g=Object.keys(r.getValidationData()).length!==0?r.getValidationData():r.getClientMetadata(),v={AuthFlow:i.authenticationFlowType,ClientId:i.pool.getClientId(),AuthParameters:f,ClientMetadata:g};i.getUserContextData(i.username)&&(v.UserContextData=i.getUserContextData(i.username)),i.client.request("InitiateAuth",v,function(m,w){if(m)return o.onFailure(m);var _=w.ChallengeParameters;i.username=_.USER_ID_FOR_SRP,i.userDataKey=i.keyPrefix+"."+i.username+".userData",c=new P(_.SRP_B,16),a=new P(_.SALT,16),i.getCachedDeviceKeyAndPassword(),s.getPasswordAuthenticationKey(i.username,r.getPassword(),c,a,function(S,T){S&&o.onFailure(S);var I=u.getNowString(),N=Z.Buffer.concat([Z.Buffer.from(i.pool.getUserPoolName(),"utf8"),Z.Buffer.from(i.username,"utf8"),Z.Buffer.from(_.SECRET_BLOCK,"base64"),Z.Buffer.from(I,"utf8")]),D=new Et.Sha256(T);D.update(N);var U=D.digestSync(),k=Z.Buffer.from(U).toString("base64"),B={};B.USERNAME=i.username,B.PASSWORD_CLAIM_SECRET_BLOCK=_.SECRET_BLOCK,B.TIMESTAMP=I,B.PASSWORD_CLAIM_SIGNATURE=k,i.deviceKey!=null&&(B.DEVICE_KEY=i.deviceKey);var K=function(oe,z){return i.client.request("RespondToAuthChallenge",oe,function(me,de){return me&&me.code==="ResourceNotFoundException"&&me.message.toLowerCase().indexOf("device")!==-1?(B.DEVICE_KEY=null,i.deviceKey=null,i.randomPassword=null,i.deviceGroupKey=null,i.clearCachedDeviceKeyAndPassword(),K(oe,z)):z(me,de)})},X={ChallengeName:"PASSWORD_VERIFIER",ClientId:i.pool.getClientId(),ChallengeResponses:B,Session:w.Session,ClientMetadata:g};i.getUserContextData()&&(X.UserContextData=i.getUserContextData()),K(X,function(re,oe){return re?o.onFailure(re):i.authenticateUserInternal(oe,s,o)})})})})},t.authenticateUserPlainUsernamePassword=function(r,o){var i=this,s={};if(s.USERNAME=this.username,s.PASSWORD=r.getPassword(),!s.PASSWORD){o.onFailure(new Error("PASSWORD parameter is required"));return}var u=new Lt(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(s.DEVICE_KEY=this.deviceKey);var c=Object.keys(r.getValidationData()).length!==0?r.getValidationData():r.getClientMetadata(),a={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:s,ClientMetadata:c};this.getUserContextData(this.username)&&(a.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",a,function(f,l){return f?o.onFailure(f):i.authenticateUserInternal(l,u,o)})},t.authenticateUserInternal=function(r,o,i){var s=this,u=r.ChallengeName,c=r.ChallengeParameters;if(u==="SMS_MFA")return this.Session=r.Session,i.mfaRequired(u,c);if(u==="SELECT_MFA_TYPE")return this.Session=r.Session,i.selectMFAType(u,c);if(u==="MFA_SETUP")return this.Session=r.Session,i.mfaSetup(u,c);if(u==="SOFTWARE_TOKEN_MFA")return this.Session=r.Session,i.totpRequired(u,c);if(u==="CUSTOM_CHALLENGE")return this.Session=r.Session,i.customChallenge(c);if(u==="NEW_PASSWORD_REQUIRED"){this.Session=r.Session;var a=null,f=null,l=[],p=o.getNewPasswordRequiredChallengeUserAttributePrefix();if(c&&(a=JSON.parse(r.ChallengeParameters.userAttributes),f=JSON.parse(r.ChallengeParameters.requiredAttributes)),f)for(var g=0;g<f.length;g++)l[g]=f[g].substr(p.length);return i.newPasswordRequired(a,l)}if(u==="DEVICE_SRP_AUTH"){this.Session=r.Session,this.getDeviceResponse(i);return}this.signInUserSession=this.getCognitoUserSession(r.AuthenticationResult),this.challengeName=u,this.cacheTokens();var v=r.AuthenticationResult.NewDeviceMetadata;if(v==null)return i.onSuccess(this.signInUserSession);o.generateHashDevice(r.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,r.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(m){if(m)return i.onFailure(m);var w={Salt:Z.Buffer.from(o.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:Z.Buffer.from(o.getVerifierDevices(),"hex").toString("base64")};s.verifierDevices=w.PasswordVerifier,s.deviceGroupKey=v.DeviceGroupKey,s.randomPassword=o.getRandomPassword(),s.client.request("ConfirmDevice",{DeviceKey:v.DeviceKey,AccessToken:s.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:w,DeviceName:Qo},function(_,S){return _?i.onFailure(_):(s.deviceKey=r.AuthenticationResult.NewDeviceMetadata.DeviceKey,s.cacheDeviceKeyAndPassword(),S.UserConfirmationNecessary===!0?i.onSuccess(s.signInUserSession,S.UserConfirmationNecessary):i.onSuccess(s.signInUserSession))})})},t.completeNewPasswordChallenge=function(r,o,i,s){var u=this;if(!r)return i.onFailure(new Error("New password is required."));var c=new Lt(this.pool.getUserPoolName()),a=c.getNewPasswordRequiredChallengeUserAttributePrefix(),f={};o&&Object.keys(o).forEach(function(p){f[a+p]=o[p]}),f.NEW_PASSWORD=r,f.USERNAME=this.username;var l={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:f,Session:this.Session,ClientMetadata:s};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",l,function(p,g){return p?i.onFailure(p):u.authenticateUserInternal(g,c,i)})},t.getDeviceResponse=function(r,o){var i=this,s=new Lt(this.deviceGroupKey),u=new Xo,c={};c.USERNAME=this.username,c.DEVICE_KEY=this.deviceKey,s.getLargeAValue(function(a,f){a&&r.onFailure(a),c.SRP_A=f.toString(16);var l={ChallengeName:"DEVICE_SRP_AUTH",ClientId:i.pool.getClientId(),ChallengeResponses:c,ClientMetadata:o,Session:i.Session};i.getUserContextData()&&(l.UserContextData=i.getUserContextData()),i.client.request("RespondToAuthChallenge",l,function(p,g){if(p)return r.onFailure(p);var v=g.ChallengeParameters,m=new P(v.SRP_B,16),w=new P(v.SALT,16);s.getPasswordAuthenticationKey(i.deviceKey,i.randomPassword,m,w,function(_,S){if(_)return r.onFailure(_);var T=u.getNowString(),I=Z.Buffer.concat([Z.Buffer.from(i.deviceGroupKey,"utf8"),Z.Buffer.from(i.deviceKey,"utf8"),Z.Buffer.from(v.SECRET_BLOCK,"base64"),Z.Buffer.from(T,"utf8")]),N=new Et.Sha256(S);N.update(I);var D=N.digestSync(),U=Z.Buffer.from(D).toString("base64"),k={};k.USERNAME=i.username,k.PASSWORD_CLAIM_SECRET_BLOCK=v.SECRET_BLOCK,k.TIMESTAMP=T,k.PASSWORD_CLAIM_SIGNATURE=U,k.DEVICE_KEY=i.deviceKey;var B={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:i.pool.getClientId(),ChallengeResponses:k,Session:g.Session};i.getUserContextData()&&(B.UserContextData=i.getUserContextData()),i.client.request("RespondToAuthChallenge",B,function(K,X){return K?r.onFailure(K):(i.signInUserSession=i.getCognitoUserSession(X.AuthenticationResult),i.cacheTokens(),r.onSuccess(i.signInUserSession))})})})})},t.confirmRegistration=function(r,o,i,s){var u={ClientId:this.pool.getClientId(),ConfirmationCode:r,Username:this.username,ForceAliasCreation:o,ClientMetadata:s};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",u,function(c){return c?i(c,null):i(null,"SUCCESS")})},t.sendCustomChallengeAnswer=function(r,o,i){var s=this,u={};u.USERNAME=this.username,u.ANSWER=r;var c=new Lt(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(u.DEVICE_KEY=this.deviceKey);var a={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:u,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:i};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,function(f,l){return f?o.onFailure(f):s.authenticateUserInternal(l,c,o)})},t.sendMFACode=function(r,o,i,s){var u=this,c={};c.USERNAME=this.username,c.SMS_MFA_CODE=r;var a=i||"SMS_MFA";a==="SOFTWARE_TOKEN_MFA"&&(c.SOFTWARE_TOKEN_MFA_CODE=r),this.deviceKey!=null&&(c.DEVICE_KEY=this.deviceKey);var f={ChallengeName:a,ChallengeResponses:c,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:s};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",f,function(l,p){if(l)return o.onFailure(l);var g=p.ChallengeName;if(g==="DEVICE_SRP_AUTH"){u.getDeviceResponse(o);return}if(u.signInUserSession=u.getCognitoUserSession(p.AuthenticationResult),u.cacheTokens(),p.AuthenticationResult.NewDeviceMetadata==null)return o.onSuccess(u.signInUserSession);var v=new Lt(u.pool.getUserPoolName());v.generateHashDevice(p.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,p.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(m){if(m)return o.onFailure(m);var w={Salt:Z.Buffer.from(v.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:Z.Buffer.from(v.getVerifierDevices(),"hex").toString("base64")};u.verifierDevices=w.PasswordVerifier,u.deviceGroupKey=p.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,u.randomPassword=v.getRandomPassword(),u.client.request("ConfirmDevice",{DeviceKey:p.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:u.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:w,DeviceName:Qo},function(_,S){return _?o.onFailure(_):(u.deviceKey=p.AuthenticationResult.NewDeviceMetadata.DeviceKey,u.cacheDeviceKeyAndPassword(),S.UserConfirmationNecessary===!0?o.onSuccess(u.signInUserSession,S.UserConfirmationNecessary):o.onSuccess(u.signInUserSession))})})})},t.changePassword=function(r,o,i,s){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return i(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:r,ProposedPassword:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:s},function(u){return u?i(u,null):i(null,"SUCCESS")})},t.enableMFA=function(r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);var o=[],i={DeliveryMedium:"SMS",AttributeName:"phone_number"};o.push(i),this.client.request("SetUserSettings",{MFAOptions:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?r(s,null):r(null,"SUCCESS")})},t.setUserMfaPreference=function(r,o,i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:r,SoftwareTokenMfaSettings:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?i(s,null):i(null,"SUCCESS")})},t.disableMFA=function(r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);var o=[];this.client.request("SetUserSettings",{MFAOptions:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i){return i?r(i,null):r(null,"SUCCESS")})},t.deleteUser=function(r,o){var i=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:o},function(s){return s?r(s,null):(i.clearCachedUser(),r(null,"SUCCESS"))})},t.updateAttributes=function(r,o,i){var s=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return o(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:r,ClientMetadata:i},function(u,c){return u?o(u,null):s.getUserData(function(){return o(null,"SUCCESS",c)},{bypassCache:!0})})},t.getUserAttributes=function(r){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return r(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o,i){if(o)return r(o,null);for(var s=[],u=0;u<i.UserAttributes.length;u++){var c={Name:i.UserAttributes[u].Name,Value:i.UserAttributes[u].Value},a=new Kt(c);s.push(a)}return r(null,s)})},t.getMFAOptions=function(r){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return r(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(o,i){return o?r(o,null):r(null,i.MFAOptions)})},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(r){var o=this;return r===void 0&&(r={}),new Promise(function(i){var s=o.signInUserSession.getRefreshToken();s&&s.getToken()?o.refreshSession(s,i,r.clientMetadata):i()})},t.getUserData=function(r,o){var i=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return this.clearCachedUserData(),r(new Error("User is not authenticated"),null);var s=this.getUserDataFromCache();if(!s){this.fetchUserData().then(function(u){r(null,u)}).catch(r);return}if(this.isFetchUserDataAndTokenRequired(o)){this.fetchUserData().then(function(u){return i.refreshSessionIfPossible(o).then(function(){return u})}).then(function(u){return r(null,u)}).catch(r);return}try{r(null,JSON.parse(s));return}catch(u){this.clearCachedUserData(),r(u,null);return}},t.getUserDataFromCache=function(){var r=this.storage.getItem(this.userDataKey);return r},t.isFetchUserDataAndTokenRequired=function(r){var o=r||{},i=o.bypassCache,s=i===void 0?!1:i;return s},t.fetchUserData=function(){var r=this;return this.createGetUserRequest().then(function(o){return r.cacheUserData(o),o})},t.deleteAttributes=function(r,o){var i=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return o(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?o(s,null):i.getUserData(function(){return o(null,"SUCCESS")},{bypassCache:!0})})},t.resendConfirmationCode=function(r,o){var i={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:o};this.client.request("ResendConfirmationCode",i,function(s,u){return s?r(s,null):r(null,u)})},t.getSession=function(r,o){if(o===void 0&&(o={}),this.username==null)return r(new Error("Username is null. Cannot retrieve a new session"),null);if(this.signInUserSession!=null&&this.signInUserSession.isValid())return r(null,this.signInUserSession);var i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,s=i+".idToken",u=i+".accessToken",c=i+".refreshToken",a=i+".clockDrift";if(this.storage.getItem(s)){var f=new Ti({IdToken:this.storage.getItem(s)}),l=new _i({AccessToken:this.storage.getItem(u)}),p=new Ai({RefreshToken:this.storage.getItem(c)}),g=parseInt(this.storage.getItem(a),0)||0,v={IdToken:f,AccessToken:l,RefreshToken:p,ClockDrift:g},m=new Ii(v);if(m.isValid())return this.signInUserSession=m,r(null,this.signInUserSession);if(!p.getToken())return r(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(p,r,o.clientMetadata)}else r(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(r,o,i){var s=this,u=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(o):o,c={};c.REFRESH_TOKEN=r.getToken();var a="CognitoIdentityServiceProvider."+this.pool.getClientId(),f=a+".LastAuthUser";if(this.storage.getItem(f)){this.username=this.storage.getItem(f);var l=a+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(l),c.DEVICE_KEY=this.deviceKey}var p={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:c,ClientMetadata:i};this.getUserContextData()&&(p.UserContextData=this.getUserContextData()),this.client.requestWithRetry("InitiateAuth",p,function(g,v){if(g)return g.code==="NotAuthorizedException"&&s.clearCachedUser(),u(g,null);if(v){var m=v.AuthenticationResult;return Object.prototype.hasOwnProperty.call(m,"RefreshToken")||(m.RefreshToken=r.getToken()),s.signInUserSession=s.getCognitoUserSession(m),s.cacheTokens(),u(null,s.signInUserSession)}})},t.cacheTokens=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId(),o=r+"."+this.username+".idToken",i=r+"."+this.username+".accessToken",s=r+"."+this.username+".refreshToken",u=r+"."+this.username+".clockDrift",c=r+".LastAuthUser";this.storage.setItem(o,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(i,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(s,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(u,""+this.signInUserSession.getClockDrift()),this.storage.setItem(c,this.username)},t.cacheUserData=function(r){this.storage.setItem(this.userDataKey,JSON.stringify(r))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,o=r+".deviceKey",i=r+".randomPasswordKey",s=r+".deviceGroupKey";this.storage.setItem(o,this.deviceKey),this.storage.setItem(i,this.randomPassword),this.storage.setItem(s,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,o=r+".deviceKey",i=r+".randomPasswordKey",s=r+".deviceGroupKey";this.storage.getItem(o)&&(this.deviceKey=this.storage.getItem(o),this.randomPassword=this.storage.getItem(i),this.deviceGroupKey=this.storage.getItem(s))},t.clearCachedDeviceKeyAndPassword=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,o=r+".deviceKey",i=r+".randomPasswordKey",s=r+".deviceGroupKey";this.storage.removeItem(o),this.storage.removeItem(i),this.storage.removeItem(s)},t.clearCachedTokens=function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId(),o=r+"."+this.username+".idToken",i=r+"."+this.username+".accessToken",s=r+"."+this.username+".refreshToken",u=r+".LastAuthUser",c=r+"."+this.username+".clockDrift";this.storage.removeItem(o),this.storage.removeItem(i),this.storage.removeItem(s),this.storage.removeItem(u),this.storage.removeItem(c)},t.getCognitoUserSession=function(r){var o=new Ti(r),i=new _i(r),s=new Ai(r),u={IdToken:o,AccessToken:i,RefreshToken:s};return new Ii(u)},t.forgotPassword=function(r,o){var i={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:o};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",i,function(s,u){return s?r.onFailure(s):typeof r.inputVerificationCode=="function"?r.inputVerificationCode(u):r.onSuccess(u)})},t.confirmPassword=function(r,o,i,s){var u={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:r,Password:o,ClientMetadata:s};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",u,function(c){return c?i.onFailure(c):i.onSuccess("SUCCESS")})},t.getAttributeVerificationCode=function(r,o,i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return o.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:i},function(s,u){return s?o.onFailure(s):typeof o.inputVerificationCode=="function"?o.inputVerificationCode(u):o.onSuccess("SUCCESS")})},t.verifyAttribute=function(r,o,i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:r,Code:o,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?i.onFailure(s):i.onSuccess("SUCCESS")})},t.getDevice=function(r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(o,i){return o?r.onFailure(o):r.onSuccess(i)})},t.forgetSpecificDevice=function(r,o){if(this.signInUserSession==null||!this.signInUserSession.isValid())return o.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:r},function(i){return i?o.onFailure(i):o.onSuccess("SUCCESS")})},t.forgetDevice=function(r){var o=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:r.onFailure,onSuccess:function(s){return o.deviceKey=null,o.deviceGroupKey=null,o.randomPassword=null,o.clearCachedDeviceKeyAndPassword(),r.onSuccess(s)}})},t.setDeviceStatusRemembered=function(r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(o){return o?r.onFailure(o):r.onSuccess("SUCCESS")})},t.setDeviceStatusNotRemembered=function(r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(o){return o?r.onFailure(o):r.onSuccess("SUCCESS")})},t.listDevices=function(r,o,i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));var s={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:r};o&&(s.PaginationToken=o),this.client.request("ListDevices",s,function(u,c){return u?i.onFailure(u):i.onSuccess(c)})},t.globalSignOut=function(r){var o=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i){return i?r.onFailure(i):(o.clearCachedUser(),r.onSuccess("SUCCESS"))})},t.signOut=function(r){var o=this;if(!r||typeof r!="function"){this.cleanClientData();return}this.getSession(function(i,s){if(i)return r(i);o.revokeTokens(function(u){o.cleanClientData(),r(u)})})},t.revokeTokens=function(r){if(r===void 0&&(r=function(){}),typeof r!="function")throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession){var o=new Error("User is not authenticated");return r(o)}if(!this.signInUserSession.getAccessToken()){var i=new Error("No Access token available");return r(i)}var s=this.signInUserSession.getRefreshToken().getToken(),u=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(u)&&s)return this.revokeToken({token:s,callback:r});r()},t.isSessionRevocable=function(r){if(r&&typeof r.decodePayload=="function")try{var o=r.decodePayload(),i=o.origin_jti;return!!i}catch{}return!1},t.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},t.revokeToken=function(r){var o=r.token,i=r.callback;this.client.requestWithRetry("RevokeToken",{Token:o,ClientId:this.pool.getClientId()},function(s){if(s)return i(s);i()})},t.sendMFASelectionAnswer=function(r,o){var i=this,s={};s.USERNAME=this.username,s.ANSWER=r;var u={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:s,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,function(c,a){if(c)return o.onFailure(c);if(i.Session=a.Session,r==="SMS_MFA")return o.mfaRequired(a.ChallengeName,a.ChallengeParameters);if(r==="SOFTWARE_TOKEN_MFA")return o.totpRequired(a.ChallengeName,a.ChallengeParameters)})},t.getUserContextData=function(){var r=this.pool;return r.getUserContextData(this.username)},t.associateSoftwareToken=function(r){var o=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i,s){return i?r.onFailure(i):r.associateSecretCode(s.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(i,s){return i?r.onFailure(i):(o.Session=s.Session,r.associateSecretCode(s.SecretCode))})},t.verifySoftwareToken=function(r,o,i){var s=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:r,FriendlyDeviceName:o},function(u,c){return u?i.onFailure(u):i.onSuccess(c)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:r,FriendlyDeviceName:o},function(u,c){if(u)return i.onFailure(u);s.Session=c.Session;var a={};a.USERNAME=s.username;var f={ChallengeName:"MFA_SETUP",ClientId:s.pool.getClientId(),ChallengeResponses:a,Session:s.Session};s.getUserContextData()&&(f.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",f,function(l,p){return l?i.onFailure(l):(s.signInUserSession=s.getCognitoUserSession(p.AuthenticationResult),s.cacheTokens(),i.onSuccess(s.signInUserSession))})})},n}(),dd="auth";function St(){}St.prototype.userAgent=ud();var pd=function(){St.category=dd},Zo=function(t){St.framework=t},gd=function(t){var e=St.category?" "+St.category:"",r=St.framework?" framework/"+St.framework:"",o=""+St.prototype.userAgent+e+r;return o};function vd(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,vn(n,t)}function Oi(n){var t=typeof Map=="function"?new Map:void 0;return Oi=function(r){if(r===null||!md(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(r))return t.get(r);t.set(r,o)}function o(){return yd(r,arguments,xi(this).constructor)}return o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),vn(o,r)},Oi(n)}function yd(n,t,e){if(ma())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(n.bind.apply(n,r));return e&&vn(o,e.prototype),o}function ma(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ma=function(){return!!n})()}function md(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}function vn(n,t){return vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},vn(n,t)}function xi(n){return xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xi(n)}var bd=function(n){function t(e,r,o,i){var s;return s=n.call(this,e)||this,s.code=r,s.name=o,s.statusCode=i,s}return vd(t,n),t}(Oi(Error)),wd=function(){function n(e,r,o){this.endpoint=r||"https://cognito-idp."+e+".amazonaws.com/";var i=o||{},s=i.credentials;this.fetchOptions=s?{credentials:s}:{}}var t=n.prototype;return t.promisifyRequest=function(r,o){var i=this;return new Promise(function(s,u){i.request(r,o,function(c,a){c?u(new bd(c.message,c.code,c.name,c.statusCode)):s(a)})})},t.requestWithRetry=function(r,o,i){var s=this,u=5*1e3;Td(function(c){return new Promise(function(a,f){s.request(r,c,function(l,p){l?f(l):a(p)})})},[o],u).then(function(c){return i(null,c)}).catch(function(c){return i(c)})},t.request=function(r,o,i){var s={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+r,"X-Amz-User-Agent":gd(),"Cache-Control":"no-store"},u=Object.assign({},this.fetchOptions,{headers:s,method:"POST",mode:"cors",body:JSON.stringify(o)}),c;fetch(this.endpoint,u).then(function(a){return c=a,a},function(a){throw a instanceof TypeError?new Error("Network error"):a}).then(function(a){return a.json().catch(function(){return{}})}).then(function(a){if(c.ok)return i(null,a);var f=(a.__type||a.code).split("#").pop(),l=new Error(a.message||a.Message||null);return l.name=f,l.code=f,i(l)}).catch(function(a){if(c&&c.headers&&c.headers.get("x-amzn-errortype"))try{var f=c.headers.get("x-amzn-errortype").split(":")[0],l=new Error(c.status?c.status.toString():null);return l.code=f,l.name=f,l.statusCode=c.status,i(l)}catch{return i(a)}else a instanceof Error&&a.message==="Network error"&&(a.code="NetworkError");return i(a)})},n}(),Dn={debug:function(){}},Sd=function(t){var e="nonRetryable";return t&&t[e]};function ba(n,t,e,r){if(r===void 0&&(r=1),typeof n!="function")throw Error("functionToRetry must be a function");return Dn.debug(n.name+" attempt #"+r+" with args: "+JSON.stringify(t)),n.apply(void 0,t).catch(function(o){if(Dn.debug("error on "+n.name,o),Sd(o))throw Dn.debug(n.name+" non retryable error",o),o;var i=e(r,t,o);if(Dn.debug(n.name+" retrying in "+i+" ms"),i!==!1)return new Promise(function(s){return setTimeout(s,i)}).then(function(){return ba(n,t,e,r+1)});throw o})}function _d(n){var t=100,e=100;return function(r){var o=Math.pow(2,r)*t+e*Math.random();return o>n?!1:o}}var Ed=5*60*1e3;function Td(n,t,e){return e===void 0&&(e=Ed),ba(n,t,_d(e))}/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Ad=55,Id=function(){function n(e,r){var o=e||{},i=o.UserPoolId,s=o.ClientId,u=o.endpoint,c=o.fetchOptions,a=o.AdvancedSecurityDataCollectionFlag;if(!i||!s)throw new Error("Both UserPoolId and ClientId are required.");if(i.length>Ad||!/^[\w-]+_[0-9a-zA-Z]+$/.test(i))throw new Error("Invalid UserPoolId format.");var f=i.split("_")[0];this.userPoolId=i,this.clientId=s,this.client=new wd(f,u,c),this.advancedSecurityDataCollectionFlag=a!==!1,this.storage=e.Storage||new ya().getStorage(),r&&(this.wrapRefreshSessionCallback=r)}var t=n.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},t.getClientId=function(){return this.clientId},t.signUp=function(r,o,i,s,u,c){var a=this,f={ClientId:this.clientId,Username:r,Password:o,UserAttributes:i,ValidationData:s,ClientMetadata:c};this.getUserContextData(r)&&(f.UserContextData=this.getUserContextData(r)),this.client.request("SignUp",f,function(l,p){if(l)return u(l,null);var g={Username:r,Pool:a,Storage:a.storage},v={user:new Ci(g),userConfirmed:p.UserConfirmed,userSub:p.UserSub,codeDeliveryDetails:p.CodeDeliveryDetails};return u(null,v)})},t.getCurrentUser=function(){var r="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",o=this.storage.getItem(r);if(o){var i={Username:o,Pool:this,Storage:this.storage};return new Ci(i)}return null},t.getUserContextData=function(r){if(!(typeof AmazonCognitoAdvancedSecurityData>"u")){var o=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var i=o.getData(r,this.userPoolId,this.clientId);if(i){var s={EncodedData:i};return s}}return{}}},n}(),wa={exports:{}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(n,t){(function(e){var r;if(n.exports=e(),r=!0,!r){var o=window.Cookies,i=window.Cookies=e();i.noConflict=function(){return window.Cookies=o,i}}})(function(){function e(){for(var i=0,s={};i<arguments.length;i++){var u=arguments[i];for(var c in u)s[c]=u[c]}return s}function r(i){return i.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function o(i){function s(){}function u(a,f,l){if(!(typeof document>"u")){l=e({path:"/"},s.defaults,l),typeof l.expires=="number"&&(l.expires=new Date(new Date*1+l.expires*864e5)),l.expires=l.expires?l.expires.toUTCString():"";try{var p=JSON.stringify(f);/^[\{\[]/.test(p)&&(f=p)}catch{}f=i.write?i.write(f,a):encodeURIComponent(String(f)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),a=encodeURIComponent(String(a)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var g="";for(var v in l)l[v]&&(g+="; "+v,l[v]!==!0&&(g+="="+l[v].split(";")[0]));return document.cookie=a+"="+f+g}}function c(a,f){if(!(typeof document>"u")){for(var l={},p=document.cookie?document.cookie.split("; "):[],g=0;g<p.length;g++){var v=p[g].split("="),m=v.slice(1).join("=");!f&&m.charAt(0)==='"'&&(m=m.slice(1,-1));try{var w=r(v[0]);if(m=(i.read||i)(m,w)||r(m),f)try{m=JSON.parse(m)}catch{}if(l[w]=m,a===w)break}catch{}}return a?l[a]:l}}return s.set=u,s.get=function(a){return c(a,!1)},s.getJSON=function(a){return c(a,!0)},s.remove=function(a,f){u(a,"",e(f,{expires:-1}))},s.defaults={},s.withConverter=o,s}return o(function(){})})})(wa);var rn=wa.exports,Cd=function(){function n(e){if(e===void 0&&(e={}),e.domain&&(this.domain=e.domain),e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(e.sameSite==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=n.prototype;return t.setItem=function(r,o){var i={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(i.sameSite=this.sameSite),rn.set(r,o,i),rn.get(r)},t.getItem=function(r){return rn.get(r)},t.removeItem=function(r){var o={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(o.sameSite=this.sameSite),rn.remove(r,o)},t.clear=function(){for(var r=rn.get(),o=Object.keys(r).length,i=0;i<o;++i)this.removeItem(Object.keys(r)[i]);return{}},n}(),ar={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */ar.exports;(function(n,t){(function(e){var r=t&&!t.nodeType&&t,o=n&&!n.nodeType&&n,i=typeof window=="object"&&window;(i.global===i||i.window===i||i.self===i)&&(e=i);var s,u=2147483647,c=36,a=1,f=26,l=38,p=700,g=72,v=128,m="-",w=/^xn--/,_=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=c-a,N=Math.floor,D=String.fromCharCode,U;function k(L){throw RangeError(T[L])}function B(L,M){for(var q=L.length,Q=[];q--;)Q[q]=M(L[q]);return Q}function K(L,M){var q=L.split("@"),Q="";q.length>1&&(Q=q[0]+"@",L=q[1]),L=L.replace(S,".");var te=L.split("."),pe=B(te,M).join(".");return Q+pe}function X(L){for(var M=[],q=0,Q=L.length,te,pe;q<Q;)te=L.charCodeAt(q++),te>=55296&&te<=56319&&q<Q?(pe=L.charCodeAt(q++),(pe&64512)==56320?M.push(((te&1023)<<10)+(pe&1023)+65536):(M.push(te),q--)):M.push(te);return M}function re(L){return B(L,function(M){var q="";return M>65535&&(M-=65536,q+=D(M>>>10&1023|55296),M=56320|M&1023),q+=D(M),q}).join("")}function oe(L){return L-48<10?L-22:L-65<26?L-65:L-97<26?L-97:c}function z(L,M){return L+22+75*(L<26)-((M!=0)<<5)}function me(L,M,q){var Q=0;for(L=q?N(L/p):L>>1,L+=N(L/M);L>I*f>>1;Q+=c)L=N(L/I);return N(Q+(I+1)*L/(L+l))}function de(L){var M=[],q=L.length,Q,te=0,pe=v,le=g,_e,ke,Le,Ge,ge,be,Pe,nt,rt;for(_e=L.lastIndexOf(m),_e<0&&(_e=0),ke=0;ke<_e;++ke)L.charCodeAt(ke)>=128&&k("not-basic"),M.push(L.charCodeAt(ke));for(Le=_e>0?_e+1:0;Le<q;){for(Ge=te,ge=1,be=c;Le>=q&&k("invalid-input"),Pe=oe(L.charCodeAt(Le++)),(Pe>=c||Pe>N((u-te)/ge))&&k("overflow"),te+=Pe*ge,nt=be<=le?a:be>=le+f?f:be-le,!(Pe<nt);be+=c)rt=c-nt,ge>N(u/rt)&&k("overflow"),ge*=rt;Q=M.length+1,le=me(te-Ge,Q,Ge==0),N(te/Q)>u-pe&&k("overflow"),pe+=N(te/Q),te%=Q,M.splice(te++,0,pe)}return re(M)}function Pt(L){var M,q,Q,te,pe,le,_e,ke,Le,Ge,ge,be=[],Pe,nt,rt,vt;for(L=X(L),Pe=L.length,M=v,q=0,pe=g,le=0;le<Pe;++le)ge=L[le],ge<128&&be.push(D(ge));for(Q=te=be.length,te&&be.push(m);Q<Pe;){for(_e=u,le=0;le<Pe;++le)ge=L[le],ge>=M&&ge<_e&&(_e=ge);for(nt=Q+1,_e-M>N((u-q)/nt)&&k("overflow"),q+=(_e-M)*nt,M=_e,le=0;le<Pe;++le)if(ge=L[le],ge<M&&++q>u&&k("overflow"),ge==M){for(ke=q,Le=c;Ge=Le<=pe?a:Le>=pe+f?f:Le-pe,!(ke<Ge);Le+=c)vt=ke-Ge,rt=c-Ge,be.push(D(z(Ge+vt%rt,0))),ke=N(vt/rt);be.push(D(z(ke,0))),pe=me(q,nt,Q==te),q=0,++Q}++q,++M}return be.join("")}function Dr(L){return K(L,function(M){return w.test(M)?de(M.slice(4).toLowerCase()):M})}function kr(L){return K(L,function(M){return _.test(M)?"xn--"+Pt(M):M})}if(s={version:"1.3.2",ucs2:{decode:X,encode:re},decode:de,encode:Pt,toASCII:kr,toUnicode:Dr},r&&o)if(n.exports==r)o.exports=s;else for(U in s)s.hasOwnProperty(U)&&(r[U]=s[U]);else e.punycode=s})(cu)})(ar,ar.exports);var Od=ar.exports,xd={isString:function(n){return typeof n=="string"},isObject:function(n){return typeof n=="object"&&n!==null},isNull:function(n){return n===null},isNullOrUndefined:function(n){return n==null}},yn={};function Nd(n,t){return Object.prototype.hasOwnProperty.call(n,t)}var Rd=function(n,t,e,r){t=t||"&",e=e||"=";var o={};if(typeof n!="string"||n.length===0)return o;var i=/\+/g;n=n.split(t);var s=1e3;r&&typeof r.maxKeys=="number"&&(s=r.maxKeys);var u=n.length;s>0&&u>s&&(u=s);for(var c=0;c<u;++c){var a=n[c].replace(i,"%20"),f=a.indexOf(e),l,p,g,v;f>=0?(l=a.substr(0,f),p=a.substr(f+1)):(l=a,p=""),g=decodeURIComponent(l),v=decodeURIComponent(p),Nd(o,g)?Array.isArray(o[g])?o[g].push(v):o[g]=[o[g],v]:o[g]=v}return o},on=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}},Dd=function(n,t,e,r){return t=t||"&",e=e||"=",n===null&&(n=void 0),typeof n=="object"?Object.keys(n).map(function(o){var i=encodeURIComponent(on(o))+e;return Array.isArray(n[o])?n[o].map(function(s){return i+encodeURIComponent(on(s))}).join(t):i+encodeURIComponent(on(n[o]))}).join(t):r?encodeURIComponent(on(r))+e+encodeURIComponent(on(n)):""};yn.decode=yn.parse=Rd;yn.encode=yn.stringify=Dd;var kd=Od,st=xd,at=fo,Pd=Vd;function Qe(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Ud=/^([a-z0-9.+-]+:)/i,Fd=/:[0-9]*$/,Md=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Ld=["<",">",'"',"`"," ","\r",`
`,"	"],Bd=["{","}","|","\\","^","`"].concat(Ld),Ni=["'"].concat(Bd),es=["%","/","?",";","#"].concat(Ni),ts=["/","?","#"],jd=255,ns=/^[+a-z0-9A-Z_-]{0,63}$/,Kd=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,qd={javascript:!0,"javascript:":!0},Ri={javascript:!0,"javascript:":!0},Vt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Di=yn;function fo(n,t,e){if(n&&st.isObject(n)&&n instanceof Qe)return n;var r=new Qe;return r.parse(n,t,e),r}Qe.prototype.parse=function(n,t,e){if(!st.isString(n))throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var r=n.indexOf("?"),o=r!==-1&&r<n.indexOf("#")?"?":"#",i=n.split(o),s=/\\/g;i[0]=i[0].replace(s,"/"),n=i.join(o);var u=n;if(u=u.trim(),!e&&n.split("#").length===1){var c=Md.exec(u);if(c)return this.path=u,this.href=u,this.pathname=c[1],c[2]?(this.search=c[2],t?this.query=Di.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var a=Ud.exec(u);if(a){a=a[0];var f=a.toLowerCase();this.protocol=f,u=u.substr(a.length)}if(e||a||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var l=u.substr(0,2)==="//";l&&!(a&&Ri[a])&&(u=u.substr(2),this.slashes=!0)}if(!Ri[a]&&(l||a&&!Vt[a])){for(var p=-1,g=0;g<ts.length;g++){var v=u.indexOf(ts[g]);v!==-1&&(p===-1||v<p)&&(p=v)}var m,w;p===-1?w=u.lastIndexOf("@"):w=u.lastIndexOf("@",p),w!==-1&&(m=u.slice(0,w),u=u.slice(w+1),this.auth=decodeURIComponent(m)),p=-1;for(var g=0;g<es.length;g++){var v=u.indexOf(es[g]);v!==-1&&(p===-1||v<p)&&(p=v)}p===-1&&(p=u.length),this.host=u.slice(0,p),u=u.slice(p),this.parseHost(),this.hostname=this.hostname||"";var _=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_)for(var S=this.hostname.split(/\./),g=0,T=S.length;g<T;g++){var I=S[g];if(I&&!I.match(ns)){for(var N="",D=0,U=I.length;D<U;D++)I.charCodeAt(D)>127?N+="x":N+=I[D];if(!N.match(ns)){var k=S.slice(0,g),B=S.slice(g+1),K=I.match(Kd);K&&(k.push(K[1]),B.unshift(K[2])),B.length&&(u="/"+B.join(".")+u),this.hostname=k.join(".");break}}}this.hostname.length>jd?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=kd.toASCII(this.hostname));var X=this.port?":"+this.port:"",re=this.hostname||"";this.host=re+X,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),u[0]!=="/"&&(u="/"+u))}if(!qd[f])for(var g=0,T=Ni.length;g<T;g++){var oe=Ni[g];if(u.indexOf(oe)!==-1){var z=encodeURIComponent(oe);z===oe&&(z=escape(oe)),u=u.split(oe).join(z)}}var me=u.indexOf("#");me!==-1&&(this.hash=u.substr(me),u=u.slice(0,me));var de=u.indexOf("?");if(de!==-1?(this.search=u.substr(de),this.query=u.substr(de+1),t&&(this.query=Di.parse(this.query)),u=u.slice(0,de)):t&&(this.search="",this.query={}),u&&(this.pathname=u),Vt[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var X=this.pathname||"",Pt=this.search||"";this.path=X+Pt}return this.href=this.format(),this};function Vd(n){return st.isString(n)&&(n=fo(n)),n instanceof Qe?n.format():Qe.prototype.format.call(n)}Qe.prototype.format=function(){var n=this.auth||"";n&&(n=encodeURIComponent(n),n=n.replace(/%3A/i,":"),n+="@");var t=this.protocol||"",e=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=n+this.host:this.hostname&&(o=n+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&st.isObject(this.query)&&Object.keys(this.query).length&&(i=Di.stringify(this.query));var s=this.search||i&&"?"+i||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Vt[t])&&o!==!1?(o="//"+(o||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):o||(o=""),r&&r.charAt(0)!=="#"&&(r="#"+r),s&&s.charAt(0)!=="?"&&(s="?"+s),e=e.replace(/[?#]/g,function(u){return encodeURIComponent(u)}),s=s.replace("#","%23"),t+o+e+s+r};Qe.prototype.resolve=function(n){return this.resolveObject(fo(n,!1,!0)).format()};Qe.prototype.resolveObject=function(n){if(st.isString(n)){var t=new Qe;t.parse(n,!1,!0),n=t}for(var e=new Qe,r=Object.keys(this),o=0;o<r.length;o++){var i=r[o];e[i]=this[i]}if(e.hash=n.hash,n.href==="")return e.href=e.format(),e;if(n.slashes&&!n.protocol){for(var s=Object.keys(n),u=0;u<s.length;u++){var c=s[u];c!=="protocol"&&(e[c]=n[c])}return Vt[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(n.protocol&&n.protocol!==e.protocol){if(!Vt[n.protocol]){for(var a=Object.keys(n),f=0;f<a.length;f++){var l=a[f];e[l]=n[l]}return e.href=e.format(),e}if(e.protocol=n.protocol,!n.host&&!Ri[n.protocol]){for(var T=(n.pathname||"").split("/");T.length&&!(n.host=T.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),T[0]!==""&&T.unshift(""),T.length<2&&T.unshift(""),e.pathname=T.join("/")}else e.pathname=n.pathname;if(e.search=n.search,e.query=n.query,e.host=n.host||"",e.auth=n.auth,e.hostname=n.hostname||n.host,e.port=n.port,e.pathname||e.search){var p=e.pathname||"",g=e.search||"";e.path=p+g}return e.slashes=e.slashes||n.slashes,e.href=e.format(),e}var v=e.pathname&&e.pathname.charAt(0)==="/",m=n.host||n.pathname&&n.pathname.charAt(0)==="/",w=m||v||e.host&&n.pathname,_=w,S=e.pathname&&e.pathname.split("/")||[],T=n.pathname&&n.pathname.split("/")||[],I=e.protocol&&!Vt[e.protocol];if(I&&(e.hostname="",e.port=null,e.host&&(S[0]===""?S[0]=e.host:S.unshift(e.host)),e.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(T[0]===""?T[0]=n.host:T.unshift(n.host)),n.host=null),w=w&&(T[0]===""||S[0]==="")),m)e.host=n.host||n.host===""?n.host:e.host,e.hostname=n.hostname||n.hostname===""?n.hostname:e.hostname,e.search=n.search,e.query=n.query,S=T;else if(T.length)S||(S=[]),S.pop(),S=S.concat(T),e.search=n.search,e.query=n.query;else if(!st.isNullOrUndefined(n.search)){if(I){e.hostname=e.host=S.shift();var N=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;N&&(e.auth=N.shift(),e.host=e.hostname=N.shift())}return e.search=n.search,e.query=n.query,(!st.isNull(e.pathname)||!st.isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!S.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var D=S.slice(-1)[0],U=(e.host||n.host||S.length>1)&&(D==="."||D==="..")||D==="",k=0,B=S.length;B>=0;B--)D=S[B],D==="."?S.splice(B,1):D===".."?(S.splice(B,1),k++):k&&(S.splice(B,1),k--);if(!w&&!_)for(;k--;k)S.unshift("..");w&&S[0]!==""&&(!S[0]||S[0].charAt(0)!=="/")&&S.unshift(""),U&&S.join("/").substr(-1)!=="/"&&S.push("");var K=S[0]===""||S[0]&&S[0].charAt(0)==="/";if(I){e.hostname=e.host=K?"":S.length?S.shift():"";var N=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;N&&(e.auth=N.shift(),e.host=e.hostname=N.shift())}return w=w||e.host&&S.length,w&&!K&&S.unshift(""),S.length?e.pathname=S.join("/"):(e.pathname=null,e.path=null),(!st.isNull(e.pathname)||!st.isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=n.auth||e.auth,e.slashes=e.slashes||n.slashes,e.href=e.format(),e};Qe.prototype.parseHost=function(){var n=this.host,t=Fd.exec(n);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),n=n.substr(0,n.length-t.length)),n&&(this.hostname=n)};var Hd="_self",Gd=function(n){var t=window.open(n,Hd);return t?Promise.resolve(t):Promise.reject()},$d=function(n){window.sessionStorage.setItem("oauth_state",n)},zd=function(){var n=window.sessionStorage.getItem("oauth_state");return window.sessionStorage.removeItem("oauth_state"),n},Wd=function(n){window.sessionStorage.setItem("ouath_pkce_key",n)},Yd=function(){var n=window.sessionStorage.getItem("ouath_pkce_key");return window.sessionStorage.removeItem("ouath_pkce_key"),n},Jd=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",Yr=function(n,t,e){ot.dispatch("auth",{event:n,data:t,message:e},"Auth",Jd)},Bt=new fe("OAuth"),Xd=function(){function n(t){var e=t.config,r=t.cognitoClientId,o=t.scopes,i=o===void 0?[]:o;if(this._urlOpener=e.urlOpener||Gd,this._config=e,this._cognitoClientId=r,!this.isValidScopes(i))throw Error("scopes must be a String Array");this._scopes=i}return n.prototype.isValidScopes=function(t){return Array.isArray(t)&&t.every(function(e){return typeof e=="string"})},n.prototype.oauthSignIn=function(t,e,r,o,i,s){t===void 0&&(t="code"),i===void 0&&(i=sr.Cognito);var u=this._generateState(32),c=s?u+"-"+sc(s):u;$d(c);var a=this._generateRandom(128);Wd(a);var f=this._generateChallenge(a),l="S256",p=this._scopes.join(" "),g=Object.entries(Se(Se({redirect_uri:r,response_type:t,client_id:o,identity_provider:i,scope:p,state:c},t==="code"?{code_challenge:f}:{}),t==="code"?{code_challenge_method:l}:{})).map(function(m){var w=ht(m,2),_=w[0],S=w[1];return encodeURIComponent(_)+"="+encodeURIComponent(S)}).join("&"),v="https://"+e+"/oauth2/authorize?"+g;Bt.debug("Redirecting to "+v),this._urlOpener(v,r)},n.prototype._handleCodeFlow=function(t){return W(this,void 0,void 0,function(){var e,r,o,i,s,u,c,a,f,l,p,g,v,m,w,_;return Y(this,function(S){switch(S.label){case 0:return e=(at(t).query||"").split("&").map(function(T){return T.split("=")}).reduce(function(T,I){var N,D=ht(I,2),U=D[0],k=D[1];return Se(Se({},T),(N={},N[U]=k,N))},{code:void 0}).code,r=at(t).pathname||"/",o=at(this._config.redirectSignIn).pathname||"/",!e||r!==o?[2]:(i="https://"+this._config.domain+"/oauth2/token",Yr("codeFlow",{},"Retrieving tokens from "+i),s=Nt(this._config)?this._cognitoClientId:this._config.clientID,u=Nt(this._config)?this._config.redirectSignIn:this._config.redirectUri,c=Yd(),a=Se({grant_type:"authorization_code",code:e,client_id:s,redirect_uri:u},c?{code_verifier:c}:{}),Bt.debug("Calling token endpoint: "+i+" with",a),f=Object.entries(a).map(function(T){var I=ht(T,2),N=I[0],D=I[1];return encodeURIComponent(N)+"="+encodeURIComponent(D)}).join("&"),l={category:Gt.Auth,action:ai.FederatedSignIn},[4,fetch(i,{method:"POST",headers:(_={"Content-Type":"application/x-www-form-urlencoded"},_[ha]=Sn(l),_),body:f})]);case 1:return[4,S.sent().json()];case 2:if(p=S.sent(),g=p.access_token,v=p.refresh_token,m=p.id_token,w=p.error,w)throw new Error(w);return[2,{accessToken:g,refreshToken:v,idToken:m}]}})})},n.prototype._handleImplicitFlow=function(t){return W(this,void 0,void 0,function(){var e,r,o;return Y(this,function(i){return e=(at(t).hash||"#").substr(1).split("&").map(function(s){return s.split("=")}).reduce(function(s,u){var c,a=ht(u,2),f=a[0],l=a[1];return Se(Se({},s),(c={},c[f]=l,c))},{id_token:void 0,access_token:void 0}),r=e.id_token,o=e.access_token,Yr("implicitFlow",{},"Got tokens from "+t),Bt.debug("Retrieving implicit tokens from "+t+" with"),[2,{accessToken:o,idToken:r,refreshToken:null}]})})},n.prototype.handleAuthResponse=function(t){return W(this,void 0,void 0,function(){var e,r,o,i,s,u,c;return Y(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,,6]),e=t?Se(Se({},(at(t).hash||"#").substr(1).split("&").map(function(f){return f.split("=")}).reduce(function(f,l){var p=ht(l,2),g=p[0],v=p[1];return f[g]=v,f},{})),(at(t).query||"").split("&").map(function(f){return f.split("=")}).reduce(function(f,l){var p=ht(l,2),g=p[0],v=p[1];return f[g]=v,f},{})):{},r=e.error,o=e.error_description,r)throw new Error(o);return i=this._validateState(e),Bt.debug("Starting "+this._config.responseType+" flow with "+t),this._config.responseType!=="code"?[3,2]:(s=[{}],[4,this._handleCodeFlow(t)]);case 1:return[2,Se.apply(void 0,[Se.apply(void 0,s.concat([a.sent()])),{state:i}])];case 2:return u=[{}],[4,this._handleImplicitFlow(t)];case 3:return[2,Se.apply(void 0,[Se.apply(void 0,u.concat([a.sent()])),{state:i}])];case 4:return[3,6];case 5:throw c=a.sent(),Bt.debug("Error handling auth response.",c),c;case 6:return[2]}})})},n.prototype._validateState=function(t){if(t){var e=zd(),r=t.state;if(e&&e!==r)throw new Error("Invalid state in OAuth flow");return r}},n.prototype.signOut=function(){return W(this,void 0,void 0,function(){var t,e,r;return Y(this,function(o){return t="https://"+this._config.domain+"/logout?",e=Nt(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=Nt(this._config)?this._config.redirectSignOut:this._config.returnTo,t+=Object.entries({client_id:e,logout_uri:encodeURIComponent(r)}).map(function(i){var s=ht(i,2),u=s[0],c=s[1];return u+"="+c}).join("&"),Yr("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+t),Bt.debug("Signing out from "+t),[2,this._urlOpener(t,r)]})})},n.prototype._generateState=function(t){for(var e="",r=t,o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";r>0;--r)e+=o[Math.round(Math.random()*(o.length-1))];return e},n.prototype._generateChallenge=function(t){var e=new Et.Sha256;e.update(t);var r=e.digestSync(),o=Z.Buffer.from(r).toString("base64"),i=this._base64URL(o);return i},n.prototype._base64URL=function(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},n.prototype._generateRandom=function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=new Uint8Array(t);if(typeof window<"u"&&window.crypto)window.crypto.getRandomValues(r);else for(var o=0;o<t;o+=1)r[o]=Math.random()*e.length|0;return this._bufferToString(r)},n.prototype._bufferToString=function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=[],o=0;o<t.byteLength;o+=1){var i=t[o]%e.length;r.push(e[i])}return r.join("")},n}();const Qd=Xd,Zd=function(n){if(et().isBrowser&&window.location){var t=window.location.href;n({url:t})}else if(!et().isNode)throw new Error("Not supported")};var we;(function(n){n.DEFAULT_MSG="Authentication Error",n.EMPTY_EMAIL="Email cannot be empty",n.EMPTY_PHONE="Phone number cannot be empty",n.EMPTY_USERNAME="Username cannot be empty",n.INVALID_USERNAME="The username should either be a string or one of the sign in types",n.EMPTY_PASSWORD="Password cannot be empty",n.EMPTY_CODE="Confirmation code cannot be empty",n.SIGN_UP_ERROR="Error creating account",n.NO_MFA="No valid MFA method provided",n.INVALID_MFA="Invalid MFA type",n.EMPTY_CHALLENGE="Challenge response cannot be empty",n.NO_USER_SESSION="Failed to get the session because the user is empty",n.NETWORK_ERROR="Network Error",n.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",n.AUTOSIGNIN_ERROR="Please use your credentials to sign in"})(we||(we={}));var ep=new fe("AuthError"),yt=function(n){da(t,n);function t(e){var r=this,o=np[e],i=o.message,s=o.log;return r=n.call(this,i)||this,r.constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="AuthError",r.log=s||i,ep.error(r.log),r}return t}(Error),tp=function(n){da(t,n);function t(e){var r=n.call(this,e)||this;return r.constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="NoUserPoolError",r}return t}(yt),np={noConfig:{message:we.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly.
            This error is typically caused by one of the following scenarios:

            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point
                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information
            
            2. There might be multiple conflicting versions of amplify packages in your node_modules.
				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)
        `},missingAuthConfig:{message:we.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly. 
            The configuration object is missing required auth properties.
            This error is typically caused by one of the following scenarios:

            1. Did you run \`amplify push\` after adding auth via \`amplify add auth\`?
                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information

            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.
        `},emptyUsername:{message:we.EMPTY_USERNAME},invalidUsername:{message:we.INVALID_USERNAME},emptyPassword:{message:we.EMPTY_PASSWORD},emptyCode:{message:we.EMPTY_CODE},signUpError:{message:we.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:we.NO_MFA},invalidMFA:{message:we.INVALID_MFA},emptyChallengeResponse:{message:we.EMPTY_CHALLENGE},noUserSession:{message:we.NO_USER_SESSION},deviceConfig:{message:we.DEVICE_CONFIG},networkError:{message:we.NETWORK_ERROR},autoSignInError:{message:we.AUTOSIGNIN_ERROR},default:{message:we.DEFAULT_MSG}},x=new fe("AuthClass"),rs="aws.cognito.signin.user.admin",rp=10*1e3,ip=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",G=function(n,t,e){ot.dispatch("auth",{event:n,data:t,message:e},"Auth",ip)},op=60,sp=3*60*1e3,ap=function(){function n(t){var e=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.autoSignInInitiated=!1,this.inflightSessionPromise=null,this.inflightSessionPromiseCounter=0,this.Credentials=pt,this.wrapRefreshSessionCallback=function(r){var o=function(i,s){return s?G("tokenRefresh",void 0,"New token retrieved"):G("tokenRefresh_failure",i,"Failed to retrieve new token"),r(i,s)};return o},this.configure(t),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),ot.listen("auth",function(r){var o=r.payload,i=o.event;switch(i){case"verify":case"signIn":e._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":e._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":e._storage.setItem("amplify-signin-with-hostedUI","true");break}}),pd(),Zo(Ur.framework),Ur.observeFrameworkChanges(function(){Zo(Ur.framework)})}return n.prototype.getModuleName=function(){return"Auth"},n.prototype.configure=function(t){var e=this;if(!t)return this._config||{};x.debug("configure Auth");var r=Object.assign({},this._config,Qs(t).Auth,t);this._config=r;var o=this._config,i=o.userPoolId,s=o.userPoolWebClientId,u=o.cookieStorage,c=o.oauth,a=o.region,f=o.identityPoolId,l=o.mandatorySignIn,p=o.refreshHandlers,g=o.identityPoolRegion,v=o.clientMetadata,m=o.endpoint,w=o.storage;if(!w)u?this._storage=new Cd(u):this._storage=t.ssr?new Jl:new no().getStorage();else{if(!this._isValidAuthStorage(w))throw x.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=w}if(this._storageSync=Promise.resolve(),typeof this._storage.sync=="function"&&(this._storageSync=this._storage.sync()),i){var _={UserPoolId:i,ClientId:s,endpoint:m};_.Storage=this._storage,this.userPool=new Id(_,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:l,region:a,userPoolId:i,identityPoolId:f,refreshHandlers:p,storage:this._storage,identityPoolRegion:g});var S=c?Nt(this._config.oauth)?c:c.awsCognito:void 0;if(S){var T=Object.assign({cognitoClientId:s,UserPoolId:i,domain:S.domain,scopes:S.scope,redirectSignIn:S.redirectSignIn,redirectSignOut:S.redirectSignOut,responseType:S.responseType,Storage:this._storage,urlOpener:S.urlOpener,clientMetadata:v},S.options);this._oAuthHandler=new Qd({scopes:T.scopes,config:T,cognitoClientId:T.cognitoClientId});var I={};Zd(function(D){var U=D.url;I[U]||(I[U]=!0,e._handleAuthResponse(U))})}if(G("configured",null,"The Auth category has been configured successfully"),!this.autoSignInInitiated&&typeof this._storage.getItem=="function"){var N=this.isTrueStorageValue("amplify-polling-started");N&&(G("autoSignIn_failure",null,J.AutoSignInError),this._storage.removeItem("amplify-auto-sign-in")),this._storage.removeItem("amplify-polling-started")}return this._config},n.prototype.signUp=function(t){for(var e=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var i,s,u;if(!this.userPool)return this.rejectNoUserPool();var c=null,a=null,f=[],l=null,p,g={enabled:!1},v={},m={};if(t&&typeof t=="string"){c=t,a=r?r[0]:null;var w=r?r[1]:null,_=r?r[2]:null;w&&f.push(new Kt({Name:"email",Value:w})),_&&f.push(new Kt({Name:"phone_number",Value:_}))}else if(t&&typeof t=="object"){c=t.username,a=t.password,t&&t.clientMetadata?p=t.clientMetadata:this._config.clientMetadata&&(p=this._config.clientMetadata);var S=t.attributes;S&&Object.keys(S).map(function(I){f.push(new Kt({Name:I,Value:S[I]}))});var T=t.validationData;T&&(l=[],Object.keys(T).map(function(I){l.push(new Kt({Name:I,Value:T[I]}))})),g=(i=t.autoSignIn)!==null&&i!==void 0?i:{enabled:!1},g.enabled&&(this._storage.setItem("amplify-auto-sign-in","true"),v=(s=g.validationData)!==null&&s!==void 0?s:{},m=(u=g.clientMetaData)!==null&&u!==void 0?u:{})}else return this.rejectAuthError(J.SignUpError);return c?a?(x.debug("signUp attrs:",f),x.debug("signUp validation data:",l),new Promise(function(I,N){e.userPool.signUp(c,a,f,l,function(D,U){D?(G("signUp_failure",D,c+" failed to signup"),N(D)):(G("signUp",U,c+" has signed up successfully"),g.enabled&&e.handleAutoSignIn(c,a,v,m,U),I(U))},p)})):this.rejectAuthError(J.EmptyPassword):this.rejectAuthError(J.EmptyUsername)},n.prototype.handleAutoSignIn=function(t,e,r,o,i){this.autoSignInInitiated=!0;var s=new zo({Username:t,Password:e,ValidationData:r,ClientMetadata:o});i.userConfirmed?this.signInAfterUserConfirmed(s):this._config.signUpVerificationMethod==="link"?this.handleLinkAutoSignIn(s):this.handleCodeAutoSignIn(s)},n.prototype.handleCodeAutoSignIn=function(t){var e=this,r=function(o){var i=o.payload;i.event==="confirmSignUp"&&e.signInAfterUserConfirmed(t,r)};ot.listen("auth",r)},n.prototype.handleLinkAutoSignIn=function(t){var e=this;this._storage.setItem("amplify-polling-started","true");var r=Date.now(),o=setInterval(function(){Date.now()-r>sp?(clearInterval(o),G("autoSignIn_failure",null,"Please confirm your account and use your credentials to sign in."),e._storage.removeItem("amplify-auto-sign-in")):e.signInAfterUserConfirmed(t,null,o)},5e3)},n.prototype.signInAfterUserConfirmed=function(t,e,r){return W(this,void 0,void 0,function(){var o,i,s=this;return Y(this,function(u){switch(u.label){case 0:o=this.createCognitoUser(t.getUsername()),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,o.authenticateUser(t,this.authCallbacks(o,function(c){G("autoSignIn",c,t.getUsername()+" has signed in successfully"),e&&ot.remove("auth",e),r&&(clearInterval(r),s._storage.removeItem("amplify-polling-started")),s._storage.removeItem("amplify-auto-sign-in")},function(c){x.error(c),s._storage.removeItem("amplify-auto-sign-in")}))];case 2:return u.sent(),[3,4];case 3:return i=u.sent(),x.error(i),[3,4];case 4:return[2]}})})},n.prototype.confirmSignUp=function(t,e,r){var o=this;if(!this.userPool)return this.rejectNoUserPool();if(!t)return this.rejectAuthError(J.EmptyUsername);if(!e)return this.rejectAuthError(J.EmptyCode);var i=this.createCognitoUser(t),s=r&&typeof r.forceAliasCreation=="boolean"?r.forceAliasCreation:!0,u;return r&&r.clientMetadata?u=r.clientMetadata:this._config.clientMetadata&&(u=this._config.clientMetadata),new Promise(function(c,a){i.confirmRegistration(e,s,function(f,l){if(f)a(f);else{G("confirmSignUp",l,t+" has been confirmed successfully");var p=o.isTrueStorageValue("amplify-auto-sign-in");p&&!o.autoSignInInitiated&&(G("autoSignIn_failure",null,J.AutoSignInError),o._storage.removeItem("amplify-auto-sign-in")),c(l)}},u)})},n.prototype.isTrueStorageValue=function(t){var e=this._storage.getItem(t);return e?e==="true":!1},n.prototype.resendSignUp=function(t,e){if(e===void 0&&(e=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!t)return this.rejectAuthError(J.EmptyUsername);var r=this.createCognitoUser(t);return new Promise(function(o,i){r.resendConfirmationCode(function(s,u){s?i(s):o(u)},e)})},n.prototype.signIn=function(t,e,r){if(r===void 0&&(r=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var o=null,i=null,s={};if(typeof t=="string")o=t,i=e;else if(ih(t))typeof e<"u"&&x.warn("The password should be defined under the first parameter object!"),o=t.username,i=t.password,s=t.validationData;else return this.rejectAuthError(J.InvalidUsername);if(!o)return this.rejectAuthError(J.EmptyUsername);var u=new zo({Username:o,Password:i,ValidationData:s,ClientMetadata:r});return i?this.signInWithPassword(u):this.signInWithoutPassword(u)},n.prototype.authCallbacks=function(t,e,r){var o=this,i=this;return{onSuccess:function(s){return W(o,void 0,void 0,function(){var u,c,a,f;return Y(this,function(l){switch(l.label){case 0:x.debug(s),delete t.challengeName,delete t.challengeParam,l.label=1;case 1:return l.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return l.sent(),[4,this.Credentials.set(s,"session")];case 3:return u=l.sent(),x.debug("succeed to get cognito credentials",u),[3,9];case 4:return c=l.sent(),x.debug("cannot get cognito credentials",c),[3,9];case 5:return l.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return a=l.sent(),i.user=a,G("signIn",a,"A user "+t.getUsername()+" has been signed in"),e(a),[3,8];case 7:return f=l.sent(),x.error("Failed to get the signed in user",f),r(f),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(s){x.debug("signIn failure",s),G("signIn_failure",s,t.getUsername()+" failed to signin"),r(s)},customChallenge:function(s){x.debug("signIn custom challenge answer required"),t.challengeName="CUSTOM_CHALLENGE",t.challengeParam=s,e(t)},mfaRequired:function(s,u){x.debug("signIn MFA required"),t.challengeName=s,t.challengeParam=u,e(t)},mfaSetup:function(s,u){x.debug("signIn mfa setup",s),t.challengeName=s,t.challengeParam=u,e(t)},newPasswordRequired:function(s,u){x.debug("signIn new password"),t.challengeName="NEW_PASSWORD_REQUIRED",t.challengeParam={userAttributes:s,requiredAttributes:u},e(t)},totpRequired:function(s,u){x.debug("signIn totpRequired"),t.challengeName=s,t.challengeParam=u,e(t)},selectMFAType:function(s,u){x.debug("signIn selectMFAType",s),t.challengeName=s,t.challengeParam=u,e(t)}}},n.prototype.signInWithPassword=function(t){var e=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var r=this.createCognitoUser(t.getUsername());return this.pendingSignIn=new Promise(function(o,i){r.authenticateUser(t,e.authCallbacks(r,function(s){e.pendingSignIn=null,o(s)},function(s){e.pendingSignIn=null,i(s)}))}),this.pendingSignIn},n.prototype.signInWithoutPassword=function(t){var e=this,r=this.createCognitoUser(t.getUsername());return r.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(o,i){r.initiateAuth(t,e.authCallbacks(r,o,i))})},n.prototype.getMFAOptions=function(t){return new Promise(function(e,r){t.getMFAOptions(function(o,i){if(o){x.debug("get MFA Options failed",o),r(o);return}x.debug("get MFA options success",i),e(i)})})},n.prototype.getPreferredMFA=function(t,e){var r=this,o=this;return new Promise(function(i,s){var u=r._config.clientMetadata,c=e?e.bypassCache:!1;t.getUserData(function(a,f){return W(r,void 0,void 0,function(){var l,p;return Y(this,function(g){switch(g.label){case 0:if(!a)return[3,5];if(x.debug("getting preferred mfa failed",a),!this.isSessionInvalid(a))return[3,4];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return g.sent(),[3,4];case 3:return l=g.sent(),s(new Error("Session is invalid due to: "+a.message+" and failed to clean up invalid session: "+l.message)),[2];case 4:return s(a),[2];case 5:return p=o._getMfaTypeFromUserData(f),p?(i(p),[2]):(s("invalid MFA Type"),[2])}})})},{bypassCache:c,clientMetadata:u})})},n.prototype._getMfaTypeFromUserData=function(t){var e=null,r=t.PreferredMfaSetting;if(r)e=r;else{var o=t.UserMFASettingList;if(o)o.length===0?e="NOMFA":x.debug("invalid case for getPreferredMFA",t);else{var i=t.MFAOptions;i?e="SMS_MFA":e="NOMFA"}}return e},n.prototype._getUserData=function(t,e){var r=this;return new Promise(function(o,i){t.getUserData(function(s,u){return W(r,void 0,void 0,function(){var c;return Y(this,function(a){switch(a.label){case 0:if(!s)return[3,5];if(x.debug("getting user data failed",s),!this.isSessionInvalid(s))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return a.sent(),[3,4];case 3:return c=a.sent(),i(new Error("Session is invalid due to: "+s.message+" and failed to clean up invalid session: "+c.message)),[2];case 4:return i(s),[2];case 5:o(u),a.label=6;case 6:return[2]}})})},e)})},n.prototype.setPreferredMFA=function(t,e){return W(this,void 0,void 0,function(){var r,o,i,s,u,c,a,f=this;return Y(this,function(l){switch(l.label){case 0:return r=this._config.clientMetadata,[4,this._getUserData(t,{bypassCache:!0,clientMetadata:r})];case 1:switch(o=l.sent(),i=null,s=null,u=e,u){case"TOTP":return[3,2];case"SOFTWARE_TOKEN_MFA":return[3,2];case"SMS":return[3,3];case"SMS_MFA":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return s={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return c=o.UserMFASettingList,[4,this._getMfaTypeFromUserData(o)];case 5:if(a=l.sent(),a==="NOMFA")return[2,Promise.resolve("No change for mfa type")];if(a==="SMS_MFA")i={PreferredMfa:!1,Enabled:!1};else if(a==="SOFTWARE_TOKEN_MFA")s={PreferredMfa:!1,Enabled:!1};else return[2,this.rejectAuthError(J.InvalidMFA)];return c&&c.length!==0&&c.forEach(function(p){p==="SMS_MFA"?i={PreferredMfa:!1,Enabled:!1}:p==="SOFTWARE_TOKEN_MFA"&&(s={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return x.debug("no validmfa method provided"),[2,this.rejectAuthError(J.NoMFA)];case 7:return[2,new Promise(function(p,g){t.setUserMfaPreference(i,s,function(v,m){if(v)return x.debug("Set user mfa preference error",v),g(v);x.debug("Set user mfa success",m),x.debug("Caching the latest user data into local"),t.getUserData(function(w,_){return W(f,void 0,void 0,function(){var S;return Y(this,function(T){switch(T.label){case 0:if(!w)return[3,5];if(x.debug("getting user data failed",w),!this.isSessionInvalid(w))return[3,4];T.label=1;case 1:return T.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return T.sent(),[3,4];case 3:return S=T.sent(),g(new Error("Session is invalid due to: "+w.message+" and failed to clean up invalid session: "+S.message)),[2];case 4:return[2,g(w)];case 5:return[2,p(m)]}})})},{bypassCache:!0,clientMetadata:r})})})]}})})},n.prototype.disableSMS=function(t){return new Promise(function(e,r){t.disableMFA(function(o,i){if(o){x.debug("disable mfa failed",o),r(o);return}x.debug("disable mfa succeed",i),e(i)})})},n.prototype.enableSMS=function(t){return new Promise(function(e,r){t.enableMFA(function(o,i){if(o){x.debug("enable mfa failed",o),r(o);return}x.debug("enable mfa succeed",i),e(i)})})},n.prototype.setupTOTP=function(t){return new Promise(function(e,r){t.associateSoftwareToken({onFailure:function(o){x.debug("associateSoftwareToken failed",o),r(o)},associateSecretCode:function(o){x.debug("associateSoftwareToken success",o),e(o)}})})},n.prototype.verifyTotpToken=function(t,e){x.debug("verification totp token",t,e);var r;t&&typeof t.getSignInUserSession=="function"&&(r=t.getSignInUserSession());var o=r==null?void 0:r.isValid();return new Promise(function(i,s){t.verifySoftwareToken(e,"My TOTP device",{onFailure:function(u){x.debug("verifyTotpToken failed",u),s(u)},onSuccess:function(u){o||G("signIn",t,"A user "+t.getUsername()+" has been signed in"),G("verify",t,"A user "+t.getUsername()+" has been verified"),x.debug("verifyTotpToken success",u),i(u)}})})},n.prototype.confirmSignIn=function(t,e,r,o){var i=this;if(o===void 0&&(o=this._config.clientMetadata),!e)return this.rejectAuthError(J.EmptyCode);var s=this;return new Promise(function(u,c){t.sendMFACode(e,{onSuccess:function(a){return W(i,void 0,void 0,function(){var f,l,p,g;return Y(this,function(v){switch(v.label){case 0:x.debug(a),v.label=1;case 1:return v.trys.push([1,4,5,10]),[4,this.Credentials.clear()];case 2:return v.sent(),[4,this.Credentials.set(a,"session")];case 3:return f=v.sent(),x.debug("succeed to get cognito credentials",f),[3,10];case 4:return l=v.sent(),x.debug("cannot get cognito credentials",l),[3,10];case 5:s.user=t,v.label=6;case 6:return v.trys.push([6,8,,9]),[4,this.currentUserPoolUser()];case 7:return p=v.sent(),t.attributes=p.attributes,[3,9];case 8:return g=v.sent(),x.debug("cannot get updated Cognito User",g),[3,9];case 9:return G("signIn",t,"A user "+t.getUsername()+" has been signed in"),u(t),[7];case 10:return[2]}})})},onFailure:function(a){x.debug("confirm signIn failure",a),c(a)}},r,o)})},n.prototype.completeNewPassword=function(t,e,r,o){var i=this;if(r===void 0&&(r={}),o===void 0&&(o=this._config.clientMetadata),!e)return this.rejectAuthError(J.EmptyPassword);var s=this;return new Promise(function(u,c){t.completeNewPasswordChallenge(e,r,{onSuccess:function(a){return W(i,void 0,void 0,function(){var f,l;return Y(this,function(p){switch(p.label){case 0:x.debug(a),p.label=1;case 1:return p.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return p.sent(),[4,this.Credentials.set(a,"session")];case 3:return f=p.sent(),x.debug("succeed to get cognito credentials",f),[3,6];case 4:return l=p.sent(),x.debug("cannot get cognito credentials",l),[3,6];case 5:return s.user=t,G("signIn",t,"A user "+t.getUsername()+" has been signed in"),u(t),[7];case 6:return[2]}})})},onFailure:function(a){x.debug("completeNewPassword failure",a),G("completeNewPassword_failure",a,i.user+" failed to complete the new password flow"),c(a)},mfaRequired:function(a,f){x.debug("signIn MFA required"),t.challengeName=a,t.challengeParam=f,u(t)},mfaSetup:function(a,f){x.debug("signIn mfa setup",a),t.challengeName=a,t.challengeParam=f,u(t)},totpRequired:function(a,f){x.debug("signIn mfa setup",a),t.challengeName=a,t.challengeParam=f,u(t)}},o)})},n.prototype.sendCustomChallengeAnswer=function(t,e,r){var o=this;return r===void 0&&(r=this._config.clientMetadata),this.userPool?e?new Promise(function(i,s){t.sendCustomChallengeAnswer(e,o.authCallbacks(t,i,s),r)}):this.rejectAuthError(J.EmptyChallengeResponse):this.rejectNoUserPool()},n.prototype.deleteUserAttributes=function(t,e){var r=this;return new Promise(function(o,i){r.userSession(t).then(function(s){t.deleteAttributes(e,function(u,c){return u?i(u):o(c)})})})},n.prototype.deleteUser=function(){return W(this,void 0,void 0,function(){var t,e,r=this;return Y(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._storageSync];case 1:return o.sent(),[3,3];case 2:throw t=o.sent(),x.debug("Failed to sync cache info into memory",t),new Error(t);case 3:return e=this._oAuthHandler&&this._storage.getItem("amplify-signin-with-hostedUI")==="true",[2,new Promise(function(i,s){return W(r,void 0,void 0,function(){var u,c=this;return Y(this,function(a){if(this.userPool)if(u=this.userPool.getCurrentUser(),u)u.getSession(function(f,l){return W(c,void 0,void 0,function(){var p,g=this;return Y(this,function(v){switch(v.label){case 0:if(!f)return[3,5];if(x.debug("Failed to get the user session",f),!this.isSessionInvalid(f))return[3,4];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(u)];case 2:return v.sent(),[3,4];case 3:return p=v.sent(),s(new Error("Session is invalid due to: "+f.message+" and failed to clean up invalid session: "+p.message)),[2];case 4:return[2,s(f)];case 5:u.deleteUser(function(m,w){if(m)s(m);else{G("userDeleted",w,"The authenticated user has been deleted."),u.signOut(),g.user=null;try{g.cleanCachedItems()}catch{x.debug("failed to clear cached items")}e?g.oAuthSignOutRedirect(i,s):(G("signOut",g.user,"A user has been signed out"),i(w))}}),v.label=6;case 6:return[2]}})})});else return x.debug("Failed to get user from user pool"),[2,s(new Error("No current user."))];else x.debug("no Congito User pool"),s(new Error("Cognito User pool does not exist"));return[2]})})})]}})})},n.prototype.updateUserAttributes=function(t,e,r){var o=this;r===void 0&&(r=this._config.clientMetadata);var i=[],s=this;return new Promise(function(u,c){s.userSession(t).then(function(a){for(var f in e)if(f!=="sub"&&f.indexOf("_verified")<0){var l={Name:f,Value:e[f]};i.push(l)}t.updateAttributes(i,function(p,g,v){if(p)return G("updateUserAttributes_failure",p,"Failed to update attributes"),c(p);var m=o.createUpdateAttributesResultList(e,v==null?void 0:v.CodeDeliveryDetailsList);return G("updateUserAttributes",m,"Attributes successfully updated"),u(g)},r)})})},n.prototype.createUpdateAttributesResultList=function(t,e){var r={};return Object.keys(t).forEach(function(o){r[o]={isUpdated:!0};var i=e==null?void 0:e.find(function(s){return s.AttributeName===o});i&&(r[o].isUpdated=!1,r[o].codeDeliveryDetails=i)}),r},n.prototype.userAttributes=function(t){var e=this;return new Promise(function(r,o){e.userSession(t).then(function(i){t.getUserAttributes(function(s,u){s?o(s):r(u)})})})},n.prototype.verifiedContact=function(t){var e=this;return this.userAttributes(t).then(function(r){var o=e.attributesToObject(r),i={},s={};return o.email&&(o.email_verified?s.email=o.email:i.email=o.email),o.phone_number&&(o.phone_number_verified?s.phone_number=o.phone_number:i.phone_number=o.phone_number),{verified:s,unverified:i}})},n.prototype.isErrorWithMessage=function(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"message")},n.prototype.isTokenRevokedError=function(t){return this.isErrorWithMessage(t)&&t.message==="Access Token has been revoked"},n.prototype.isRefreshTokenRevokedError=function(t){return this.isErrorWithMessage(t)&&t.message==="Refresh Token has been revoked"},n.prototype.isUserDisabledError=function(t){return this.isErrorWithMessage(t)&&t.message==="User is disabled."},n.prototype.isUserDoesNotExistError=function(t){return this.isErrorWithMessage(t)&&t.message==="User does not exist."},n.prototype.isRefreshTokenExpiredError=function(t){return this.isErrorWithMessage(t)&&t.message==="Refresh Token has expired"},n.prototype.isPasswordResetRequiredError=function(t){return this.isErrorWithMessage(t)&&t.message==="Password reset required for the user"},n.prototype.isSignedInHostedUI=function(){return this._oAuthHandler&&this._storage.getItem("amplify-signin-with-hostedUI")==="true"},n.prototype.isSessionInvalid=function(t){return this.isUserDisabledError(t)||this.isUserDoesNotExistError(t)||this.isTokenRevokedError(t)||this.isRefreshTokenRevokedError(t)||this.isRefreshTokenExpiredError(t)||this.isPasswordResetRequiredError(t)},n.prototype.cleanUpInvalidSession=function(t){return W(this,void 0,void 0,function(){var e=this;return Y(this,function(r){switch(r.label){case 0:t.signOut(),this.user=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.cleanCachedItems()];case 2:return r.sent(),[3,4];case 3:return r.sent(),x.debug("failed to clear cached items"),[3,4];case 4:return this.isSignedInHostedUI()?[2,new Promise(function(o,i){e.oAuthSignOutRedirect(o,i)})]:(G("signOut",this.user,"A user has been signed out"),[2])}})})},n.prototype.currentUserPoolUser=function(t){var e=this;return this.userPool?new Promise(function(r,o){e._storageSync.then(function(){return W(e,void 0,void 0,function(){var i,s,u,c,a,f,l,p=this;return Y(this,function(g){switch(g.label){case 0:return this.isOAuthInProgress()?(x.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(v){var m=setTimeout(function(){x.debug("OAuth signIn in progress timeout"),ot.remove("auth",w),v()},rp);ot.listen("auth",w);function w(_){var S=_.payload,T=S.event;(T==="cognitoHostedUI"||T==="cognitoHostedUI_failure")&&(x.debug("OAuth signIn resolved: "+T),clearTimeout(m),ot.remove("auth",w),v())}})]):[3,2];case 1:g.sent(),g.label=2;case 2:if(i=this.userPool.getCurrentUser(),!i)return x.debug("Failed to get user from user pool"),o("No current user"),[2];g.label=3;case 3:return g.trys.push([3,7,,8]),[4,this._userSession(i)];case 4:return s=g.sent(),u=t?t.bypassCache:!1,u?[4,this.Credentials.clear()]:[3,6];case 5:g.sent(),g.label=6;case 6:if(c=this._config.clientMetadata,a=s.getAccessToken().decodePayload().scope,f=a===void 0?"":a,f.split(" ").includes(rs))i.getUserData(function(v,m){return W(p,void 0,void 0,function(){var w,_,S,T,I,N,D;return Y(this,function(U){switch(U.label){case 0:if(!v)return[3,7];if(x.debug("getting user data failed",v),!this.isSessionInvalid(v))return[3,5];U.label=1;case 1:return U.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(i)];case 2:return U.sent(),[3,4];case 3:return w=U.sent(),o(new Error("Session is invalid due to: "+v.message+" and failed to clean up invalid session: "+w.message)),[2];case 4:return o(v),[3,6];case 5:r(i),U.label=6;case 6:return[2];case 7:for(_=m.PreferredMfaSetting||"NOMFA",S=[],T=0;T<m.UserAttributes.length;T++)I={Name:m.UserAttributes[T].Name,Value:m.UserAttributes[T].Value},N=new Kt(I),S.push(N);return D=this.attributesToObject(S),Object.assign(i,{attributes:D,preferredMFA:_}),[2,r(i)]}})})},{bypassCache:u,clientMetadata:c});else return x.debug("Unable to get the user data because the "+rs+" is not in the scopes of the access token"),[2,r(i)];return[3,8];case 7:return l=g.sent(),o(l),[3,8];case 8:return[2]}})})}).catch(function(i){return x.debug("Failed to sync cache info into memory",i),o(i)})}):this.rejectNoUserPool()},n.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},n.prototype.currentAuthenticatedUser=function(t){return W(this,void 0,void 0,function(){var e,r,o,i,s;return Y(this,function(u){switch(u.label){case 0:x.debug("getting current authenticated user"),e=null,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this._storageSync];case 2:return u.sent(),[3,4];case 3:throw r=u.sent(),x.debug("Failed to sync cache info into memory",r),r;case 4:try{o=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")),o&&(e=Se(Se({},o.user),{token:o.token}))}catch{x.debug("cannot load federated user from auth storage")}return e?(this.user=e,x.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:x.debug("get current authenticated userpool user"),i=null,u.label=6;case 6:return u.trys.push([6,8,,9]),[4,this.currentUserPoolUser(t)];case 7:return i=u.sent(),[3,9];case 8:return s=u.sent(),s==="No userPool"&&x.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),x.debug("The user is not authenticated by the error",s),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=i,[2,this.user]}})})},n.prototype.currentSession=function(){var t=this;return x.debug("Getting current session"),this.userPool?new Promise(function(e,r){t.currentUserPoolUser().then(function(o){t.userSession(o).then(function(i){e(i)}).catch(function(i){x.debug("Failed to get the current session",i),r(i)})}).catch(function(o){x.debug("Failed to get the current user",o),r(o)})}):Promise.reject(new Error("No User Pool in the configuration."))},n.prototype._userSession=function(t){return W(this,void 0,void 0,function(){var e,r,o=this;return Y(this,function(i){switch(i.label){case 0:if(!t)return x.debug("the user is null"),[2,this.rejectAuthError(J.NoUserSession)];e=this._config.clientMetadata,this.inflightSessionPromiseCounter===0&&(this.inflightSessionPromise=new Promise(function(s,u){t.getSession(function(c,a){return W(o,void 0,void 0,function(){var f;return Y(this,function(l){switch(l.label){case 0:if(!c)return[3,5];if(x.debug("Failed to get the session from user",t),!this.isSessionInvalid(c))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return l.sent(),[3,4];case 3:return f=l.sent(),u(new Error("Session is invalid due to: "+c.message+" and failed to clean up invalid session: "+f.message)),[2];case 4:return u(c),[2];case 5:return x.debug("Succeed to get the user session",a),s(a),[2]}})})},{clientMetadata:e})})),this.inflightSessionPromiseCounter++,i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.inflightSessionPromise];case 2:return r=i.sent(),t.signInUserSession=r,[2,r];case 3:return this.inflightSessionPromiseCounter--,[7];case 4:return[2]}})})},n.prototype.userSession=function(t){return this._userSession(t)},n.prototype.currentUserCredentials=function(){return W(this,void 0,void 0,function(){var t,e,r=this;return Y(this,function(o){switch(o.label){case 0:x.debug("Getting current user credentials"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._storageSync];case 2:return o.sent(),[3,4];case 3:throw t=o.sent(),x.debug("Failed to sync cache info into memory",t),t;case 4:e=null;try{e=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(i){x.debug("failed to get or parse item aws-amplify-federatedInfo",i)}return e?[2,this.Credentials.refreshFederatedToken(e)]:[2,this.currentSession().then(function(i){return x.debug("getting session success",i),r.Credentials.set(i,"session")}).catch(function(){return x.debug("getting guest credentials"),r.Credentials.set(null,"guest")})]}})})},n.prototype.currentCredentials=function(){return x.debug("getting current credentials"),this.Credentials.get()},n.prototype.verifyUserAttribute=function(t,e,r){return r===void 0&&(r=this._config.clientMetadata),new Promise(function(o,i){t.getAttributeVerificationCode(e,{onSuccess:function(s){return o(s)},onFailure:function(s){return i(s)}},r)})},n.prototype.verifyUserAttributeSubmit=function(t,e,r){return r?new Promise(function(o,i){t.verifyAttribute(e,r,{onSuccess:function(s){o(s)},onFailure:function(s){i(s)}})}):this.rejectAuthError(J.EmptyCode)},n.prototype.verifyCurrentUserAttribute=function(t){var e=this;return e.currentUserPoolUser().then(function(r){return e.verifyUserAttribute(r,t)})},n.prototype.verifyCurrentUserAttributeSubmit=function(t,e){var r=this;return r.currentUserPoolUser().then(function(o){return r.verifyUserAttributeSubmit(o,t,e)})},n.prototype.cognitoIdentitySignOut=function(t,e){return W(this,void 0,void 0,function(){var r,o,i=this;return Y(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this._storageSync];case 1:return s.sent(),[3,3];case 2:throw r=s.sent(),x.debug("Failed to sync cache info into memory",r),r;case 3:return o=this._oAuthHandler&&this._storage.getItem("amplify-signin-with-hostedUI")==="true",[2,new Promise(function(u,c){if(t&&t.global){x.debug("user window sign out",e);var a=i._config.clientMetadata;e.getSession(function(f,l){return W(i,void 0,void 0,function(){var p,g=this;return Y(this,function(v){switch(v.label){case 0:if(!f)return[3,5];if(x.debug("failed to get the user session",f),!this.isSessionInvalid(f))return[3,4];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return v.sent(),[3,4];case 3:return p=v.sent(),c(new Error("Session is invalid due to: "+f.message+" and failed to clean up invalid session: "+p.message)),[2];case 4:return[2,c(f)];case 5:return e.globalSignOut({onSuccess:function(m){if(x.debug("window sign out success"),o)g.oAuthSignOutRedirect(u,c);else return u()},onFailure:function(m){return x.debug("window sign out failed",m),c(m)}}),[2]}})})},{clientMetadata:a})}else x.debug("user sign out",e),e.signOut(function(){if(o)i.oAuthSignOutRedirect(u,c);else return u()})})]}})})},n.prototype.oAuthSignOutRedirect=function(t,e){var r=et().isBrowser;r?this.oAuthSignOutRedirectOrReject(e):this.oAuthSignOutAndResolve(t)},n.prototype.oAuthSignOutAndResolve=function(t){this._oAuthHandler.signOut(),t()},n.prototype.oAuthSignOutRedirectOrReject=function(t){this._oAuthHandler.signOut(),setTimeout(function(){return t(Error("Signout timeout fail"))},3e3)},n.prototype.signOut=function(t){return t===void 0&&(t={}),W(this,void 0,void 0,function(){var e,r;return Y(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return o.sent(),[3,3];case 2:return o.sent(),x.debug("failed to clear cached items"),[3,3];case 3:if(!this.userPool)return[3,11];o.label=4;case 4:return o.trys.push([4,6,,7]),[4,this._storageSync];case 5:return o.sent(),[3,7];case 6:throw e=o.sent(),x.debug("Failed to sync cache info into memory",e),e;case 7:return r=this.userPool.getCurrentUser(),r?[4,this.cognitoIdentitySignOut(t,r)]:[3,9];case 8:return o.sent(),[3,10];case 9:x.debug("no current Cognito user"),o.label=10;case 10:return[3,12];case 11:x.debug("no Cognito User pool"),o.label=12;case 12:return G("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},n.prototype.cleanCachedItems=function(){return W(this,void 0,void 0,function(){return Y(this,function(t){switch(t.label){case 0:return[4,this.Credentials.clear()];case 1:return t.sent(),[2]}})})},n.prototype.changePassword=function(t,e,r,o){var i=this;return o===void 0&&(o=this._config.clientMetadata),new Promise(function(s,u){i.userSession(t).then(function(c){t.changePassword(e,r,function(a,f){return a?(x.debug("change password failure",a),u(a)):s(f)},o)})})},n.prototype.forgotPassword=function(t,e){if(e===void 0&&(e=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!t)return this.rejectAuthError(J.EmptyUsername);var r=this.createCognitoUser(t);return new Promise(function(o,i){r.forgotPassword({onSuccess:function(){o()},onFailure:function(s){x.debug("forgot password failure",s),G("forgotPassword_failure",s,t+" forgotPassword failed"),i(s)},inputVerificationCode:function(s){G("forgotPassword",r,t+" has initiated forgot password flow"),o(s)}},e)})},n.prototype.forgotPasswordSubmit=function(t,e,r,o){if(o===void 0&&(o=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!t)return this.rejectAuthError(J.EmptyUsername);if(!e)return this.rejectAuthError(J.EmptyCode);if(!r)return this.rejectAuthError(J.EmptyPassword);var i=this.createCognitoUser(t);return new Promise(function(s,u){i.confirmPassword(e,r,{onSuccess:function(c){G("forgotPasswordSubmit",i,t+" forgotPasswordSubmit successful"),s(c)},onFailure:function(c){G("forgotPasswordSubmit_failure",c,t+" forgotPasswordSubmit failed"),u(c)}},o)})},n.prototype.currentUserInfo=function(){return W(this,void 0,void 0,function(){var t,c,e,r,o,i,s,u,c;return Y(this,function(a){switch(a.label){case 0:return t=this.Credentials.getCredSource(),!t||t==="aws"||t==="userPool"?[4,this.currentUserPoolUser().catch(function(f){return x.error(f)})]:[3,9];case 1:if(c=a.sent(),!c)return[2,null];a.label=2;case 2:return a.trys.push([2,8,,9]),[4,this.userAttributes(c)];case 3:e=a.sent(),r=this.attributesToObject(e),o=null,a.label=4;case 4:return a.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return o=a.sent(),[3,7];case 6:return i=a.sent(),x.debug("Failed to retrieve credentials while getting current user info",i),[3,7];case 7:return s={id:o?o.identityId:void 0,username:c.getUsername(),attributes:r},[2,s];case 8:return u=a.sent(),x.error("currentUserInfo error",u),[2,{}];case 9:return t==="federated"?(c=this.user,[2,c||{}]):[2]}})})},n.prototype.federatedSignIn=function(t,e,r){return W(this,void 0,void 0,function(){var o,c,i,s,u,c,a,f,l,p,g,v;return Y(this,function(m){switch(m.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(typeof t>"u"&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return $r(t)||nh(t)||rh(t)||typeof t>"u"?(o=t||{provider:sr.Cognito},c=$r(o)?o.provider:o.customProvider,i=($r(o),o.customState),this._config.userPoolId&&(s=Nt(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,u=Nt(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,u,s,c,i)),[3,4]):[3,1];case 1:c=t;try{a=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user),a&&x.warn("There is already a signed in user: "+a+` in your app.
																	You should not call Auth.federatedSignIn method again as it may cause unexpected behavior.`)}catch{}return f=e.token,l=e.identity_id,p=e.expires_at,[4,this.Credentials.set({provider:c,token:f,identity_id:l,user:r,expires_at:p},"federation")];case 2:return g=m.sent(),[4,this.currentAuthenticatedUser()];case 3:return v=m.sent(),G("signIn",v,"A user "+v.username+" has been signed in"),x.debug("federated sign in credentials",g),[2,g];case 4:return[2]}})})},n.prototype._handleAuthResponse=function(t){return W(this,void 0,void 0,function(){var e,r,o,i,s,u,c,a,f,l,p,g,v,m;return Y(this,function(w){switch(w.label){case 0:if(this.oAuthFlowInProgress)return x.debug("Skipping URL "+t+" current flow in progress"),[2];w.label=1;case 1:if(w.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(G("parsingCallbackUrl",{url:t},"The callback url is being parsed"),e=t||(et().isBrowser?window.location.href:""),r=!!(at(e).query||"").split("&").map(function(_){return _.split("=")}).find(function(_){var S=ht(_,1),T=S[0];return T==="code"||T==="error"}),o=!!(at(e).hash||"#").substr(1).split("&").map(function(_){return _.split("=")}).find(function(_){var S=ht(_,1),T=S[0];return T==="access_token"||T==="error"}),!(r||o))return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),w.label=2;case 2:return w.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(e)];case 3:return i=w.sent(),s=i.accessToken,u=i.idToken,c=i.refreshToken,a=i.state,f=new Ii({IdToken:new Ti({IdToken:u}),RefreshToken:new Ai({RefreshToken:c}),AccessToken:new _i({AccessToken:s})}),l=void 0,this._config.identityPoolId?[4,this.Credentials.set(f,"session")]:[3,5];case 4:l=w.sent(),x.debug("AWS credentials",l),w.label=5;case 5:return p=/-/.test(a),g=this.createCognitoUser(f.getIdToken().decodePayload()["cognito:username"]),g.setSignInUserSession(f),window&&typeof window.history<"u"&&window.history.replaceState(window.history.state,"",this._config.oauth.redirectSignIn),G("signIn",g,"A user "+g.getUsername()+" has been signed in"),G("cognitoHostedUI",g,"A user "+g.getUsername()+" has been signed in via Cognito Hosted UI"),p&&(v=a.split("-").splice(1).join("-"),G("customOAuthState",ac(v),"State for user "+g.getUsername())),[2,l];case 6:return m=w.sent(),x.debug("Error in cognito hosted auth response",m),window&&typeof window.history<"u"&&window.history.replaceState(window.history.state,"",this._config.oauth.redirectSignIn),G("signIn_failure",m,"The OAuth response flow failed"),G("cognitoHostedUI_failure",m,"A failure occurred when returning to the Cognito Hosted UI"),G("customState_failure",m,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},n.prototype.essentialCredentials=function(t){return{accessKeyId:t.accessKeyId,sessionToken:t.sessionToken,secretAccessKey:t.secretAccessKey,identityId:t.identityId,authenticated:t.authenticated}},n.prototype.attributesToObject=function(t){var e=this,r={};return t&&t.map(function(o){o.Name==="email_verified"||o.Name==="phone_number_verified"?r[o.Name]=e.isTruthyString(o.Value)||o.Value===!0:r[o.Name]=o.Value}),r},n.prototype.isTruthyString=function(t){return typeof t.toLowerCase=="function"&&t.toLowerCase()==="true"},n.prototype.createCognitoUser=function(t){var e={Username:t,Pool:this.userPool};e.Storage=this._storage;var r=this._config.authenticationFlowType,o=new Ci(e);return r&&o.setAuthenticationFlowType(r),o},n.prototype._isValidAuthStorage=function(t){return!!t&&typeof t.getItem=="function"&&typeof t.setItem=="function"&&typeof t.removeItem=="function"&&typeof t.clear=="function"},n.prototype.noUserPoolErrorHandler=function(t){return t&&(!t.userPoolId||!t.identityPoolId)?J.MissingAuthConfig:J.NoConfig},n.prototype.rejectAuthError=function(t){return Promise.reject(new yt(t))},n.prototype.rejectNoUserPool=function(){var t=this.noUserPoolErrorHandler(this._config);return Promise.reject(new tp(t))},n.prototype.rememberDevice=function(){return W(this,void 0,void 0,function(){var t,e;return Y(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return t=r.sent(),[3,3];case 2:return e=r.sent(),x.debug("The user is not authenticated by the error",e),[2,Promise.reject("The user is not authenticated")];case 3:return t.getCachedDeviceKeyAndPassword(),[2,new Promise(function(o,i){t.setDeviceStatusRemembered({onSuccess:function(s){o(s)},onFailure:function(s){s.code==="InvalidParameterException"?i(new yt(J.DeviceConfig)):s.code==="NetworkError"?i(new yt(J.NetworkError)):i(s)}})})]}})})},n.prototype.forgetDevice=function(){return W(this,void 0,void 0,function(){var t,e;return Y(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return t=r.sent(),[3,3];case 2:return e=r.sent(),x.debug("The user is not authenticated by the error",e),[2,Promise.reject("The user is not authenticated")];case 3:return t.getCachedDeviceKeyAndPassword(),[2,new Promise(function(o,i){t.forgetDevice({onSuccess:function(s){o(s)},onFailure:function(s){s.code==="InvalidParameterException"?i(new yt(J.DeviceConfig)):s.code==="NetworkError"?i(new yt(J.NetworkError)):i(s)}})})]}})})},n.prototype.fetchDevices=function(){return W(this,void 0,void 0,function(){var t,e;return Y(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return t=r.sent(),[3,3];case 2:throw e=r.sent(),x.debug("The user is not authenticated by the error",e),new Error("The user is not authenticated");case 3:return t.getCachedDeviceKeyAndPassword(),[2,new Promise(function(o,i){var s={onSuccess:function(u){var c=u.Devices.map(function(a){var f=a.DeviceAttributes.find(function(p){var g=p.Name;return g==="device_name"})||{},l={id:a.DeviceKey,name:f.Value};return l});o(c)},onFailure:function(u){u.code==="InvalidParameterException"?i(new yt(J.DeviceConfig)):u.code==="NetworkError"?i(new yt(J.NetworkError)):i(u)}};t.listDevices(op,null,s)})]}})})},n}(),Yt=new ap(null);gt.register(Yt);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ki=function(n,t){return ki=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])},ki(n,t)};function up(n,t){ki(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var xt=function(){return xt=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},xt.apply(this,arguments)};function cp(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})}function fp(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dt=function(){return dt=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},dt.apply(this,arguments)};function lp(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(e[r[o]]=n[r[o]]);return e}function Jr(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})}function Xr(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function is(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return i}function Bn(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bn=function(e){return typeof e}:Bn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bn(n)}function hp(n){return Bn(n)=="object"&&n!==null}var Sa=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag";function Pi(n,t){for(var e=/\r\n|[\n\r]/g,r=1,o=t+1,i;(i=e.exec(n.body))&&i.index<t;)r+=1,o=t+1-(i.index+i[0].length);return{line:r,column:o}}function dp(n){return _a(n.source,Pi(n.source,n.start))}function _a(n,t){var e=n.locationOffset.column-1,r=jn(e)+n.body,o=t.line-1,i=n.locationOffset.line-1,s=t.line+i,u=t.line===1?e:0,c=t.column+u,a="".concat(n.name,":").concat(s,":").concat(c,`
`),f=r.split(/\r\n|[\n\r]/g),l=f[o];if(l.length>120){for(var p=Math.floor(c/80),g=c%80,v=[],m=0;m<l.length;m+=80)v.push(l.slice(m,m+80));return a+os([["".concat(s),v[0]]].concat(v.slice(1,p+1).map(function(w){return["",w]}),[[" ",jn(g-1)+"^"],["",v[p+1]]]))}return a+os([["".concat(s-1),f[o-1]],["".concat(s),l],["",jn(c-1)+"^"],["".concat(s+1),f[o+1]]])}function os(n){var t=n.filter(function(r){r[0];var o=r[1];return o!==void 0}),e=Math.max.apply(Math,t.map(function(r){var o=r[0];return o.length}));return t.map(function(r){var o=r[0],i=r[1];return pp(e,o)+(i?" | "+i:" |")}).join(`
`)}function jn(n){return Array(n+1).join(" ")}function pp(n,t){return jn(n-t.length)+t}function Kn(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Kn=function(e){return typeof e}:Kn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kn(n)}function ss(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),e.push.apply(e,r)}return e}function gp(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ss(Object(e),!0).forEach(function(r){vp(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ss(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function vp(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function yp(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function as(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function mp(n,t,e){return t&&as(n.prototype,t),e&&as(n,e),n}function bp(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&mn(n,t)}function wp(n){var t=Ta();return function(){var r=bn(n),o;if(t){var i=bn(this).constructor;o=Reflect.construct(r,arguments,i)}else o=r.apply(this,arguments);return Ea(this,o)}}function Ea(n,t){return t&&(Kn(t)==="object"||typeof t=="function")?t:un(n)}function un(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ui(n){var t=typeof Map=="function"?new Map:void 0;return Ui=function(r){if(r===null||!Sp(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,o)}function o(){return qn(r,arguments,bn(this).constructor)}return o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),mn(o,r)},Ui(n)}function qn(n,t,e){return Ta()?qn=Reflect.construct:qn=function(o,i,s){var u=[null];u.push.apply(u,i);var c=Function.bind.apply(o,u),a=new c;return s&&mn(a,s.prototype),a},qn.apply(null,arguments)}function Ta(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Sp(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function mn(n,t){return mn=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},mn(n,t)}function bn(n){return bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bn(n)}var Ht=function(n){bp(e,n);var t=wp(e);function e(r,o,i,s,u,c,a){var f,l,p,g;yp(this,e),g=t.call(this,r),g.name="GraphQLError",g.originalError=c??void 0,g.nodes=us(Array.isArray(o)?o:o?[o]:void 0);for(var v=[],m=0,w=(_=g.nodes)!==null&&_!==void 0?_:[];m<w.length;m++){var _,S=w[m],T=S.loc;T!=null&&v.push(T)}v=us(v),g.source=i??((f=v)===null||f===void 0?void 0:f[0].source),g.positions=s??((l=v)===null||l===void 0?void 0:l.map(function(N){return N.start})),g.locations=s&&i?s.map(function(N){return Pi(i,N)}):(p=v)===null||p===void 0?void 0:p.map(function(N){return Pi(N.source,N.start)}),g.path=u??void 0;var I=c==null?void 0:c.extensions;return a==null&&hp(I)?g.extensions=gp({},I):g.extensions=a??{},Object.defineProperties(un(g),{message:{enumerable:!0},locations:{enumerable:g.locations!=null},path:{enumerable:g.path!=null},extensions:{enumerable:g.extensions!=null&&Object.keys(g.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?(Object.defineProperty(un(g),"stack",{value:c.stack,writable:!0,configurable:!0}),Ea(g)):(Error.captureStackTrace?Error.captureStackTrace(un(g),e):Object.defineProperty(un(g),"stack",{value:Error().stack,writable:!0,configurable:!0}),g)}return mp(e,[{key:"toString",value:function(){return _p(this)}},{key:Sa,get:function(){return"Object"}}]),e}(Ui(Error));function us(n){return n===void 0||n.length===0?void 0:n}function _p(n){var t=n.message;if(n.nodes)for(var e=0,r=n.nodes;e<r.length;e++){var o=r[e];o.loc&&(t+=`

`+dp(o.loc))}else if(n.source&&n.locations)for(var i=0,s=n.locations;i<s.length;i++){var u=s[i];t+=`

`+_a(n.source,u)}return t}function Me(n,t,e){return new Ht("Syntax Error: ".concat(e),void 0,n,[t])}var j=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});function Ep(n,t){var e=!!n;if(!e)throw new Error(t??"Unexpected invariant triggered.")}var Tp=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0;const Fi=Tp;function Aa(n){var t=n.prototype.toJSON;typeof t=="function"||Ep(0),n.prototype.inspect=t,Fi&&(n.prototype[Fi]=t)}var Ia=function(){function n(e,r,o){this.start=e.start,this.end=r.end,this.startToken=e,this.endToken=r,this.source=o}var t=n.prototype;return t.toJSON=function(){return{start:this.start,end:this.end}},n}();Aa(Ia);var ce=function(){function n(e,r,o,i,s,u,c){this.kind=e,this.start=r,this.end=o,this.line=i,this.column=s,this.value=c,this.prev=u,this.next=null}var t=n.prototype;return t.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},n}();Aa(ce);function cs(n){return n!=null&&typeof n.kind=="string"}var C=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function Vn(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vn=function(e){return typeof e}:Vn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(n)}var Ap=10,Ca=2;function Oa(n){return Er(n,[])}function Er(n,t){switch(Vn(n)){case"string":return JSON.stringify(n);case"function":return n.name?"[function ".concat(n.name,"]"):"[function]";case"object":return n===null?"null":Ip(n,t);default:return String(n)}}function Ip(n,t){if(t.indexOf(n)!==-1)return"[Circular]";var e=[].concat(t,[n]),r=xp(n);if(r!==void 0){var o=r.call(n);if(o!==n)return typeof o=="string"?o:Er(o,e)}else if(Array.isArray(n))return Op(n,e);return Cp(n,e)}function Cp(n,t){var e=Object.keys(n);if(e.length===0)return"{}";if(t.length>Ca)return"["+Np(n)+"]";var r=e.map(function(o){var i=Er(n[o],t);return o+": "+i});return"{ "+r.join(", ")+" }"}function Op(n,t){if(n.length===0)return"[]";if(t.length>Ca)return"[Array]";for(var e=Math.min(Ap,n.length),r=n.length-e,o=[],i=0;i<e;++i)o.push(Er(n[i],t));return r===1?o.push("... 1 more item"):r>1&&o.push("... ".concat(r," more items")),"["+o.join(", ")+"]"}function xp(n){var t=n[String(Fi)];if(typeof t=="function")return t;if(typeof n.inspect=="function")return n.inspect}function Np(n){var t=Object.prototype.toString.call(n).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof n.constructor=="function"){var e=n.constructor.name;if(typeof e=="string"&&e!=="")return e}return t}function Qr(n,t){var e=!!n;if(!e)throw new Error(t)}const Rp=function(t,e){return t instanceof e};function fs(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Dp(n,t,e){return t&&fs(n.prototype,t),e&&fs(n,e),n}var xa=function(){function n(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof t=="string"||Qr(0,"Body must be a string. Received: ".concat(Oa(t),".")),this.body=t,this.name=e,this.locationOffset=r,this.locationOffset.line>0||Qr(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Qr(0,"column in locationOffset is 1-indexed and must be positive.")}return Dp(n,[{key:Sa,get:function(){return"Source"}}]),n}();function kp(n){return Rp(n,xa)}var Pp=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Up(n){var t=n.split(/\r\n|[\n\r]/g),e=Fp(n);if(e!==0)for(var r=1;r<t.length;r++)t[r]=t[r].slice(e);for(var o=0;o<t.length&&ls(t[o]);)++o;for(var i=t.length;i>o&&ls(t[i-1]);)--i;return t.slice(o,i).join(`
`)}function ls(n){for(var t=0;t<n.length;++t)if(n[t]!==" "&&n[t]!=="	")return!1;return!0}function Fp(n){for(var t,e=!0,r=!0,o=0,i=null,s=0;s<n.length;++s)switch(n.charCodeAt(s)){case 13:n.charCodeAt(s+1)===10&&++s;case 10:e=!1,r=!0,o=0;break;case 9:case 32:++o;break;default:r&&!e&&(i===null||o<i)&&(i=o),r=!1}return(t=i)!==null&&t!==void 0?t:0}function Mp(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=n.indexOf(`
`)===-1,o=n[0]===" "||n[0]==="	",i=n[n.length-1]==='"',s=n[n.length-1]==="\\",u=!r||i||s||e,c="";return u&&!(r&&o)&&(c+=`
`+t),c+=t?n.replace(/\n/g,`
`+t):n,u&&(c+=`
`),'"""'+c.replace(/"""/g,'\\"""')+'"""'}var Lp=function(){function n(e){var r=new ce(C.SOF,0,0,0,0,null);this.source=e,this.lastToken=r,this.token=r,this.line=1,this.lineStart=0}var t=n.prototype;return t.advance=function(){this.lastToken=this.token;var r=this.token=this.lookahead();return r},t.lookahead=function(){var r=this.token;if(r.kind!==C.EOF)do{var o;r=(o=r.next)!==null&&o!==void 0?o:r.next=jp(this,r)}while(r.kind===C.COMMENT);return r},n}();function Bp(n){return n===C.BANG||n===C.DOLLAR||n===C.AMP||n===C.PAREN_L||n===C.PAREN_R||n===C.SPREAD||n===C.COLON||n===C.EQUALS||n===C.AT||n===C.BRACKET_L||n===C.BRACKET_R||n===C.BRACE_L||n===C.PIPE||n===C.BRACE_R}function Dt(n){return isNaN(n)?C.EOF:n<127?JSON.stringify(String.fromCharCode(n)):'"\\u'.concat(("00"+n.toString(16).toUpperCase()).slice(-4),'"')}function jp(n,t){for(var e=n.source,r=e.body,o=r.length,i=t.end;i<o;){var s=r.charCodeAt(i),u=n.line,c=1+i-n.lineStart;switch(s){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++n.line,n.lineStart=i;continue;case 13:r.charCodeAt(i+1)===10?i+=2:++i,++n.line,n.lineStart=i;continue;case 33:return new ce(C.BANG,i,i+1,u,c,t);case 35:return qp(e,i,u,c,t);case 36:return new ce(C.DOLLAR,i,i+1,u,c,t);case 38:return new ce(C.AMP,i,i+1,u,c,t);case 40:return new ce(C.PAREN_L,i,i+1,u,c,t);case 41:return new ce(C.PAREN_R,i,i+1,u,c,t);case 46:if(r.charCodeAt(i+1)===46&&r.charCodeAt(i+2)===46)return new ce(C.SPREAD,i,i+3,u,c,t);break;case 58:return new ce(C.COLON,i,i+1,u,c,t);case 61:return new ce(C.EQUALS,i,i+1,u,c,t);case 64:return new ce(C.AT,i,i+1,u,c,t);case 91:return new ce(C.BRACKET_L,i,i+1,u,c,t);case 93:return new ce(C.BRACKET_R,i,i+1,u,c,t);case 123:return new ce(C.BRACE_L,i,i+1,u,c,t);case 124:return new ce(C.PIPE,i,i+1,u,c,t);case 125:return new ce(C.BRACE_R,i,i+1,u,c,t);case 34:return r.charCodeAt(i+1)===34&&r.charCodeAt(i+2)===34?Gp(e,i,u,c,t,n):Hp(e,i,u,c,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Vp(e,i,s,u,c,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return zp(e,i,u,c,t)}throw Me(e,i,Kp(s))}var a=n.line,f=1+i-n.lineStart;return new ce(C.EOF,o,o,a,f,t)}function Kp(n){return n<32&&n!==9&&n!==10&&n!==13?"Cannot contain the invalid character ".concat(Dt(n),"."):n===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(Dt(n),".")}function qp(n,t,e,r,o){var i=n.body,s,u=t;do s=i.charCodeAt(++u);while(!isNaN(s)&&(s>31||s===9));return new ce(C.COMMENT,t,u,e,r,o,i.slice(t+1,u))}function Vp(n,t,e,r,o,i){var s=n.body,u=e,c=t,a=!1;if(u===45&&(u=s.charCodeAt(++c)),u===48){if(u=s.charCodeAt(++c),u>=48&&u<=57)throw Me(n,c,"Invalid number, unexpected digit after 0: ".concat(Dt(u),"."))}else c=Zr(n,c,u),u=s.charCodeAt(c);if(u===46&&(a=!0,u=s.charCodeAt(++c),c=Zr(n,c,u),u=s.charCodeAt(c)),(u===69||u===101)&&(a=!0,u=s.charCodeAt(++c),(u===43||u===45)&&(u=s.charCodeAt(++c)),c=Zr(n,c,u),u=s.charCodeAt(c)),u===46||Wp(u))throw Me(n,c,"Invalid number, expected digit but got: ".concat(Dt(u),"."));return new ce(a?C.FLOAT:C.INT,t,c,r,o,i,s.slice(t,c))}function Zr(n,t,e){var r=n.body,o=t,i=e;if(i>=48&&i<=57){do i=r.charCodeAt(++o);while(i>=48&&i<=57);return o}throw Me(n,o,"Invalid number, expected digit but got: ".concat(Dt(i),"."))}function Hp(n,t,e,r,o){for(var i=n.body,s=t+1,u=s,c=0,a="";s<i.length&&!isNaN(c=i.charCodeAt(s))&&c!==10&&c!==13;){if(c===34)return a+=i.slice(u,s),new ce(C.STRING,t,s+1,e,r,o,a);if(c<32&&c!==9)throw Me(n,s,"Invalid character within String: ".concat(Dt(c),"."));if(++s,c===92){switch(a+=i.slice(u,s-1),c=i.charCodeAt(s),c){case 34:a+='"';break;case 47:a+="/";break;case 92:a+="\\";break;case 98:a+="\b";break;case 102:a+="\f";break;case 110:a+=`
`;break;case 114:a+="\r";break;case 116:a+="	";break;case 117:{var f=$p(i.charCodeAt(s+1),i.charCodeAt(s+2),i.charCodeAt(s+3),i.charCodeAt(s+4));if(f<0){var l=i.slice(s+1,s+5);throw Me(n,s,"Invalid character escape sequence: \\u".concat(l,"."))}a+=String.fromCharCode(f),s+=4;break}default:throw Me(n,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}++s,u=s}}throw Me(n,s,"Unterminated string.")}function Gp(n,t,e,r,o,i){for(var s=n.body,u=t+3,c=u,a=0,f="";u<s.length&&!isNaN(a=s.charCodeAt(u));){if(a===34&&s.charCodeAt(u+1)===34&&s.charCodeAt(u+2)===34)return f+=s.slice(c,u),new ce(C.BLOCK_STRING,t,u+3,e,r,o,Up(f));if(a<32&&a!==9&&a!==10&&a!==13)throw Me(n,u,"Invalid character within String: ".concat(Dt(a),"."));a===10?(++u,++i.line,i.lineStart=u):a===13?(s.charCodeAt(u+1)===10?u+=2:++u,++i.line,i.lineStart=u):a===92&&s.charCodeAt(u+1)===34&&s.charCodeAt(u+2)===34&&s.charCodeAt(u+3)===34?(f+=s.slice(c,u)+'"""',u+=4,c=u):++u}throw Me(n,u,"Unterminated string.")}function $p(n,t,e,r){return kn(n)<<12|kn(t)<<8|kn(e)<<4|kn(r)}function kn(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:-1}function zp(n,t,e,r,o){for(var i=n.body,s=i.length,u=t+1,c=0;u!==s&&!isNaN(c=i.charCodeAt(u))&&(c===95||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++u;return new ce(C.NAME,t,u,e,r,o,i.slice(t,u))}function Wp(n){return n===95||n>=65&&n<=90||n>=97&&n<=122}function ei(n,t){var e=new Yp(n,t);return e.parseDocument()}var Yp=function(){function n(e,r){var o=kp(e)?e:new xa(e);this._lexer=new Lp(o),this._options=r}var t=n.prototype;return t.parseName=function(){var r=this.expectToken(C.NAME);return{kind:j.NAME,value:r.value,loc:this.loc(r)}},t.parseDocument=function(){var r=this._lexer.token;return{kind:j.DOCUMENT,definitions:this.many(C.SOF,this.parseDefinition,C.EOF),loc:this.loc(r)}},t.parseDefinition=function(){if(this.peek(C.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(C.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var r=this._lexer.token;if(this.peek(C.BRACE_L))return{kind:j.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(r)};var o=this.parseOperationType(),i;return this.peek(C.NAME)&&(i=this.parseName()),{kind:j.OPERATION_DEFINITION,operation:o,name:i,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(r)}},t.parseOperationType=function(){var r=this.expectToken(C.NAME);switch(r.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(r)},t.parseVariableDefinitions=function(){return this.optionalMany(C.PAREN_L,this.parseVariableDefinition,C.PAREN_R)},t.parseVariableDefinition=function(){var r=this._lexer.token;return{kind:j.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(C.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(C.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(r)}},t.parseVariable=function(){var r=this._lexer.token;return this.expectToken(C.DOLLAR),{kind:j.VARIABLE,name:this.parseName(),loc:this.loc(r)}},t.parseSelectionSet=function(){var r=this._lexer.token;return{kind:j.SELECTION_SET,selections:this.many(C.BRACE_L,this.parseSelection,C.BRACE_R),loc:this.loc(r)}},t.parseSelection=function(){return this.peek(C.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var r=this._lexer.token,o=this.parseName(),i,s;return this.expectOptionalToken(C.COLON)?(i=o,s=this.parseName()):s=o,{kind:j.FIELD,alias:i,name:s,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(C.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(r)}},t.parseArguments=function(r){var o=r?this.parseConstArgument:this.parseArgument;return this.optionalMany(C.PAREN_L,o,C.PAREN_R)},t.parseArgument=function(){var r=this._lexer.token,o=this.parseName();return this.expectToken(C.COLON),{kind:j.ARGUMENT,name:o,value:this.parseValueLiteral(!1),loc:this.loc(r)}},t.parseConstArgument=function(){var r=this._lexer.token;return{kind:j.ARGUMENT,name:this.parseName(),value:(this.expectToken(C.COLON),this.parseValueLiteral(!0)),loc:this.loc(r)}},t.parseFragment=function(){var r=this._lexer.token;this.expectToken(C.SPREAD);var o=this.expectOptionalKeyword("on");return!o&&this.peek(C.NAME)?{kind:j.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(r)}:{kind:j.INLINE_FRAGMENT,typeCondition:o?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(r)}},t.parseFragmentDefinition=function(){var r,o=this._lexer.token;return this.expectKeyword("fragment"),((r=this._options)===null||r===void 0?void 0:r.experimentalFragmentVariables)===!0?{kind:j.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(o)}:{kind:j.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(o)}},t.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(r){var o=this._lexer.token;switch(o.kind){case C.BRACKET_L:return this.parseList(r);case C.BRACE_L:return this.parseObject(r);case C.INT:return this._lexer.advance(),{kind:j.INT,value:o.value,loc:this.loc(o)};case C.FLOAT:return this._lexer.advance(),{kind:j.FLOAT,value:o.value,loc:this.loc(o)};case C.STRING:case C.BLOCK_STRING:return this.parseStringLiteral();case C.NAME:switch(this._lexer.advance(),o.value){case"true":return{kind:j.BOOLEAN,value:!0,loc:this.loc(o)};case"false":return{kind:j.BOOLEAN,value:!1,loc:this.loc(o)};case"null":return{kind:j.NULL,loc:this.loc(o)};default:return{kind:j.ENUM,value:o.value,loc:this.loc(o)}}case C.DOLLAR:if(!r)return this.parseVariable();break}throw this.unexpected()},t.parseStringLiteral=function(){var r=this._lexer.token;return this._lexer.advance(),{kind:j.STRING,value:r.value,block:r.kind===C.BLOCK_STRING,loc:this.loc(r)}},t.parseList=function(r){var o=this,i=this._lexer.token,s=function(){return o.parseValueLiteral(r)};return{kind:j.LIST,values:this.any(C.BRACKET_L,s,C.BRACKET_R),loc:this.loc(i)}},t.parseObject=function(r){var o=this,i=this._lexer.token,s=function(){return o.parseObjectField(r)};return{kind:j.OBJECT,fields:this.any(C.BRACE_L,s,C.BRACE_R),loc:this.loc(i)}},t.parseObjectField=function(r){var o=this._lexer.token,i=this.parseName();return this.expectToken(C.COLON),{kind:j.OBJECT_FIELD,name:i,value:this.parseValueLiteral(r),loc:this.loc(o)}},t.parseDirectives=function(r){for(var o=[];this.peek(C.AT);)o.push(this.parseDirective(r));return o},t.parseDirective=function(r){var o=this._lexer.token;return this.expectToken(C.AT),{kind:j.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(r),loc:this.loc(o)}},t.parseTypeReference=function(){var r=this._lexer.token,o;return this.expectOptionalToken(C.BRACKET_L)?(o=this.parseTypeReference(),this.expectToken(C.BRACKET_R),o={kind:j.LIST_TYPE,type:o,loc:this.loc(r)}):o=this.parseNamedType(),this.expectOptionalToken(C.BANG)?{kind:j.NON_NULL_TYPE,type:o,loc:this.loc(r)}:o},t.parseNamedType=function(){var r=this._lexer.token;return{kind:j.NAMED_TYPE,name:this.parseName(),loc:this.loc(r)}},t.parseTypeSystemDefinition=function(){var r=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(r.kind===C.NAME)switch(r.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(r)},t.peekDescription=function(){return this.peek(C.STRING)||this.peek(C.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("schema");var i=this.parseDirectives(!0),s=this.many(C.BRACE_L,this.parseOperationTypeDefinition,C.BRACE_R);return{kind:j.SCHEMA_DEFINITION,description:o,directives:i,operationTypes:s,loc:this.loc(r)}},t.parseOperationTypeDefinition=function(){var r=this._lexer.token,o=this.parseOperationType();this.expectToken(C.COLON);var i=this.parseNamedType();return{kind:j.OPERATION_TYPE_DEFINITION,operation:o,type:i,loc:this.loc(r)}},t.parseScalarTypeDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("scalar");var i=this.parseName(),s=this.parseDirectives(!0);return{kind:j.SCALAR_TYPE_DEFINITION,description:o,name:i,directives:s,loc:this.loc(r)}},t.parseObjectTypeDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("type");var i=this.parseName(),s=this.parseImplementsInterfaces(),u=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:j.OBJECT_TYPE_DEFINITION,description:o,name:i,interfaces:s,directives:u,fields:c,loc:this.loc(r)}},t.parseImplementsInterfaces=function(){var r;if(!this.expectOptionalKeyword("implements"))return[];if(((r=this._options)===null||r===void 0?void 0:r.allowLegacySDLImplementsInterfaces)===!0){var o=[];this.expectOptionalToken(C.AMP);do o.push(this.parseNamedType());while(this.expectOptionalToken(C.AMP)||this.peek(C.NAME));return o}return this.delimitedMany(C.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var r;return((r=this._options)===null||r===void 0?void 0:r.allowLegacySDLEmptyFields)===!0&&this.peek(C.BRACE_L)&&this._lexer.lookahead().kind===C.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(C.BRACE_L,this.parseFieldDefinition,C.BRACE_R)},t.parseFieldDefinition=function(){var r=this._lexer.token,o=this.parseDescription(),i=this.parseName(),s=this.parseArgumentDefs();this.expectToken(C.COLON);var u=this.parseTypeReference(),c=this.parseDirectives(!0);return{kind:j.FIELD_DEFINITION,description:o,name:i,arguments:s,type:u,directives:c,loc:this.loc(r)}},t.parseArgumentDefs=function(){return this.optionalMany(C.PAREN_L,this.parseInputValueDef,C.PAREN_R)},t.parseInputValueDef=function(){var r=this._lexer.token,o=this.parseDescription(),i=this.parseName();this.expectToken(C.COLON);var s=this.parseTypeReference(),u;this.expectOptionalToken(C.EQUALS)&&(u=this.parseValueLiteral(!0));var c=this.parseDirectives(!0);return{kind:j.INPUT_VALUE_DEFINITION,description:o,name:i,type:s,defaultValue:u,directives:c,loc:this.loc(r)}},t.parseInterfaceTypeDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("interface");var i=this.parseName(),s=this.parseImplementsInterfaces(),u=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:j.INTERFACE_TYPE_DEFINITION,description:o,name:i,interfaces:s,directives:u,fields:c,loc:this.loc(r)}},t.parseUnionTypeDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("union");var i=this.parseName(),s=this.parseDirectives(!0),u=this.parseUnionMemberTypes();return{kind:j.UNION_TYPE_DEFINITION,description:o,name:i,directives:s,types:u,loc:this.loc(r)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(C.EQUALS)?this.delimitedMany(C.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("enum");var i=this.parseName(),s=this.parseDirectives(!0),u=this.parseEnumValuesDefinition();return{kind:j.ENUM_TYPE_DEFINITION,description:o,name:i,directives:s,values:u,loc:this.loc(r)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(C.BRACE_L,this.parseEnumValueDefinition,C.BRACE_R)},t.parseEnumValueDefinition=function(){var r=this._lexer.token,o=this.parseDescription(),i=this.parseName(),s=this.parseDirectives(!0);return{kind:j.ENUM_VALUE_DEFINITION,description:o,name:i,directives:s,loc:this.loc(r)}},t.parseInputObjectTypeDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("input");var i=this.parseName(),s=this.parseDirectives(!0),u=this.parseInputFieldsDefinition();return{kind:j.INPUT_OBJECT_TYPE_DEFINITION,description:o,name:i,directives:s,fields:u,loc:this.loc(r)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(C.BRACE_L,this.parseInputValueDef,C.BRACE_R)},t.parseTypeSystemExtension=function(){var r=this._lexer.lookahead();if(r.kind===C.NAME)switch(r.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(r)},t.parseSchemaExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var o=this.parseDirectives(!0),i=this.optionalMany(C.BRACE_L,this.parseOperationTypeDefinition,C.BRACE_R);if(o.length===0&&i.length===0)throw this.unexpected();return{kind:j.SCHEMA_EXTENSION,directives:o,operationTypes:i,loc:this.loc(r)}},t.parseScalarTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var o=this.parseName(),i=this.parseDirectives(!0);if(i.length===0)throw this.unexpected();return{kind:j.SCALAR_TYPE_EXTENSION,name:o,directives:i,loc:this.loc(r)}},t.parseObjectTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var o=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),u=this.parseFieldsDefinition();if(i.length===0&&s.length===0&&u.length===0)throw this.unexpected();return{kind:j.OBJECT_TYPE_EXTENSION,name:o,interfaces:i,directives:s,fields:u,loc:this.loc(r)}},t.parseInterfaceTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var o=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),u=this.parseFieldsDefinition();if(i.length===0&&s.length===0&&u.length===0)throw this.unexpected();return{kind:j.INTERFACE_TYPE_EXTENSION,name:o,interfaces:i,directives:s,fields:u,loc:this.loc(r)}},t.parseUnionTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var o=this.parseName(),i=this.parseDirectives(!0),s=this.parseUnionMemberTypes();if(i.length===0&&s.length===0)throw this.unexpected();return{kind:j.UNION_TYPE_EXTENSION,name:o,directives:i,types:s,loc:this.loc(r)}},t.parseEnumTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var o=this.parseName(),i=this.parseDirectives(!0),s=this.parseEnumValuesDefinition();if(i.length===0&&s.length===0)throw this.unexpected();return{kind:j.ENUM_TYPE_EXTENSION,name:o,directives:i,values:s,loc:this.loc(r)}},t.parseInputObjectTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var o=this.parseName(),i=this.parseDirectives(!0),s=this.parseInputFieldsDefinition();if(i.length===0&&s.length===0)throw this.unexpected();return{kind:j.INPUT_OBJECT_TYPE_EXTENSION,name:o,directives:i,fields:s,loc:this.loc(r)}},t.parseDirectiveDefinition=function(){var r=this._lexer.token,o=this.parseDescription();this.expectKeyword("directive"),this.expectToken(C.AT);var i=this.parseName(),s=this.parseArgumentDefs(),u=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var c=this.parseDirectiveLocations();return{kind:j.DIRECTIVE_DEFINITION,description:o,name:i,arguments:s,repeatable:u,locations:c,loc:this.loc(r)}},t.parseDirectiveLocations=function(){return this.delimitedMany(C.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var r=this._lexer.token,o=this.parseName();if(Pp[o.value]!==void 0)return o;throw this.unexpected(r)},t.loc=function(r){var o;if(((o=this._options)===null||o===void 0?void 0:o.noLocation)!==!0)return new Ia(r,this._lexer.lastToken,this._lexer.source)},t.peek=function(r){return this._lexer.token.kind===r},t.expectToken=function(r){var o=this._lexer.token;if(o.kind===r)return this._lexer.advance(),o;throw Me(this._lexer.source,o.start,"Expected ".concat(Na(r),", found ").concat(ti(o),"."))},t.expectOptionalToken=function(r){var o=this._lexer.token;if(o.kind===r)return this._lexer.advance(),o},t.expectKeyword=function(r){var o=this._lexer.token;if(o.kind===C.NAME&&o.value===r)this._lexer.advance();else throw Me(this._lexer.source,o.start,'Expected "'.concat(r,'", found ').concat(ti(o),"."))},t.expectOptionalKeyword=function(r){var o=this._lexer.token;return o.kind===C.NAME&&o.value===r?(this._lexer.advance(),!0):!1},t.unexpected=function(r){var o=r??this._lexer.token;return Me(this._lexer.source,o.start,"Unexpected ".concat(ti(o),"."))},t.any=function(r,o,i){this.expectToken(r);for(var s=[];!this.expectOptionalToken(i);)s.push(o.call(this));return s},t.optionalMany=function(r,o,i){if(this.expectOptionalToken(r)){var s=[];do s.push(o.call(this));while(!this.expectOptionalToken(i));return s}return[]},t.many=function(r,o,i){this.expectToken(r);var s=[];do s.push(o.call(this));while(!this.expectOptionalToken(i));return s},t.delimitedMany=function(r,o){this.expectOptionalToken(r);var i=[];do i.push(o.call(this));while(this.expectOptionalToken(r));return i},n}();function ti(n){var t=n.value;return Na(n.kind)+(t!=null?' "'.concat(t,'"'):"")}function Na(n){return Bp(n)?'"'.concat(n,'"'):n}var Jp={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Xp=Object.freeze({});function Qp(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jp,r=void 0,o=Array.isArray(n),i=[n],s=-1,u=[],c=void 0,a=void 0,f=void 0,l=[],p=[],g=n;do{s++;var v=s===i.length,m=v&&u.length!==0;if(v){if(a=p.length===0?void 0:l[l.length-1],c=f,f=p.pop(),m){if(o)c=c.slice();else{for(var w={},_=0,S=Object.keys(c);_<S.length;_++){var T=S[_];w[T]=c[T]}c=w}for(var I=0,N=0;N<u.length;N++){var D=u[N][0],U=u[N][1];o&&(D-=I),o&&U===null?(c.splice(D,1),I++):c[D]=U}}s=r.index,i=r.keys,u=r.edits,o=r.inArray,r=r.prev}else{if(a=f?o?s:i[s]:void 0,c=f?f[a]:g,c==null)continue;f&&l.push(a)}var k=void 0;if(!Array.isArray(c)){if(!cs(c))throw new Error("Invalid AST Node: ".concat(Oa(c),"."));var B=Zp(t,c.kind,v);if(B){if(k=B.call(t,c,a,f,l,p),k===Xp)break;if(k===!1){if(!v){l.pop();continue}}else if(k!==void 0&&(u.push([a,k]),!v))if(cs(k))c=k;else{l.pop();continue}}}if(k===void 0&&m&&u.push([a,c]),v)l.pop();else{var K;r={inArray:o,index:s,keys:i,edits:u,prev:r},o=Array.isArray(c),i=o?c:(K=e[c.kind])!==null&&K!==void 0?K:[],s=-1,u=[],f&&p.push(f),f=c}}while(r!==void 0);return u.length!==0&&(g=u[u.length-1][1]),g}function Zp(n,t,e){var r=n[t];if(r){if(!e&&typeof r=="function")return r;var o=e?r.leave:r.enter;if(typeof o=="function")return o}else{var i=e?n.leave:n.enter;if(i){if(typeof i=="function")return i;var s=i[t];if(typeof s=="function")return s}}}function ni(n){return Qp(n,{leave:tg})}var eg=80,tg={Name:function(t){return t.value},Variable:function(t){return"$"+t.name},Document:function(t){return F(t.definitions,`

`)+`
`},OperationDefinition:function(t){var e=t.operation,r=t.name,o=se("(",F(t.variableDefinitions,", "),")"),i=F(t.directives," "),s=t.selectionSet;return!r&&!i&&!o&&e==="query"?s:F([e,F([r,o]),i,s]," ")},VariableDefinition:function(t){var e=t.variable,r=t.type,o=t.defaultValue,i=t.directives;return e+": "+r+se(" = ",o)+se(" ",F(i," "))},SelectionSet:function(t){var e=t.selections;return ze(e)},Field:function(t){var e=t.alias,r=t.name,o=t.arguments,i=t.directives,s=t.selectionSet,u=se("",e,": ")+r,c=u+se("(",F(o,", "),")");return c.length>eg&&(c=u+se(`(
`,Hn(F(o,`
`)),`
)`)),F([c,F(i," "),s]," ")},Argument:function(t){var e=t.name,r=t.value;return e+": "+r},FragmentSpread:function(t){var e=t.name,r=t.directives;return"..."+e+se(" ",F(r," "))},InlineFragment:function(t){var e=t.typeCondition,r=t.directives,o=t.selectionSet;return F(["...",se("on ",e),F(r," "),o]," ")},FragmentDefinition:function(t){var e=t.name,r=t.typeCondition,o=t.variableDefinitions,i=t.directives,s=t.selectionSet;return"fragment ".concat(e).concat(se("(",F(o,", "),")")," ")+"on ".concat(r," ").concat(se("",F(i," ")," "))+s},IntValue:function(t){var e=t.value;return e},FloatValue:function(t){var e=t.value;return e},StringValue:function(t,e){var r=t.value,o=t.block;return o?Mp(r,e==="description"?"":"  "):JSON.stringify(r)},BooleanValue:function(t){var e=t.value;return e?"true":"false"},NullValue:function(){return"null"},EnumValue:function(t){var e=t.value;return e},ListValue:function(t){var e=t.values;return"["+F(e,", ")+"]"},ObjectValue:function(t){var e=t.fields;return"{"+F(e,", ")+"}"},ObjectField:function(t){var e=t.name,r=t.value;return e+": "+r},Directive:function(t){var e=t.name,r=t.arguments;return"@"+e+se("(",F(r,", "),")")},NamedType:function(t){var e=t.name;return e},ListType:function(t){var e=t.type;return"["+e+"]"},NonNullType:function(t){var e=t.type;return e+"!"},SchemaDefinition:$e(function(n){var t=n.directives,e=n.operationTypes;return F(["schema",F(t," "),ze(e)]," ")}),OperationTypeDefinition:function(t){var e=t.operation,r=t.type;return e+": "+r},ScalarTypeDefinition:$e(function(n){var t=n.name,e=n.directives;return F(["scalar",t,F(e," ")]," ")}),ObjectTypeDefinition:$e(function(n){var t=n.name,e=n.interfaces,r=n.directives,o=n.fields;return F(["type",t,se("implements ",F(e," & ")),F(r," "),ze(o)]," ")}),FieldDefinition:$e(function(n){var t=n.name,e=n.arguments,r=n.type,o=n.directives;return t+(hs(e)?se(`(
`,Hn(F(e,`
`)),`
)`):se("(",F(e,", "),")"))+": "+r+se(" ",F(o," "))}),InputValueDefinition:$e(function(n){var t=n.name,e=n.type,r=n.defaultValue,o=n.directives;return F([t+": "+e,se("= ",r),F(o," ")]," ")}),InterfaceTypeDefinition:$e(function(n){var t=n.name,e=n.interfaces,r=n.directives,o=n.fields;return F(["interface",t,se("implements ",F(e," & ")),F(r," "),ze(o)]," ")}),UnionTypeDefinition:$e(function(n){var t=n.name,e=n.directives,r=n.types;return F(["union",t,F(e," "),r&&r.length!==0?"= "+F(r," | "):""]," ")}),EnumTypeDefinition:$e(function(n){var t=n.name,e=n.directives,r=n.values;return F(["enum",t,F(e," "),ze(r)]," ")}),EnumValueDefinition:$e(function(n){var t=n.name,e=n.directives;return F([t,F(e," ")]," ")}),InputObjectTypeDefinition:$e(function(n){var t=n.name,e=n.directives,r=n.fields;return F(["input",t,F(e," "),ze(r)]," ")}),DirectiveDefinition:$e(function(n){var t=n.name,e=n.arguments,r=n.repeatable,o=n.locations;return"directive @"+t+(hs(e)?se(`(
`,Hn(F(e,`
`)),`
)`):se("(",F(e,", "),")"))+(r?" repeatable":"")+" on "+F(o," | ")}),SchemaExtension:function(t){var e=t.directives,r=t.operationTypes;return F(["extend schema",F(e," "),ze(r)]," ")},ScalarTypeExtension:function(t){var e=t.name,r=t.directives;return F(["extend scalar",e,F(r," ")]," ")},ObjectTypeExtension:function(t){var e=t.name,r=t.interfaces,o=t.directives,i=t.fields;return F(["extend type",e,se("implements ",F(r," & ")),F(o," "),ze(i)]," ")},InterfaceTypeExtension:function(t){var e=t.name,r=t.interfaces,o=t.directives,i=t.fields;return F(["extend interface",e,se("implements ",F(r," & ")),F(o," "),ze(i)]," ")},UnionTypeExtension:function(t){var e=t.name,r=t.directives,o=t.types;return F(["extend union",e,F(r," "),o&&o.length!==0?"= "+F(o," | "):""]," ")},EnumTypeExtension:function(t){var e=t.name,r=t.directives,o=t.values;return F(["extend enum",e,F(r," "),ze(o)]," ")},InputObjectTypeExtension:function(t){var e=t.name,r=t.directives,o=t.fields;return F(["extend input",e,F(r," "),ze(o)]," ")}};function $e(n){return function(t){return F([t.description,n(t)],`
`)}}function F(n){var t,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(t=n==null?void 0:n.filter(function(r){return r}).join(e))!==null&&t!==void 0?t:""}function ze(n){return se(`{
`,Hn(F(n,`
`)),`
}`)}function se(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return t!=null&&t!==""?n+t+e:""}function Hn(n){return se("  ",n.replace(/\n/g,`
  `))}function ng(n){return n.indexOf(`
`)!==-1}function hs(n){return n!=null&&n.some(ng)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Mi=function(n,t){return Mi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])},Mi(n,t)};function rg(n,t){Mi(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var ve=function(){return ve=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ve.apply(this,arguments)};function Ne(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})}function Re(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function ig(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return i}var og=new fe("AbstractPubSubProvider"),sg=function(){function n(t){this._config=t}return n.prototype.configure=function(t){return this._config=ve(ve({},t),this._config),og.debug("configure "+this.getProviderName(),this._config),this.options},n.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(n.prototype,"options",{get:function(){return ve({},this._config)},enumerable:!0,configurable:!0}),n}(),Ye;(function(n){n.CONNECTION_CLOSED="Connection closed",n.CONNECTION_FAILED="Connection failed",n.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",n.SUBSCRIPTION_ACK="Subscription ack",n.TIMEOUT_DISCONNECT="Timeout disconnect"})(Ye||(Ye={}));var ye;(function(n){n.Connected="Connected",n.ConnectedPendingNetwork="ConnectedPendingNetwork",n.ConnectionDisrupted="ConnectionDisrupted",n.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",n.Connecting="Connecting",n.ConnectedPendingDisconnect="ConnectedPendingDisconnect",n.Disconnected="Disconnected",n.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive"})(ye||(ye={}));var ag=5e3,ug=[400,401,403],cg="ConnectionStateChange",Je;(function(n){n.GQL_CONNECTION_INIT="connection_init",n.GQL_CONNECTION_ERROR="connection_error",n.GQL_CONNECTION_ACK="connection_ack",n.GQL_START="start",n.GQL_START_ACK="start_ack",n.GQL_DATA="data",n.GQL_CONNECTION_KEEP_ALIVE="ka",n.GQL_STOP="stop",n.GQL_COMPLETE="complete",n.GQL_ERROR="error"})(Je||(Je={}));var bt;(function(n){n[n.PENDING=0]="PENDING",n[n.CONNECTED=1]="CONNECTED",n[n.FAILED=2]="FAILED"})(bt||(bt={}));var Ue;(function(n){n[n.CLOSED=0]="CLOSED",n[n.READY=1]="READY",n[n.CONNECTING=2]="CONNECTING"})(Ue||(Ue={}));var fg=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",lg={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},ds=15e3,hg=15e3,ps=5*60*1e3,dg=65*1e3,pg=5*1e3,gg=60*1e3,gs=function(){return new rc().networkMonitor()},Ie={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}},vg=function(){function n(){var t=this;this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._initialNetworkStateSubscription=gs().subscribe(function(e){var r=e.online,o;t.record(r?Ie.ONLINE:Ie.OFFLINE),(o=t._initialNetworkStateSubscription)===null||o===void 0||o.unsubscribe()}),this._linkedConnectionStateObservable=new zt(function(e){e.next(t._linkedConnectionState),t._linkedConnectionStateObserver=e})}return n.prototype.enableNetworkMonitoring=function(){var t=this,e;(e=this._initialNetworkStateSubscription)===null||e===void 0||e.unsubscribe(),this._networkMonitoringSubscription===void 0&&(this._networkMonitoringSubscription=gs().subscribe(function(r){var o=r.online;t.record(o?Ie.ONLINE:Ie.OFFLINE)}))},n.prototype.disableNetworkMonitoring=function(){var t;(t=this._networkMonitoringSubscription)===null||t===void 0||t.unsubscribe(),this._networkMonitoringSubscription=void 0},Object.defineProperty(n.prototype,"connectionStateObservable",{get:function(){var t=this,e;return this._linkedConnectionStateObservable.map(function(r){return t.connectionStatesTranslator(r)}).filter(function(r){var o=r!==e;return e=r,o})},enumerable:!0,configurable:!0}),n.prototype.record=function(t){t.intendedConnectionState==="connected"?this.enableNetworkMonitoring():t.intendedConnectionState==="disconnected"&&this.disableNetworkMonitoring();var e=ve(ve({},this._linkedConnectionState),t);this._linkedConnectionState=ve({},e),this._linkedConnectionStateObserver.next(this._linkedConnectionState)},n.prototype.connectionStatesTranslator=function(t){var e=t.connectionState,r=t.networkState,o=t.intendedConnectionState,i=t.keepAliveState;return e==="connected"&&r==="disconnected"?ye.ConnectedPendingNetwork:e==="connected"&&o==="disconnected"?ye.ConnectedPendingDisconnect:e==="disconnected"&&o==="connected"&&r==="disconnected"?ye.ConnectionDisruptedPendingNetwork:e==="disconnected"&&o==="connected"?ye.ConnectionDisrupted:e==="connected"&&i==="unhealthy"?ye.ConnectedPendingKeepAlive:e==="connecting"?ye.Connecting:e==="disconnected"?ye.Disconnected:ye.Connected},n}(),Jt;(function(n){n.START_RECONNECT="START_RECONNECT",n.HALT_RECONNECT="HALT_RECONNECT"})(Jt||(Jt={}));var yg=function(){function n(){this.reconnectObservers=[]}return n.prototype.addObserver=function(t){this.reconnectObservers.push(t)},n.prototype.record=function(t){var e=this;t===Jt.START_RECONNECT&&this.reconnectSetTimeoutId===void 0&&this.reconnectIntervalId===void 0&&(this.reconnectSetTimeoutId=setTimeout(function(){e._triggerReconnect(),e.reconnectIntervalId=setInterval(function(){e._triggerReconnect()},gg)},pg)),t===Jt.HALT_RECONNECT&&(this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0),this.reconnectSetTimeoutId&&(clearTimeout(this.reconnectSetTimeoutId),this.reconnectSetTimeoutId=void 0))},n.prototype.close=function(){this.reconnectObservers.forEach(function(t){var e;(e=t.complete)===null||e===void 0||e.call(t)})},n.prototype._triggerReconnect=function(){this.reconnectObservers.forEach(function(t){var e;(e=t.next)===null||e===void 0||e.call(t)})},n}(),ee=new fe("AWSAppSyncRealTimeProvider"),vs=function(n,t,e){ot.dispatch("api",{event:n,data:t,message:e},"PubSub",fg)},mg=function(n){var t=Z.Buffer.from(n).toString("base64"),e=t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return e},bg=/^https:\/\/\w{26}\.appsync\-api\.\w{2}(?:(?:\-\w{2,})+)\-\d\.amazonaws.com(?:\.cn)?\/graphql$/i,wg="/realtime",Sg=function(n){rg(t,n);function t(e){e===void 0&&(e={});var r=n.call(this,e)||this;return r.socketStatus=Ue.CLOSED,r.keepAliveTimeout=ps,r.subscriptionObserverMap=new Map,r.promiseArray=[],r.connectionStateMonitor=new vg,r.reconnectionMonitor=new yg,r.connectionStateMonitorSubscription=r.connectionStateMonitor.connectionStateObservable.subscribe(function(o){vs(cg,{provider:r,connectionState:o},"Connection state is "+o),r.connectionState=o,o===ye.ConnectionDisrupted&&r.reconnectionMonitor.record(Jt.START_RECONNECT),[ye.Connected,ye.ConnectedPendingDisconnect,ye.ConnectedPendingKeepAlive,ye.ConnectedPendingNetwork,ye.ConnectionDisruptedPendingNetwork,ye.Disconnected].includes(o)&&r.reconnectionMonitor.record(Jt.HALT_RECONNECT)}),r}return t.prototype.close=function(){this.socketStatus=Ue.CLOSED,this.connectionStateMonitor.record(Ie.CONNECTION_FAILED),this.connectionStateMonitorSubscription.unsubscribe(),this.reconnectionMonitor.close()},t.prototype.getNewWebSocket=function(e,r){return new WebSocket(e,r)},t.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},t.prototype.newClient=function(){throw new Error("Not used here")},t.prototype.publish=function(e,r,o){return Ne(this,void 0,void 0,function(){return Re(this,function(i){throw new Error("Operation not supported")})})},t.prototype.isCustomDomain=function(e){return e.match(bg)===null},t.prototype.subscribe=function(e,r,o){var i=this,s=r==null?void 0:r.appSyncGraphqlEndpoint;return new zt(function(u){if(!r||!s)u.error({errors:[ve({},new Ht("Subscribe only available for AWS AppSync endpoint"))]}),u.complete();else{var c=!1,a=Uf.v4(),f=function(){if(!c){c=!0;var p=i._startSubscriptionWithAWSAppSyncRealTime({options:r,observer:u,subscriptionId:a,customUserAgentDetails:o}).catch(function(g){ee.debug(Ye.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+g),i.connectionStateMonitor.record(Ie.CLOSED)});p.finally(function(){c=!1})}},l;return l=new zt(function(p){i.reconnectionMonitor.addObserver(p)}).subscribe(function(){f()}),f(),function(){return Ne(i,void 0,void 0,function(){var p,g;return Re(this,function(v){switch(v.label){case 0:l==null||l.unsubscribe(),v.label=1;case 1:return v.trys.push([1,3,4,5]),[4,this._waitForSubscriptionToBeConnected(a)];case 2:if(v.sent(),p=(this.subscriptionObserverMap.get(a)||{}).subscriptionState,!p)return[2];if(p===bt.CONNECTED)this._sendUnsubscriptionMessage(a);else throw new Error("Subscription never connected");return[3,5];case 3:return g=v.sent(),ee.debug("Error while unsubscribing "+g),[3,5];case 4:return this._removeSubscriptionObserver(a),[7];case 5:return[2]}})})}}})},Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var r=e.options,o=e.observer,i=e.subscriptionId,s=e.customUserAgentDetails,u;return Ne(this,void 0,void 0,function(){var c,a,f,l,p,g,v,m,w,_,S,T,I,N,D,U,k,B,K,X,re,oe,z,me=this;return Re(this,function(de){switch(de.label){case 0:return c=r.appSyncGraphqlEndpoint,a=r.authenticationType,f=r.query,l=r.variables,p=r.apiKey,g=r.region,v=r.graphql_headers,m=v===void 0?function(){return{}}:v,w=r.additionalHeaders,_=w===void 0?{}:w,S=bt.PENDING,T={query:f,variables:l},this.subscriptionObserverMap.set(i,{observer:o,query:f??"",variables:l??{},subscriptionState:S,startAckTimeoutId:void 0}),I=JSON.stringify(T),D=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:p,appSyncGraphqlEndpoint:c,authenticationType:a,payload:I,canonicalUri:"",region:g,additionalHeaders:_})];case 1:return U=[ve.apply(void 0,D.concat([de.sent()]))],[4,m()];case 2:N=ve.apply(void 0,[ve.apply(void 0,[ve.apply(void 0,U.concat([de.sent()])),_]),(z={},z[ha]=Sn(s),z)]),k={id:i,payload:{data:I,extensions:{authorization:ve({},N)}},type:Je.GQL_START},B=JSON.stringify(k),de.label=3;case 3:return de.trys.push([3,5,,6]),this.connectionStateMonitor.record(Ie.OPENING_CONNECTION),[4,this._initializeWebSocketConnection({apiKey:p,appSyncGraphqlEndpoint:c,authenticationType:a,region:g,additionalHeaders:_})];case 4:return de.sent(),[3,6];case 5:return K=de.sent(),this._logStartSubscriptionError(i,o,K),[2];case 6:return X=(u=this.subscriptionObserverMap.get(i))!==null&&u!==void 0?u:{},re=X.subscriptionFailedCallback,oe=X.subscriptionReadyCallback,this.subscriptionObserverMap.set(i,{observer:o,subscriptionState:S,query:f??"",variables:l??{},subscriptionReadyCallback:oe,subscriptionFailedCallback:re,startAckTimeoutId:setTimeout(function(){me._timeoutStartSubscriptionAck.call(me,i)},hg)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(B),[2]}})})},t.prototype._logStartSubscriptionError=function(e,r,o){var i;ee.debug({err:o});var s=String((i=o.message)!==null&&i!==void 0?i:"");if(Promise.resolve(this.connectionStateMonitor.record(Ie.CLOSED)),this.connectionState!==ye.ConnectionDisruptedPendingNetwork){Ps(o)?r.error({errors:[ve({},new Ht(Ye.CONNECTION_FAILED+": "+s))]}):ee.debug(Ye.CONNECTION_FAILED+": "+s);var u=(this.subscriptionObserverMap.get(e)||{}).subscriptionFailedCallback;typeof u=="function"&&u()}},t.prototype._waitForSubscriptionToBeConnected=function(e){return Ne(this,void 0,void 0,function(){var r,o,i=this;return Re(this,function(s){return r=this.subscriptionObserverMap.get(e),r&&(o=r.subscriptionState,o===bt.PENDING)?[2,new Promise(function(u,c){var a=r.observer,f=r.subscriptionState,l=r.variables,p=r.query;i.subscriptionObserverMap.set(e,{observer:a,subscriptionState:f,variables:l,query:p,subscriptionReadyCallback:u,subscriptionFailedCallback:c})})]:[2]})})},t.prototype._sendUnsubscriptionMessage=function(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===Ue.READY){var r={id:e,type:Je.GQL_STOP},o=JSON.stringify(r);this.awsRealTimeSocket.send(o)}}catch(i){ee.debug({err:i})}},t.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},t.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0)){if(!this.awsRealTimeSocket){this.socketStatus=Ue.CLOSED;return}if(this.connectionStateMonitor.record(Ie.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{ee.debug("closing WebSocket..."),this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId);var e=this.awsRealTimeSocket;e.onclose=null,e.onerror=null,e.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=Ue.CLOSED,this.connectionStateMonitor.record(Ie.CLOSED)}}},t.prototype._handleIncomingSubscriptionMessage=function(e){var r=this;if(typeof e.data=="string"){ee.debug("subscription message from AWS AppSync RealTime: "+e.data);var o=JSON.parse(String(e.data)),i=o.id,s=i===void 0?"":i,u=o.payload,c=o.type,a=this.subscriptionObserverMap.get(s)||{},f=a.observer,l=f===void 0?null:f,p=a.query,g=p===void 0?"":p,v=a.variables,m=v===void 0?{}:v,w=a.startAckTimeoutId,_=a.subscriptionReadyCallback,S=a.subscriptionFailedCallback;if(ee.debug({id:s,observer:l,query:g,variables:m}),c===Je.GQL_DATA&&u&&u.data){l?l.next(u):ee.debug("observer not found for id: "+s);return}if(c===Je.GQL_START_ACK){ee.debug("subscription ready for "+JSON.stringify({query:g,variables:m})),typeof _=="function"&&_(),w&&clearTimeout(w),vs(Ye.SUBSCRIPTION_ACK,{query:g,variables:m},"Connection established for subscription");var T=bt.CONNECTED;l&&this.subscriptionObserverMap.set(s,{observer:l,query:g,variables:m,startAckTimeoutId:void 0,subscriptionState:T,subscriptionReadyCallback:_,subscriptionFailedCallback:S}),this.connectionStateMonitor.record(Ie.CONNECTION_ESTABLISHED);return}if(c===Je.GQL_CONNECTION_KEEP_ALIVE){this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId),this.keepAliveTimeoutId=setTimeout(function(){return r._errorDisconnect(Ye.TIMEOUT_DISCONNECT)},this.keepAliveTimeout),this.keepAliveAlertTimeoutId=setTimeout(function(){r.connectionStateMonitor.record(Ie.KEEP_ALIVE_MISSED)},dg),this.connectionStateMonitor.record(Ie.KEEP_ALIVE);return}if(c===Je.GQL_ERROR){var T=bt.FAILED;l&&(this.subscriptionObserverMap.set(s,{observer:l,query:g,variables:m,startAckTimeoutId:w,subscriptionReadyCallback:_,subscriptionFailedCallback:S,subscriptionState:T}),ee.debug(Ye.CONNECTION_FAILED+": "+JSON.stringify(u)),l.error({errors:[ve({},new Ht(Ye.CONNECTION_FAILED+": "+JSON.stringify(u)))]}),w&&clearTimeout(w),typeof S=="function"&&S())}}},t.prototype._errorDisconnect=function(e){ee.debug("Disconnect error: "+e),this.awsRealTimeSocket&&(this.connectionStateMonitor.record(Ie.CLOSED),this.awsRealTimeSocket.close()),this.socketStatus=Ue.CLOSED},t.prototype._timeoutStartSubscriptionAck=function(e){var r=this.subscriptionObserverMap.get(e);if(r){var o=r.observer,i=r.query,s=r.variables;if(!o)return;this.subscriptionObserverMap.set(e,{observer:o,query:i,variables:s,subscriptionState:bt.FAILED}),this.connectionStateMonitor.record(Ie.CLOSED),ee.debug("timeoutStartSubscription",JSON.stringify({query:i,variables:s}))}},t.prototype._initializeWebSocketConnection=function(e){var r=this,o=e.appSyncGraphqlEndpoint,i=e.authenticationType,s=e.apiKey,u=e.region,c=e.additionalHeaders;if(this.socketStatus!==Ue.READY)return new Promise(function(a,f){return Ne(r,void 0,void 0,function(){var l,p,g,v,m,w,_,S,T;return Re(this,function(I){switch(I.label){case 0:if(this.promiseArray.push({res:a,rej:f}),this.socketStatus!==Ue.CLOSED)return[3,5];I.label=1;case 1:return I.trys.push([1,4,,5]),this.socketStatus=Ue.CONNECTING,l="{}",[4,this._awsRealTimeHeaderBasedAuth({authenticationType:i,payload:l,canonicalUri:"/connect",apiKey:s,appSyncGraphqlEndpoint:o,region:u,additionalHeaders:c})];case 2:return p=I.sent(),g=p?JSON.stringify(p):"",v=mg(g),m=o??"",this.isCustomDomain(m)?m=m.concat(wg):m=m.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),w=this.isSSLEnabled?"wss://":"ws://",m=m.replace("https://",w).replace("http://",w),_=m,S="header-"+v,[4,this._initializeRetryableHandshake(_,S)];case 3:return I.sent(),this.promiseArray.forEach(function(N){var D=N.res;ee.debug("Notifying connection successful"),D()}),this.socketStatus=Ue.READY,this.promiseArray=[],[3,5];case 4:return T=I.sent(),ee.debug("Connection exited with",T),this.promiseArray.forEach(function(N){var D=N.rej;return D(T)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=Ue.CLOSED,[3,5];case 5:return[2]}})})})},t.prototype._initializeRetryableHandshake=function(e,r){return Ne(this,void 0,void 0,function(){return Re(this,function(o){switch(o.label){case 0:return ee.debug("Initializaling retryable Handshake"),[4,Ms(this._initializeHandshake.bind(this),[e,r],ag)];case 1:return o.sent(),[2]}})})},t.prototype._initializeHandshake=function(e,r){return Ne(this,void 0,void 0,function(){var o,i,s,u,c=this;return Re(this,function(a){switch(a.label){case 0:ee.debug("Initializing handshake "+e),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,function(){return new Promise(function(f,l){var p=c.getNewWebSocket(e,["graphql-ws",r]);p.onerror=function(){ee.debug("WebSocket connection error")},p.onclose=function(){l(new Error("Connection handshake error"))},p.onopen=function(){return c.awsRealTimeSocket=p,f()}})}()];case 2:return a.sent(),[4,function(){return new Promise(function(f,l){if(c.awsRealTimeSocket){var p=!1;c.awsRealTimeSocket.onerror=function(m){ee.debug("WebSocket error "+JSON.stringify(m))},c.awsRealTimeSocket.onclose=function(m){ee.debug("WebSocket closed "+m.reason),l(new Error(JSON.stringify(m)))},c.awsRealTimeSocket.onmessage=function(m){if(typeof m.data=="string"){ee.debug("subscription message from AWS AppSyncRealTime: "+m.data+" ");var w=JSON.parse(m.data),_=w.type,S=w.payload,T=(S===void 0?{}:S).connectionTimeoutMs,I=T===void 0?ps:T;if(_===Je.GQL_CONNECTION_ACK){p=!0,c.awsRealTimeSocket&&(c.keepAliveTimeout=I,c.awsRealTimeSocket.onmessage=c._handleIncomingSubscriptionMessage.bind(c),c.awsRealTimeSocket.onerror=function(z){ee.debug(z),c._errorDisconnect(Ye.CONNECTION_CLOSED)},c.awsRealTimeSocket.onclose=function(z){ee.debug("WebSocket closed "+z.reason),c._errorDisconnect(Ye.CONNECTION_CLOSED)}),f("Cool, connected to AWS AppSyncRealTime");return}if(_===Je.GQL_CONNECTION_ERROR){var N=w.payload,D=(N===void 0?{}:N).errors,U=ig(D===void 0?[]:D,1),k=U[0],B=k===void 0?{}:k,K=B.errorType,X=K===void 0?"":K,re=B.errorCode,oe=re===void 0?0:re;l({errorType:X,errorCode:oe})}}};var g={type:Je.GQL_CONNECTION_INIT};c.awsRealTimeSocket.send(JSON.stringify(g));var v=function(m){m||(c.connectionStateMonitor.record(Ie.CONNECTION_FAILED),l(new Error("Connection timeout: ack from AWSAppSyncRealTime was not received after "+ds+" ms")))};setTimeout(function(){return v(p)},ds)}})}()];case 3:return a.sent(),[3,5];case 4:throw o=a.sent(),i=o,s=i.errorType,u=i.errorCode,ug.includes(u)?new _t(s):s?new Error(s):o;case 5:return[2]}})})},t.prototype._awsRealTimeHeaderBasedAuth=function(e){var r=e.authenticationType,o=e.payload,i=e.canonicalUri,s=e.appSyncGraphqlEndpoint,u=e.apiKey,c=e.region,a=e.additionalHeaders;return Ne(this,void 0,void 0,function(){var f,l,p,g;return Re(this,function(v){switch(v.label){case 0:return f={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this),AWS_LAMBDA:this._customAuthHeader},!r||!f[r]?(ee.debug("Authentication type "+r+" not supported"),[2,void 0]):[3,1];case 1:return l=f[r],p=at(s??"").host,ee.debug("Authenticating with "+r),[4,l({payload:o,canonicalUri:i,appSyncGraphqlEndpoint:s,apiKey:u,region:c,host:p,additionalHeaders:a})];case 2:return g=v.sent(),[2,g]}})})},t.prototype._awsRealTimeCUPHeader=function(e){var r=e.host;return Ne(this,void 0,void 0,function(){var o;return Re(this,function(i){switch(i.label){case 0:return[4,Yt.currentSession()];case 1:return o=i.sent(),[2,{Authorization:o.getAccessToken().getJwtToken(),host:r}]}})})},t.prototype._awsRealTimeOPENIDHeader=function(e){var r=e.host;return Ne(this,void 0,void 0,function(){var o,i,s;return Re(this,function(u){switch(u.label){case 0:return[4,gn.getItem("federatedInfo")];case 1:return i=u.sent(),i?(o=i.token,[3,4]):[3,2];case 2:return[4,Yt.currentAuthenticatedUser()];case 3:s=u.sent(),s&&(o=s.token),u.label=4;case 4:if(!o)throw new Error("No federated jwt");return[2,{Authorization:o,host:r}]}})})},t.prototype._awsRealTimeApiKeyHeader=function(e){var r=e.apiKey,o=e.host;return Ne(this,void 0,void 0,function(){var i,s;return Re(this,function(u){return i=new Date,s=i.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:o,"x-amz-date":s,"x-api-key":r}]})})},t.prototype._awsRealTimeIAMHeader=function(e){var r=e.payload,o=e.canonicalUri,i=e.appSyncGraphqlEndpoint,s=e.region;return Ne(this,void 0,void 0,function(){var u,c,a,f,l;return Re(this,function(p){switch(p.label){case 0:return u={region:s,service:"appsync"},[4,this._ensureCredentials()];case 1:if(c=p.sent(),!c)throw new Error("No credentials");return[4,pt.get().then(function(g){var v=g,m=v.secretAccessKey,w=v.accessKeyId,_=v.sessionToken;return{secret_key:m,access_key:w,session_token:_}})];case 2:return a=p.sent(),f={url:""+i+o,data:r,method:"POST",headers:ve({},lg)},l=Js.sign(f,a,u),[2,l.headers]}})})},t.prototype._customAuthHeader=function(e){var r=e.host,o=e.additionalHeaders;if(!o||!o.Authorization)throw new Error("No auth token specified");return{Authorization:o.Authorization,host:r}},t.prototype._ensureCredentials=function(){return pt.get().then(function(e){if(!e)return!1;var r=pt.shear(e);return ee.debug("set credentials for AWSAppSyncRealTimeProvider",r),!0}).catch(function(e){return ee.warn("ensure credentials error",e),!1})},t}(sg),_g=et().isNode,ri=new fe("PubSub"),Eg=function(){function n(t){this._options=t??{},ri.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}return Object.defineProperty(n.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new Sg(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),n.prototype.getModuleName=function(){return"InternalPubSub"},n.prototype.configure=function(t){var e=this,r=t?t.PubSub||t:{};return ri.debug("configure PubSub",{opt:r}),this._options=Object.assign({},this._options,r),this._pluggables.map(function(o){return o.configure(e._options)}),this._options},n.prototype.addPluggable=function(t){return Ne(this,void 0,void 0,function(){var e;return Re(this,function(r){return t&&t.getCategory()==="PubSub"?(this._pluggables.push(t),e=t.configure(this._options),[2,e]):[2]})})},n.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},n.prototype.getProviderByName=function(t){return t===la?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(e){return e.getProviderName()===t})},n.prototype.getProviders=function(t){t===void 0&&(t={});var e=t.provider;if(!e)return this._pluggables;var r=this.getProviderByName(e);if(!r)throw new Error("Could not find provider named "+String(e));return[r]},n.prototype.publish=function(t,e,r){return Ne(this,void 0,void 0,function(){return Re(this,function(o){return[2,Promise.all(this.getProviders(r).map(function(i){return i.publish(t,e,r)}))]})})},n.prototype.subscribe=function(t,e,r){if(_g&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");ri.debug("subscribe options",e);var o=this.getProviders(e),i=ve({category:Gt.PubSub,action:ui.Subscribe},r);return new zt(function(s){var u=o.map(function(a){return{provider:a,observable:a.subscribe(t,e,i)}}),c=u.map(function(a){var f=a.provider,l=a.observable;return l.subscribe({start:console.error,next:function(p){return s.next({provider:f,value:p})},error:function(p){return s.error({provider:f,error:p})}})});return function(){return c.forEach(function(a){return a.unsubscribe()})}})},n}(),Gn=new Eg;gt.register(Gn);var wt;(function(n){n.NO_API_KEY="No api-key configured",n.NO_CURRENT_USER="No current user",n.NO_CREDENTIALS="No credentials",n.NO_FEDERATED_JWT="No federated jwt",n.NO_AUTH_TOKEN="No auth token specified"})(wt||(wt={}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ke=function(){return Ke=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ke.apply(this,arguments)};function Li(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(e[r[o]]=n[r[o]]);return e}function Ra(n,t,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(f){try{a(r.next(f))}catch(l){s(l)}}function c(f){try{a(r.throw(f))}catch(l){s(l)}}function a(f){f.done?i(f.value):o(f.value).then(u,c)}a((r=r.apply(n,t||[])).next())})}function Da(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(f){return c([a,f])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(n,e)}catch(f){a=[6,f],o=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function ka(n,t){return function(){return n.apply(t,arguments)}}const{toString:Tg}=Object.prototype,{getPrototypeOf:lo}=Object,{iterator:Tr,toStringTag:Pa}=Symbol,Ar=(n=>t=>{const e=Tg.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),tt=n=>(n=n.toLowerCase(),t=>Ar(t)===n),Ir=n=>t=>typeof t===n,{isArray:en}=Array,wn=Ir("undefined");function Ag(n){return n!==null&&!wn(n)&&n.constructor!==null&&!wn(n.constructor)&&De(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Ua=tt("ArrayBuffer");function Ig(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&Ua(n.buffer),t}const Cg=Ir("string"),De=Ir("function"),Fa=Ir("number"),Cr=n=>n!==null&&typeof n=="object",Og=n=>n===!0||n===!1,$n=n=>{if(Ar(n)!=="object")return!1;const t=lo(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Pa in n)&&!(Tr in n)},xg=tt("Date"),Ng=tt("File"),Rg=tt("Blob"),Dg=tt("FileList"),kg=n=>Cr(n)&&De(n.pipe),Pg=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||De(n.append)&&((t=Ar(n))==="formdata"||t==="object"&&De(n.toString)&&n.toString()==="[object FormData]"))},Ug=tt("URLSearchParams"),[Fg,Mg,Lg,Bg]=["ReadableStream","Request","Response","Headers"].map(tt),jg=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _n(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let r,o;if(typeof n!="object"&&(n=[n]),en(n))for(r=0,o=n.length;r<o;r++)t.call(null,n[r],r,n);else{const i=e?Object.getOwnPropertyNames(n):Object.keys(n),s=i.length;let u;for(r=0;r<s;r++)u=i[r],t.call(null,n[u],u,n)}}function Ma(n,t){t=t.toLowerCase();const e=Object.keys(n);let r=e.length,o;for(;r-- >0;)if(o=e[r],t===o.toLowerCase())return o;return null}const Rt=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:window)(),La=n=>!wn(n)&&n!==Rt;function Bi(){const{caseless:n}=La(this)&&this||{},t={},e=(r,o)=>{const i=n&&Ma(t,o)||o;$n(t[i])&&$n(r)?t[i]=Bi(t[i],r):$n(r)?t[i]=Bi({},r):en(r)?t[i]=r.slice():t[i]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&_n(arguments[r],e);return t}const Kg=(n,t,e,{allOwnKeys:r}={})=>(_n(t,(o,i)=>{e&&De(o)?n[i]=ka(o,e):n[i]=o},{allOwnKeys:r}),n),qg=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Vg=(n,t,e,r)=>{n.prototype=Object.create(t.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},Hg=(n,t,e,r)=>{let o,i,s;const u={};if(t=t||{},n==null)return t;do{for(o=Object.getOwnPropertyNames(n),i=o.length;i-- >0;)s=o[i],(!r||r(s,n,t))&&!u[s]&&(t[s]=n[s],u[s]=!0);n=e!==!1&&lo(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},Gg=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const r=n.indexOf(t,e);return r!==-1&&r===e},$g=n=>{if(!n)return null;if(en(n))return n;let t=n.length;if(!Fa(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},zg=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&lo(Uint8Array)),Wg=(n,t)=>{const r=(n&&n[Tr]).call(n);let o;for(;(o=r.next())&&!o.done;){const i=o.value;t.call(n,i[0],i[1])}},Yg=(n,t)=>{let e;const r=[];for(;(e=n.exec(t))!==null;)r.push(e);return r},Jg=tt("HTMLFormElement"),Xg=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,r,o){return r.toUpperCase()+o}),ys=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),Qg=tt("RegExp"),Ba=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),r={};_n(e,(o,i)=>{let s;(s=t(o,i,n))!==!1&&(r[i]=s||o)}),Object.defineProperties(n,r)},Zg=n=>{Ba(n,(t,e)=>{if(De(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const r=n[e];if(De(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},ev=(n,t)=>{const e={},r=o=>{o.forEach(i=>{e[i]=!0})};return en(n)?r(n):r(String(n).split(t)),e},tv=()=>{},nv=(n,t)=>n!=null&&Number.isFinite(n=+n)?n:t;function rv(n){return!!(n&&De(n.append)&&n[Pa]==="FormData"&&n[Tr])}const iv=n=>{const t=new Array(10),e=(r,o)=>{if(Cr(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;const i=en(r)?[]:{};return _n(r,(s,u)=>{const c=e(s,o+1);!wn(c)&&(i[u]=c)}),t[o]=void 0,i}}return r};return e(n,0)},ov=tt("AsyncFunction"),sv=n=>n&&(Cr(n)||De(n))&&De(n.then)&&De(n.catch),ja=((n,t)=>n?setImmediate:t?((e,r)=>(Rt.addEventListener("message",({source:o,data:i})=>{o===Rt&&i===e&&r.length&&r.shift()()},!1),o=>{r.push(o),Rt.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",De(Rt.postMessage)),av=typeof queueMicrotask<"u"?queueMicrotask.bind(Rt):typeof process<"u"&&process.nextTick||ja,uv=n=>n!=null&&De(n[Tr]),A={isArray:en,isArrayBuffer:Ua,isBuffer:Ag,isFormData:Pg,isArrayBufferView:Ig,isString:Cg,isNumber:Fa,isBoolean:Og,isObject:Cr,isPlainObject:$n,isReadableStream:Fg,isRequest:Mg,isResponse:Lg,isHeaders:Bg,isUndefined:wn,isDate:xg,isFile:Ng,isBlob:Rg,isRegExp:Qg,isFunction:De,isStream:kg,isURLSearchParams:Ug,isTypedArray:zg,isFileList:Dg,forEach:_n,merge:Bi,extend:Kg,trim:jg,stripBOM:qg,inherits:Vg,toFlatObject:Hg,kindOf:Ar,kindOfTest:tt,endsWith:Gg,toArray:$g,forEachEntry:Wg,matchAll:Yg,isHTMLForm:Jg,hasOwnProperty:ys,hasOwnProp:ys,reduceDescriptors:Ba,freezeMethods:Zg,toObjectSet:ev,toCamelCase:Xg,noop:tv,toFiniteNumber:nv,findKey:Ma,window:Rt,isContextDefined:La,isSpecCompliantForm:rv,toJSONObject:iv,isAsyncFn:ov,isThenable:sv,setImmediate:ja,asap:av,isIterable:uv};function V(n,t,e,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}A.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.status}}});const Ka=V.prototype,qa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{qa[n]={value:n}});Object.defineProperties(V,qa);Object.defineProperty(Ka,"isAxiosError",{value:!0});V.from=(n,t,e,r,o,i)=>{const s=Object.create(Ka);return A.toFlatObject(n,s,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),V.call(s,n.message,t,e,r,o),s.cause=n,s.name=n.name,i&&Object.assign(s,i),s};const cv=null;function ji(n){return A.isPlainObject(n)||A.isArray(n)}function Va(n){return A.endsWith(n,"[]")?n.slice(0,-2):n}function ms(n,t,e){return n?n.concat(t).map(function(o,i){return o=Va(o),!e&&i?"["+o+"]":o}).join(e?".":""):t}function fv(n){return A.isArray(n)&&!n.some(ji)}const lv=A.toFlatObject(A,{},null,function(t){return/^is[A-Z]/.test(t)});function Or(n,t,e){if(!A.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=A.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,w){return!A.isUndefined(w[m])});const r=e.metaTokens,o=e.visitor||f,i=e.dots,s=e.indexes,c=(e.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(t);if(!A.isFunction(o))throw new TypeError("visitor must be a function");function a(v){if(v===null)return"";if(A.isDate(v))return v.toISOString();if(!c&&A.isBlob(v))throw new V("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(v)||A.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function f(v,m,w){let _=v;if(v&&!w&&typeof v=="object"){if(A.endsWith(m,"{}"))m=r?m:m.slice(0,-2),v=JSON.stringify(v);else if(A.isArray(v)&&fv(v)||(A.isFileList(v)||A.endsWith(m,"[]"))&&(_=A.toArray(v)))return m=Va(m),_.forEach(function(T,I){!(A.isUndefined(T)||T===null)&&t.append(s===!0?ms([m],I,i):s===null?m:m+"[]",a(T))}),!1}return ji(v)?!0:(t.append(ms(w,m,i),a(v)),!1)}const l=[],p=Object.assign(lv,{defaultVisitor:f,convertValue:a,isVisitable:ji});function g(v,m){if(!A.isUndefined(v)){if(l.indexOf(v)!==-1)throw Error("Circular reference detected in "+m.join("."));l.push(v),A.forEach(v,function(_,S){(!(A.isUndefined(_)||_===null)&&o.call(t,_,A.isString(S)?S.trim():S,m,p))===!0&&g(_,m?m.concat(S):[S])}),l.pop()}}if(!A.isObject(n))throw new TypeError("data must be an object");return g(n),t}function bs(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function ho(n,t){this._pairs=[],n&&Or(n,this,t)}const Ha=ho.prototype;Ha.append=function(t,e){this._pairs.push([t,e])};Ha.toString=function(t){const e=t?function(r){return t.call(this,r,bs)}:bs;return this._pairs.map(function(o){return e(o[0])+"="+e(o[1])},"").join("&")};function hv(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ga(n,t,e){if(!t)return n;const r=e&&e.encode||hv;A.isFunction(e)&&(e={serialize:e});const o=e&&e.serialize;let i;if(o?i=o(t,e):i=A.isURLSearchParams(t)?t.toString():new ho(t,e).toString(r),i){const s=n.indexOf("#");s!==-1&&(n=n.slice(0,s)),n+=(n.indexOf("?")===-1?"?":"&")+i}return n}class dv{constructor(){this.handlers=[]}use(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){A.forEach(this.handlers,function(r){r!==null&&t(r)})}}const ws=dv,$a={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pv=typeof URLSearchParams<"u"?URLSearchParams:ho,gv=typeof FormData<"u"?FormData:null,vv=typeof Blob<"u"?Blob:null,yv={isBrowser:!0,classes:{URLSearchParams:pv,FormData:gv,Blob:vv},protocols:["http","https","file","blob","url","data"]},po=typeof window<"u"&&typeof document<"u",Ki=typeof navigator=="object"&&navigator||void 0,mv=po&&(!Ki||["ReactNative","NativeScript","NS"].indexOf(Ki.product)<0),bv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),wv=po&&window.location.href||"http://localhost",Sv=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:po,hasStandardBrowserEnv:mv,hasStandardBrowserWebWorkerEnv:bv,navigator:Ki,origin:wv},Symbol.toStringTag,{value:"Module"})),Ce={...Sv,...yv};function _v(n,t){return Or(n,new Ce.classes.URLSearchParams,Object.assign({visitor:function(e,r,o,i){return Ce.isNode&&A.isBuffer(e)?(this.append(r,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function Ev(n){return A.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Tv(n){const t={},e=Object.keys(n);let r;const o=e.length;let i;for(r=0;r<o;r++)i=e[r],t[i]=n[i];return t}function za(n){function t(e,r,o,i){let s=e[i++];if(s==="__proto__")return!0;const u=Number.isFinite(+s),c=i>=e.length;return s=!s&&A.isArray(o)?o.length:s,c?(A.hasOwnProp(o,s)?o[s]=[o[s],r]:o[s]=r,!u):((!o[s]||!A.isObject(o[s]))&&(o[s]=[]),t(e,r,o[s],i)&&A.isArray(o[s])&&(o[s]=Tv(o[s])),!u)}if(A.isFormData(n)&&A.isFunction(n.entries)){const e={};return A.forEachEntry(n,(r,o)=>{t(Ev(r),o,e,0)}),e}return null}function Av(n,t,e){if(A.isString(n))try{return(t||JSON.parse)(n),A.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(e||JSON.stringify)(n)}const go={transitional:$a,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const r=e.getContentType()||"",o=r.indexOf("application/json")>-1,i=A.isObject(t);if(i&&A.isHTMLForm(t)&&(t=new FormData(t)),A.isFormData(t))return o?JSON.stringify(za(t)):t;if(A.isArrayBuffer(t)||A.isBuffer(t)||A.isStream(t)||A.isFile(t)||A.isBlob(t)||A.isReadableStream(t))return t;if(A.isArrayBufferView(t))return t.buffer;if(A.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return _v(t,this.formSerializer).toString();if((u=A.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Or(u?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||o?(e.setContentType("application/json",!1),Av(t)):t}],transformResponse:[function(t){const e=this.transitional||go.transitional,r=e&&e.forcedJSONParsing,o=this.responseType==="json";if(A.isResponse(t)||A.isReadableStream(t))return t;if(t&&A.isString(t)&&(r&&!this.responseType||o)){const s=!(e&&e.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(u){if(s)throw u.name==="SyntaxError"?V.from(u,V.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ce.classes.FormData,Blob:Ce.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],n=>{go.headers[n]={}});const vo=go,Iv=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Cv=n=>{const t={};let e,r,o;return n&&n.split(`
`).forEach(function(s){o=s.indexOf(":"),e=s.substring(0,o).trim().toLowerCase(),r=s.substring(o+1).trim(),!(!e||t[e]&&Iv[e])&&(e==="set-cookie"?t[e]?t[e].push(r):t[e]=[r]:t[e]=t[e]?t[e]+", "+r:r)}),t},Ss=Symbol("internals");function sn(n){return n&&String(n).trim().toLowerCase()}function zn(n){return n===!1||n==null?n:A.isArray(n)?n.map(zn):String(n)}function Ov(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=e.exec(n);)t[r[1]]=r[2];return t}const xv=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function ii(n,t,e,r,o){if(A.isFunction(r))return r.call(this,t,e);if(o&&(t=e),!!A.isString(t)){if(A.isString(r))return t.indexOf(r)!==-1;if(A.isRegExp(r))return r.test(t)}}function Nv(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,r)=>e.toUpperCase()+r)}function Rv(n,t){const e=A.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+e,{value:function(o,i,s){return this[r].call(this,t,o,i,s)},configurable:!0})})}class xr{constructor(t){t&&this.set(t)}set(t,e,r){const o=this;function i(u,c,a){const f=sn(c);if(!f)throw new Error("header name must be a non-empty string");const l=A.findKey(o,f);(!l||o[l]===void 0||a===!0||a===void 0&&o[l]!==!1)&&(o[l||c]=zn(u))}const s=(u,c)=>A.forEach(u,(a,f)=>i(a,f,c));if(A.isPlainObject(t)||t instanceof this.constructor)s(t,e);else if(A.isString(t)&&(t=t.trim())&&!xv(t))s(Cv(t),e);else if(A.isObject(t)&&A.isIterable(t)){let u={},c,a;for(const f of t){if(!A.isArray(f))throw TypeError("Object iterator must return a key-value pair");u[a=f[0]]=(c=u[a])?A.isArray(c)?[...c,f[1]]:[c,f[1]]:f[1]}s(u,e)}else t!=null&&i(e,t,r);return this}get(t,e){if(t=sn(t),t){const r=A.findKey(this,t);if(r){const o=this[r];if(!e)return o;if(e===!0)return Ov(o);if(A.isFunction(e))return e.call(this,o,r);if(A.isRegExp(e))return e.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=sn(t),t){const r=A.findKey(this,t);return!!(r&&this[r]!==void 0&&(!e||ii(this,this[r],r,e)))}return!1}delete(t,e){const r=this;let o=!1;function i(s){if(s=sn(s),s){const u=A.findKey(r,s);u&&(!e||ii(r,r[u],u,e))&&(delete r[u],o=!0)}}return A.isArray(t)?t.forEach(i):i(t),o}clear(t){const e=Object.keys(this);let r=e.length,o=!1;for(;r--;){const i=e[r];(!t||ii(this,this[i],i,t,!0))&&(delete this[i],o=!0)}return o}normalize(t){const e=this,r={};return A.forEach(this,(o,i)=>{const s=A.findKey(r,i);if(s){e[s]=zn(o),delete e[i];return}const u=t?Nv(i):String(i).trim();u!==i&&delete e[i],e[u]=zn(o),r[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return A.forEach(this,(r,o)=>{r!=null&&r!==!1&&(e[o]=t&&A.isArray(r)?r.join(", "):r)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const r=new this(t);return e.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[Ss]=this[Ss]={accessors:{}}).accessors,o=this.prototype;function i(s){const u=sn(s);r[u]||(Rv(o,s),r[u]=!0)}return A.isArray(t)?t.forEach(i):i(t),this}}xr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(xr.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(r){this[e]=r}}});A.freezeMethods(xr);const Ze=xr;function oi(n,t){const e=this||vo,r=t||e,o=Ze.from(r.headers);let i=r.data;return A.forEach(n,function(u){i=u.call(e,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}function Wa(n){return!!(n&&n.__CANCEL__)}function tn(n,t,e){V.call(this,n??"canceled",V.ERR_CANCELED,t,e),this.name="CanceledError"}A.inherits(tn,V,{__CANCEL__:!0});function Ya(n,t,e){const r=e.config.validateStatus;!e.status||!r||r(e.status)?n(e):t(new V("Request failed with status code "+e.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function Dv(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function kv(n,t){n=n||10;const e=new Array(n),r=new Array(n);let o=0,i=0,s;return t=t!==void 0?t:1e3,function(c){const a=Date.now(),f=r[i];s||(s=a),e[o]=c,r[o]=a;let l=i,p=0;for(;l!==o;)p+=e[l++],l=l%n;if(o=(o+1)%n,o===i&&(i=(i+1)%n),a-s<t)return;const g=f&&a-f;return g?Math.round(p*1e3/g):void 0}}function Pv(n,t){let e=0,r=1e3/t,o,i;const s=(a,f=Date.now())=>{e=f,o=null,i&&(clearTimeout(i),i=null),n.apply(null,a)};return[(...a)=>{const f=Date.now(),l=f-e;l>=r?s(a,f):(o=a,i||(i=setTimeout(()=>{i=null,s(o)},r-l)))},()=>o&&s(o)]}const ur=(n,t,e=3)=>{let r=0;const o=kv(50,250);return Pv(i=>{const s=i.loaded,u=i.lengthComputable?i.total:void 0,c=s-r,a=o(c),f=s<=u;r=s;const l={loaded:s,total:u,progress:u?s/u:void 0,bytes:c,rate:a||void 0,estimated:a&&u&&f?(u-s)/a:void 0,event:i,lengthComputable:u!=null,[t?"download":"upload"]:!0};n(l)},e)},_s=(n,t)=>{const e=n!=null;return[r=>t[0]({lengthComputable:e,total:n,loaded:r}),t[1]]},Es=n=>(...t)=>A.asap(()=>n(...t)),Uv=Ce.hasStandardBrowserEnv?((n,t)=>e=>(e=new URL(e,Ce.origin),n.protocol===e.protocol&&n.host===e.host&&(t||n.port===e.port)))(new URL(Ce.origin),Ce.navigator&&/(msie|trident)/i.test(Ce.navigator.userAgent)):()=>!0,Fv=Ce.hasStandardBrowserEnv?{write(n,t,e,r,o,i){const s=[n+"="+encodeURIComponent(t)];A.isNumber(e)&&s.push("expires="+new Date(e).toGMTString()),A.isString(r)&&s.push("path="+r),A.isString(o)&&s.push("domain="+o),i===!0&&s.push("secure"),document.cookie=s.join("; ")},read(n){const t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Mv(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Lv(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function Ja(n,t,e){let r=!Mv(t);return n&&(r||e==!1)?Lv(n,t):t}const Ts=n=>n instanceof Ze?{...n}:n;function kt(n,t){t=t||{};const e={};function r(a,f,l,p){return A.isPlainObject(a)&&A.isPlainObject(f)?A.merge.call({caseless:p},a,f):A.isPlainObject(f)?A.merge({},f):A.isArray(f)?f.slice():f}function o(a,f,l,p){if(A.isUndefined(f)){if(!A.isUndefined(a))return r(void 0,a,l,p)}else return r(a,f,l,p)}function i(a,f){if(!A.isUndefined(f))return r(void 0,f)}function s(a,f){if(A.isUndefined(f)){if(!A.isUndefined(a))return r(void 0,a)}else return r(void 0,f)}function u(a,f,l){if(l in t)return r(a,f);if(l in n)return r(void 0,a)}const c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u,headers:(a,f,l)=>o(Ts(a),Ts(f),l,!0)};return A.forEach(Object.keys(Object.assign({},n,t)),function(f){const l=c[f]||o,p=l(n[f],t[f],f);A.isUndefined(p)&&l!==u||(e[f]=p)}),e}const Xa=n=>{const t=kt({},n);let{data:e,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:i,headers:s,auth:u}=t;t.headers=s=Ze.from(s),t.url=Ga(Ja(t.baseURL,t.url,t.allowAbsoluteUrls),n.params,n.paramsSerializer),u&&s.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let c;if(A.isFormData(e)){if(Ce.hasStandardBrowserEnv||Ce.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((c=s.getContentType())!==!1){const[a,...f]=c?c.split(";").map(l=>l.trim()).filter(Boolean):[];s.setContentType([a||"multipart/form-data",...f].join("; "))}}if(Ce.hasStandardBrowserEnv&&(r&&A.isFunction(r)&&(r=r(t)),r||r!==!1&&Uv(t.url))){const a=o&&i&&Fv.read(i);a&&s.set(o,a)}return t},Bv=typeof XMLHttpRequest<"u",jv=Bv&&function(n){return new Promise(function(e,r){const o=Xa(n);let i=o.data;const s=Ze.from(o.headers).normalize();let{responseType:u,onUploadProgress:c,onDownloadProgress:a}=o,f,l,p,g,v;function m(){g&&g(),v&&v(),o.cancelToken&&o.cancelToken.unsubscribe(f),o.signal&&o.signal.removeEventListener("abort",f)}let w=new XMLHttpRequest;w.open(o.method.toUpperCase(),o.url,!0),w.timeout=o.timeout;function _(){if(!w)return;const T=Ze.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),N={data:!u||u==="text"||u==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:T,config:n,request:w};Ya(function(U){e(U),m()},function(U){r(U),m()},N),w=null}"onloadend"in w?w.onloadend=_:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(_)},w.onabort=function(){w&&(r(new V("Request aborted",V.ECONNABORTED,n,w)),w=null)},w.onerror=function(){r(new V("Network Error",V.ERR_NETWORK,n,w)),w=null},w.ontimeout=function(){let I=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const N=o.transitional||$a;o.timeoutErrorMessage&&(I=o.timeoutErrorMessage),r(new V(I,N.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,n,w)),w=null},i===void 0&&s.setContentType(null),"setRequestHeader"in w&&A.forEach(s.toJSON(),function(I,N){w.setRequestHeader(N,I)}),A.isUndefined(o.withCredentials)||(w.withCredentials=!!o.withCredentials),u&&u!=="json"&&(w.responseType=o.responseType),a&&([p,v]=ur(a,!0),w.addEventListener("progress",p)),c&&w.upload&&([l,g]=ur(c),w.upload.addEventListener("progress",l),w.upload.addEventListener("loadend",g)),(o.cancelToken||o.signal)&&(f=T=>{w&&(r(!T||T.type?new tn(null,n,w):T),w.abort(),w=null)},o.cancelToken&&o.cancelToken.subscribe(f),o.signal&&(o.signal.aborted?f():o.signal.addEventListener("abort",f)));const S=Dv(o.url);if(S&&Ce.protocols.indexOf(S)===-1){r(new V("Unsupported protocol "+S+":",V.ERR_BAD_REQUEST,n));return}w.send(i||null)})},Kv=(n,t)=>{const{length:e}=n=n?n.filter(Boolean):[];if(t||e){let r=new AbortController,o;const i=function(a){if(!o){o=!0,u();const f=a instanceof Error?a:this.reason;r.abort(f instanceof V?f:new tn(f instanceof Error?f.message:f))}};let s=t&&setTimeout(()=>{s=null,i(new V(`timeout ${t} of ms exceeded`,V.ETIMEDOUT))},t);const u=()=>{n&&(s&&clearTimeout(s),s=null,n.forEach(a=>{a.unsubscribe?a.unsubscribe(i):a.removeEventListener("abort",i)}),n=null)};n.forEach(a=>a.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>A.asap(u),c}},qv=Kv,Vv=function*(n,t){let e=n.byteLength;if(!t||e<t){yield n;return}let r=0,o;for(;r<e;)o=r+t,yield n.slice(r,o),r=o},Hv=async function*(n,t){for await(const e of Gv(n))yield*Vv(e,t)},Gv=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const t=n.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},As=(n,t,e,r)=>{const o=Hv(n,t);let i=0,s,u=c=>{s||(s=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:a,value:f}=await o.next();if(a){u(),c.close();return}let l=f.byteLength;if(e){let p=i+=l;e(p)}c.enqueue(new Uint8Array(f))}catch(a){throw u(a),a}},cancel(c){return u(c),o.return()}},{highWaterMark:2})},Nr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Qa=Nr&&typeof ReadableStream=="function",$v=Nr&&(typeof TextEncoder=="function"?(n=>t=>n.encode(t))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Za=(n,...t)=>{try{return!!n(...t)}catch{return!1}},zv=Qa&&Za(()=>{let n=!1;const t=new Request(Ce.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!t}),Is=64*1024,qi=Qa&&Za(()=>A.isReadableStream(new Response("").body)),cr={stream:qi&&(n=>n.body)};Nr&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!cr[t]&&(cr[t]=A.isFunction(n[t])?e=>e[t]():(e,r)=>{throw new V(`Response type '${t}' is not supported`,V.ERR_NOT_SUPPORT,r)})})})(new Response);const Wv=async n=>{if(n==null)return 0;if(A.isBlob(n))return n.size;if(A.isSpecCompliantForm(n))return(await new Request(Ce.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(A.isArrayBufferView(n)||A.isArrayBuffer(n))return n.byteLength;if(A.isURLSearchParams(n)&&(n=n+""),A.isString(n))return(await $v(n)).byteLength},Yv=async(n,t)=>{const e=A.toFiniteNumber(n.getContentLength());return e??Wv(t)},Jv=Nr&&(async n=>{let{url:t,method:e,data:r,signal:o,cancelToken:i,timeout:s,onDownloadProgress:u,onUploadProgress:c,responseType:a,headers:f,withCredentials:l="same-origin",fetchOptions:p}=Xa(n);a=a?(a+"").toLowerCase():"text";let g=qv([o,i&&i.toAbortSignal()],s),v;const m=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let w;try{if(c&&zv&&e!=="get"&&e!=="head"&&(w=await Yv(f,r))!==0){let N=new Request(t,{method:"POST",body:r,duplex:"half"}),D;if(A.isFormData(r)&&(D=N.headers.get("content-type"))&&f.setContentType(D),N.body){const[U,k]=_s(w,ur(Es(c)));r=As(N.body,Is,U,k)}}A.isString(l)||(l=l?"include":"omit");const _="credentials"in Request.prototype;v=new Request(t,{...p,signal:g,method:e.toUpperCase(),headers:f.normalize().toJSON(),body:r,duplex:"half",credentials:_?l:void 0});let S=await fetch(v);const T=qi&&(a==="stream"||a==="response");if(qi&&(u||T&&m)){const N={};["status","statusText","headers"].forEach(B=>{N[B]=S[B]});const D=A.toFiniteNumber(S.headers.get("content-length")),[U,k]=u&&_s(D,ur(Es(u),!0))||[];S=new Response(As(S.body,Is,U,()=>{k&&k(),m&&m()}),N)}a=a||"text";let I=await cr[A.findKey(cr,a)||"text"](S,n);return!T&&m&&m(),await new Promise((N,D)=>{Ya(N,D,{data:I,headers:Ze.from(S.headers),status:S.status,statusText:S.statusText,config:n,request:v})})}catch(_){throw m&&m(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new V("Network Error",V.ERR_NETWORK,n,v),{cause:_.cause||_}):V.from(_,_&&_.code,n,v)}}),Vi={http:cv,xhr:jv,fetch:Jv};A.forEach(Vi,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const Cs=n=>`- ${n}`,Xv=n=>A.isFunction(n)||n===null||n===!1,eu={getAdapter:n=>{n=A.isArray(n)?n:[n];const{length:t}=n;let e,r;const o={};for(let i=0;i<t;i++){e=n[i];let s;if(r=e,!Xv(e)&&(r=Vi[(s=String(e)).toLowerCase()],r===void 0))throw new V(`Unknown adapter '${s}'`);if(r)break;o[s||"#"+i]=r}if(!r){const i=Object.entries(o).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=t?i.length>1?`since :
`+i.map(Cs).join(`
`):" "+Cs(i[0]):"as no adapter specified";throw new V("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:Vi};function si(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new tn(null,n)}function Os(n){return si(n),n.headers=Ze.from(n.headers),n.data=oi.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),eu.getAdapter(n.adapter||vo.adapter)(n).then(function(r){return si(n),r.data=oi.call(n,n.transformResponse,r),r.headers=Ze.from(r.headers),r},function(r){return Wa(r)||(si(n),r&&r.response&&(r.response.data=oi.call(n,n.transformResponse,r.response),r.response.headers=Ze.from(r.response.headers))),Promise.reject(r)})}const tu="1.9.0",Rr={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{Rr[n]=function(r){return typeof r===n||"a"+(t<1?"n ":" ")+n}});const xs={};Rr.transitional=function(t,e,r){function o(i,s){return"[Axios v"+tu+"] Transitional option '"+i+"'"+s+(r?". "+r:"")}return(i,s,u)=>{if(t===!1)throw new V(o(s," has been removed"+(e?" in "+e:"")),V.ERR_DEPRECATED);return e&&!xs[s]&&(xs[s]=!0,console.warn(o(s," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(i,s,u):!0}};Rr.spelling=function(t){return(e,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Qv(n,t,e){if(typeof n!="object")throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let o=r.length;for(;o-- >0;){const i=r[o],s=t[i];if(s){const u=n[i],c=u===void 0||s(u,i,n);if(c!==!0)throw new V("option "+i+" must be "+c,V.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new V("Unknown option "+i,V.ERR_BAD_OPTION)}}const Wn={assertOptions:Qv,validators:Rr},it=Wn.validators;class fr{constructor(t){this.defaults=t||{},this.interceptors={request:new ws,response:new ws}}async request(t,e){try{return await this._request(t,e)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const i=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=kt(this.defaults,e);const{transitional:r,paramsSerializer:o,headers:i}=e;r!==void 0&&Wn.assertOptions(r,{silentJSONParsing:it.transitional(it.boolean),forcedJSONParsing:it.transitional(it.boolean),clarifyTimeoutError:it.transitional(it.boolean)},!1),o!=null&&(A.isFunction(o)?e.paramsSerializer={serialize:o}:Wn.assertOptions(o,{encode:it.function,serialize:it.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Wn.assertOptions(e,{baseUrl:it.spelling("baseURL"),withXsrfToken:it.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let s=i&&A.merge(i.common,i[e.method]);i&&A.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),e.headers=Ze.concat(s,i);const u=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(e)===!1||(c=c&&m.synchronous,u.unshift(m.fulfilled,m.rejected))});const a=[];this.interceptors.response.forEach(function(m){a.push(m.fulfilled,m.rejected)});let f,l=0,p;if(!c){const v=[Os.bind(this),void 0];for(v.unshift.apply(v,u),v.push.apply(v,a),p=v.length,f=Promise.resolve(e);l<p;)f=f.then(v[l++],v[l++]);return f}p=u.length;let g=e;for(l=0;l<p;){const v=u[l++],m=u[l++];try{g=v(g)}catch(w){m.call(this,w);break}}try{f=Os.call(this,g)}catch(v){return Promise.reject(v)}for(l=0,p=a.length;l<p;)f=f.then(a[l++],a[l++]);return f}getUri(t){t=kt(this.defaults,t);const e=Ja(t.baseURL,t.url,t.allowAbsoluteUrls);return Ga(e,t.params,t.paramsSerializer)}}A.forEach(["delete","get","head","options"],function(t){fr.prototype[t]=function(e,r){return this.request(kt(r||{},{method:t,url:e,data:(r||{}).data}))}});A.forEach(["post","put","patch"],function(t){function e(r){return function(i,s,u){return this.request(kt(u||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:s}))}}fr.prototype[t]=e(),fr.prototype[t+"Form"]=e(!0)});const Yn=fr;class yo{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(i){e=i});const r=this;this.promise.then(o=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](o);r._listeners=null}),this.promise.then=o=>{let i;const s=new Promise(u=>{r.subscribe(u),i=u}).then(o);return s.cancel=function(){r.unsubscribe(i)},s},t(function(i,s,u){r.reason||(r.reason=new tn(i,s,u),e(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=r=>{t.abort(r)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new yo(function(o){t=o}),cancel:t}}}const Zv=yo;function ey(n){return function(e){return n.apply(null,e)}}function ty(n){return A.isObject(n)&&n.isAxiosError===!0}const Hi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hi).forEach(([n,t])=>{Hi[t]=n});const ny=Hi;function nu(n){const t=new Yn(n),e=ka(Yn.prototype.request,t);return A.extend(e,Yn.prototype,t,{allOwnKeys:!0}),A.extend(e,t,null,{allOwnKeys:!0}),e.create=function(o){return nu(kt(n,o))},e}const he=nu(vo);he.Axios=Yn;he.CanceledError=tn;he.CancelToken=Zv;he.isCancel=Wa;he.VERSION=tu;he.toFormData=Or;he.AxiosError=V;he.Cancel=he.CanceledError;he.all=function(t){return Promise.all(t)};he.spread=ey;he.isAxiosError=ty;he.mergeConfig=kt;he.AxiosHeaders=Ze;he.formToJSON=n=>za(A.isHTMLForm(n)?new FormData(n):n);he.getAdapter=eu.getAdapter;he.HttpStatusCode=ny;he.default=he;const Pn=he;var jt=new fe("RestClient"),ru=function(){function n(t){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=pt,this._options=t,jt.debug("API Options",this._options),this._cancelTokenMap==null&&(this._cancelTokenMap=new WeakMap)}return n.prototype.ajax=function(t,e,r){return Ra(this,void 0,void 0,function(){var o,i,s,u,c,a,f,l,p,g,v,m,w,_,S,T,I,N,D,U,k,B;return Da(this,function(K){switch(K.label){case 0:return jt.debug(e,t),s="us-east-1",u="execute-api",c=void 0,typeof t=="string"?(o=this._parseUrl(t),i=t):(i=t.endpoint,c=t.custom_header,s=t.region,u=t.service,o=this._parseUrl(t.endpoint)),a={method:e,url:i,host:o.host,path:o.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},f={},l=Object.assign({},r),p=l.response,l.body&&(typeof FormData=="function"&&l.body instanceof FormData?(f["Content-Type"]="multipart/form-data",a.data=l.body):(f["Content-Type"]="application/json; charset=UTF-8",a.data=JSON.stringify(l.body))),l.responseType&&(a.responseType=l.responseType),l.withCredentials&&(a.withCredentials=l.withCredentials),l.timeout&&(a.timeout=l.timeout),l.cancellableToken&&(a.cancelToken=l.cancellableToken.token),a.signerServiceInfo=l.signerServiceInfo,typeof c!="function"?[3,2]:[4,c()];case 1:return v=K.sent(),[3,3];case 2:v=void 0,K.label=3;case 3:if(g=v,a.headers=Ke(Ke(Ke({},f),g),l.headers),m=at(i,!0,!0),m.search,w=Li(m,["search"]),a.url=Pd(Ke(Ke({},w),{query:Ke(Ke({},w.query),l.queryStringParameters||{})})),typeof a.headers.Authorization<"u")return a.headers=Object.keys(a.headers).reduce(function(X,re){return a.headers[re]&&(X[re]=a.headers[re]),X},{}),[2,this._request(a,p)];K.label=4;case 4:return K.trys.push([4,6,,7]),[4,this.Credentials.get()];case 5:return _=K.sent(),[3,7];case 6:return K.sent(),jt.debug("No credentials available, the request will be unsigned"),[2,this._request(a,p)];case 7:return K.trys.push([7,9,,10]),S=this._sign(Ke({},a),_,{region:s,service:u}),[4,Pn(S)];case 8:return T=K.sent(),[2,p?T:T.data];case 9:if(I=K.sent(),jt.debug(I),qe.isClockSkewError(I)&&(N=I.response.headers,D=N&&(N.date||N.Date),U=new Date(D),k=qe.getDateFromHeaderString(S.headers["x-amz-date"]),qe.isClockSkewed(U)))return B=k.getTime()-qe.getClockOffset(),qe.setClockOffset(U.getTime()-B),[2,this.ajax(t,e,r)];throw I;case 10:return[2]}})})},n.prototype.get=function(t,e){return this.ajax(t,"GET",e)},n.prototype.put=function(t,e){return this.ajax(t,"PUT",e)},n.prototype.patch=function(t,e){return this.ajax(t,"PATCH",e)},n.prototype.post=function(t,e){return this.ajax(t,"POST",e)},n.prototype.del=function(t,e){return this.ajax(t,"DELETE",e)},n.prototype.head=function(t,e){return this.ajax(t,"HEAD",e)},n.prototype.cancel=function(t,e){var r=this._cancelTokenMap.get(t);return r?(r.cancel(e),!0):!1},n.prototype.hasCancelToken=function(t){return this._cancelTokenMap.has(t)},n.prototype.isCancel=function(t){return Pn.isCancel(t)},n.prototype.getCancellableToken=function(){return Pn.CancelToken.source()},n.prototype.updateRequestToBeCancellable=function(t,e){this._cancelTokenMap.set(t,e)},n.prototype.endpoint=function(t){var e=this,r=this._options.endpoints,o="";return Array.isArray(r)&&r.forEach(function(i){i.name===t&&(o=i.endpoint,typeof i.region=="string"?e._region=i.region:typeof e._options.region=="string"&&(e._region=e._options.region),typeof i.service=="string"?e._service=i.service||"execute-api":e._service="execute-api",typeof i.custom_header=="function"?e._custom_header=i.custom_header:e._custom_header=void 0)}),o},n.prototype._sign=function(t,e,r){var o=r.service,i=r.region,s=t.signerServiceInfo,u=Li(t,["signerServiceInfo"]),c=i||this._region||this._options.region,a=o||this._service||this._options.service,f={secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken},l={region:c,service:a},p=Object.assign(l,s),g=Js.sign(u,f,p);return g.data&&(g.body=g.data),jt.debug("Signed Request: ",g),delete g.headers.host,g},n.prototype._request=function(t,e){return e===void 0&&(e=!1),Pn(t).then(function(r){return e?r:r.data}).catch(function(r){throw jt.debug(r),r})},n.prototype._parseUrl=function(t){var e=t.split("/");return{host:e[2],path:"/"+e.slice(3).join("/")}},n}(),Un=new fe("RestAPI"),iu=function(){function n(t){this._api=null,this.Credentials=pt,this._options=t,Un.debug("API Options",this._options)}return n.prototype.getModuleName=function(){return"RestAPI"},n.prototype.configure=function(t){var e=t||{},r=e.API,o=r===void 0?{}:r,i=Li(e,["API"]),s=Ke(Ke({},i),o);if(Un.debug("configure Rest API",{opt:s}),s.aws_project_region){if(s.aws_cloud_logic_custom){var u=s.aws_cloud_logic_custom;s.endpoints=typeof u=="string"?JSON.parse(u):u}s=Object.assign({},s,{region:s.aws_project_region,header:{}})}return Array.isArray(s.endpoints)?s.endpoints.forEach(function(c){typeof c.custom_header<"u"&&typeof c.custom_header!="function"&&(Un.warn("Rest API "+c.name+", custom_header should be a function"),c.custom_header=void 0)}):this._options&&Array.isArray(this._options.endpoints)?s.endpoints=this._options.endpoints:s.endpoints=[],this._options=Object.assign({},this._options,s),this.createInstance(),this._options},n.prototype.createInstance=function(){return Un.debug("create Rest API instance"),this._api=new ru(this._options),this._api.Credentials=this.Credentials,!0},n.prototype.get=function(t,e,r){try{var o=this.getEndpointInfo(t,e),i=this._api.getCancellableToken(),s=Object.assign({},r);s.cancellableToken=i;var u=this._api.get(o,s);return this._api.updateRequestToBeCancellable(u,i),u}catch(c){return Promise.reject(c.message)}},n.prototype.post=function(t,e,r){try{var o=this.getEndpointInfo(t,e),i=this._api.getCancellableToken(),s=Object.assign({},r);s.cancellableToken=i;var u=this._api.post(o,s);return this._api.updateRequestToBeCancellable(u,i),u}catch(c){return Promise.reject(c.message)}},n.prototype.put=function(t,e,r){try{var o=this.getEndpointInfo(t,e),i=this._api.getCancellableToken(),s=Object.assign({},r);s.cancellableToken=i;var u=this._api.put(o,s);return this._api.updateRequestToBeCancellable(u,i),u}catch(c){return Promise.reject(c.message)}},n.prototype.patch=function(t,e,r){try{var o=this.getEndpointInfo(t,e),i=this._api.getCancellableToken(),s=Object.assign({},r);s.cancellableToken=i;var u=this._api.patch(o,s);return this._api.updateRequestToBeCancellable(u,i),u}catch(c){return Promise.reject(c.message)}},n.prototype.del=function(t,e,r){try{var o=this.getEndpointInfo(t,e),i=this._api.getCancellableToken(),s=Object.assign({},r);s.cancellableToken=i;var u=this._api.del(o,s);return this._api.updateRequestToBeCancellable(u,i),u}catch(c){return Promise.reject(c.message)}},n.prototype.head=function(t,e,r){try{var o=this.getEndpointInfo(t,e),i=this._api.getCancellableToken(),s=Object.assign({},r);s.cancellableToken=i;var u=this._api.head(o,s);return this._api.updateRequestToBeCancellable(u,i),u}catch(c){return Promise.reject(c.message)}},n.prototype.isCancel=function(t){return this._api.isCancel(t)},n.prototype.cancel=function(t,e){return this._api.cancel(t,e)},n.prototype.hasCancelToken=function(t){return this._api.hasCancelToken(t)},n.prototype.endpoint=function(t){return Ra(this,void 0,void 0,function(){return Da(this,function(e){return[2,this._api.endpoint(t)]})})},n.prototype.getEndpointInfo=function(t,e){var r=this._options.endpoints;if(!Array.isArray(r))throw new Error("API category not configured");var o=r.find(function(s){return s.name===t});if(!o)throw new Error("API ".concat(t," does not exist"));var i={endpoint:o.endpoint+e};return typeof o.region=="string"?i.region=o.region:typeof this._options.region=="string"&&(i.region=this._options.region),typeof o.service=="string"?i.service=o.service||"execute-api":i.service="execute-api",typeof o.custom_header=="function"?i.custom_header=o.custom_header:i.custom_header=void 0,i},n}(),ry=new iu(null);gt.register(ry);var iy="x-amz-user-agent",Ct=new fe("GraphQLAPI"),ou=function(){function n(t){this._api=null,this.Auth=Yt,this.Cache=gn,this.Credentials=pt,this._options=t,Ct.debug("API Options",this._options)}return n.prototype.getModuleName=function(){return"InternalGraphQLAPI"},n.prototype.configure=function(t){var e=t||{},r=e.API,o=r===void 0?{}:r,i=lp(e,["API"]),s=dt(dt({},i),o);return Ct.debug("configure GraphQL API",{opt:s}),s.aws_project_region&&(s=Object.assign({},s,{region:s.aws_project_region,header:{}})),typeof s.graphql_headers<"u"&&typeof s.graphql_headers!="function"&&(Ct.warn("graphql_headers should be a function"),s.graphql_headers=void 0),this._options=Object.assign({},this._options,s),this.createInstance(),this._options},n.prototype.createInstance=function(){return Ct.debug("create Rest instance"),this._options?(this._api=new ru(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},n.prototype._headerBasedAuth=function(t,e){return e===void 0&&(e={}),Jr(this,void 0,void 0,function(){var r,o,i,s,u,c,a,f,l,p,g;return Xr(this,function(v){switch(v.label){case 0:switch(r=this._options,o=r.aws_appsync_authenticationType,i=r.aws_appsync_apiKey,s=t||o||"AWS_IAM",u={},c=s,c){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11];case"AWS_LAMBDA":return[3,15]}return[3,16];case 1:if(!i)throw new Error(wt.NO_API_KEY);return u={Authorization:null,"X-Api-Key":i},[3,17];case 2:return[4,this._ensureCredentials()];case 3:if(a=v.sent(),!a)throw new Error(wt.NO_CREDENTIALS);return[3,17];case 4:return v.trys.push([4,9,,10]),f=void 0,[4,gn.getItem("federatedInfo")];case 5:return l=v.sent(),l?(f=l.token,[3,8]):[3,6];case 6:return[4,Yt.currentAuthenticatedUser()];case 7:p=v.sent(),p&&(f=p.token),v.label=8;case 8:if(!f)throw new Error(wt.NO_FEDERATED_JWT);return u={Authorization:f},[3,10];case 9:throw v.sent(),new Error(wt.NO_CURRENT_USER);case 10:return[3,17];case 11:return v.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return g=v.sent(),u={Authorization:g.getAccessToken().getJwtToken()},[3,14];case 13:throw v.sent(),new Error(wt.NO_CURRENT_USER);case 14:return[3,17];case 15:if(!e.Authorization)throw new Error(wt.NO_AUTH_TOKEN);return u={Authorization:e.Authorization},[3,17];case 16:return u={Authorization:null},[3,17];case 17:return[2,u]}})})},n.prototype.getGraphqlOperationType=function(t){var e=ei(t),r=e.definitions,o=is(r,1),i=o[0].operation;return i},n.prototype.graphql=function(t,e,r){var o=t.query,i=t.variables,s=i===void 0?{}:i,u=t.authMode,c=t.authToken,a=ei(typeof o=="string"?o:ni(o)),f=is(a.definitions.filter(function(S){return S.kind==="OperationDefinition"}),1),l=f[0],p=l===void 0?{}:l,g=p.operation,v=e||{};switch(c&&(v.Authorization=c),g){case"query":case"mutation":this.createInstanceIfNotCreated();var m=this._api.getCancellableToken(),w={cancellableToken:m,withCredentials:this._options.withCredentials},_=this._graphql({query:a,variables:s,authMode:u},v,w,r);return this._api.updateRequestToBeCancellable(_,m),_;case"subscription":return this._graphqlSubscribe({query:a,variables:s,authMode:u},v,r);default:throw new Error("invalid operation type: ".concat(g))}},n.prototype._graphql=function(t,e,r,o){var i=t.query,s=t.variables,u=t.authMode;return e===void 0&&(e={}),r===void 0&&(r={}),Jr(this,void 0,void 0,function(){var c,a,f,l,p,g,v,m,w,_,S,T,I,N,D,U,k,B,K,X,re,oe;return Xr(this,function(z){switch(z.label){case 0:return this.createInstanceIfNotCreated(),c=this._options,a=c.aws_appsync_region,f=c.aws_appsync_graphqlEndpoint,l=c.graphql_headers,p=l===void 0?function(){return{}}:l,g=c.graphql_endpoint,v=c.graphql_endpoint_iam_region,w=[{}],_=!g,_?[4,this._headerBasedAuth(u,e)]:[3,2];case 1:_=z.sent(),z.label=2;case 2:return S=[dt.apply(void 0,w.concat([_]))],T=g,T?v?[4,this._headerBasedAuth(u,e)]:[3,4]:[3,6];case 3:return I=z.sent(),[3,5];case 4:I={Authorization:null},z.label=5;case 5:T=I,z.label=6;case 6:return N=[dt.apply(void 0,S.concat([T]))],[4,p({query:i,variables:s})];case 7:if(m=dt.apply(void 0,[dt.apply(void 0,[dt.apply(void 0,N.concat([z.sent()])),e]),!g&&(oe={},oe[iy]=Sn(o),oe)]),D={query:ni(i),variables:s},U=Object.assign({headers:m,body:D,signerServiceInfo:{service:g?"execute-api":"appsync",region:g?v:a}},r),k=g||f,!k)throw B=new Ht("No graphql endpoint provided."),{data:{},errors:[B]};z.label=8;case 8:return z.trys.push([8,10,,11]),[4,this._api.post(k,U)];case 9:return K=z.sent(),[3,11];case 10:if(X=z.sent(),this._api.isCancel(X))throw X;return K={data:{},errors:[new Ht(X.message,null,null,null,null,X)]},[3,11];case 11:if(re=K.errors,re&&re.length)throw K;return[2,K]}})})},n.prototype.createInstanceIfNotCreated=function(){return Jr(this,void 0,void 0,function(){return Xr(this,function(t){switch(t.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.isCancel=function(t){return this._api.isCancel(t)},n.prototype.cancel=function(t,e){return this._api.cancel(t,e)},n.prototype.hasCancelToken=function(t){return this._api.hasCancelToken(t)},n.prototype._graphqlSubscribe=function(t,e,r){var o=t.query,i=t.variables,s=t.authMode,u=t.authToken;e===void 0&&(e={});var c=this._options,a=c.aws_appsync_region,f=c.aws_appsync_graphqlEndpoint,l=c.aws_appsync_authenticationType,p=c.aws_appsync_apiKey,g=c.graphql_headers,v=g===void 0?function(){return{}}:g,m=s||l||"AWS_IAM";if(Gn&&typeof Gn.subscribe=="function")return Gn.subscribe("",{provider:la,appSyncGraphqlEndpoint:f,authenticationType:m,apiKey:p,query:ni(o),region:a,variables:i,graphql_headers:v,additionalHeaders:e,authToken:u},r);throw Ct.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},n.prototype._ensureCredentials=function(){var t=this;return this.Credentials.get().then(function(e){if(!e)return!1;var r=t.Credentials.shear(e);return Ct.debug("set credentials for api",r),!0}).catch(function(e){return Ct.warn("ensure credentials error",e),!1})},n}(),oy=new ou(null);gt.register(oy);var sy=new fe("API"),su=function(){function n(t){this.Auth=Yt,this.Cache=gn,this.Credentials=pt,this._options=t,this._restApi=new iu(t),this._graphqlApi=new ou(t),sy.debug("API Options",this._options)}return n.prototype.getModuleName=function(){return"InternalAPI"},n.prototype.configure=function(t){this._options=Object.assign({},this._options,t),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var e=this._restApi.configure(this._options),r=this._graphqlApi.configure(this._options);return xt(xt({},e),r)},n.prototype.get=function(t,e,r){return this._restApi.get(t,e,this.getInitWithCustomUserAgentDetails(r,lt.Get))},n.prototype.post=function(t,e,r){return this._restApi.post(t,e,this.getInitWithCustomUserAgentDetails(r,lt.Post))},n.prototype.put=function(t,e,r){return this._restApi.put(t,e,this.getInitWithCustomUserAgentDetails(r,lt.Put))},n.prototype.patch=function(t,e,r){return this._restApi.patch(t,e,this.getInitWithCustomUserAgentDetails(r,lt.Patch))},n.prototype.del=function(t,e,r){return this._restApi.del(t,e,this.getInitWithCustomUserAgentDetails(r,lt.Del))},n.prototype.head=function(t,e,r){return this._restApi.head(t,e,this.getInitWithCustomUserAgentDetails(r,lt.Head))},n.prototype.isCancel=function(t){return this._restApi.isCancel(t)},n.prototype.cancel=function(t,e){return this._restApi.hasCancelToken(t)?this._restApi.cancel(t,e):this._graphqlApi.hasCancelToken(t)?this._graphqlApi.cancel(t,e):!1},n.prototype.getInitWithCustomUserAgentDetails=function(t,e){var r={category:Gt.API,action:e},o=xt(xt({},t),{customUserAgentDetails:r});return o},n.prototype.endpoint=function(t){return cp(this,void 0,void 0,function(){return fp(this,function(e){return[2,this._restApi.endpoint(t)]})})},n.prototype.getGraphqlOperationType=function(t){return this._graphqlApi.getGraphqlOperationType(t)},n.prototype.graphql=function(t,e,r){var o=xt({category:Gt.API,action:lt.GraphQl},r);return this._graphqlApi.graphql(t,e,o)},n}(),ay=new su(null);gt.register(ay);new fe("API");var uy=function(n){up(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getModuleName=function(){return"API"},t.prototype.graphql=function(e,r){return n.prototype.graphql.call(this,e,r)},t}(su),cy=new uy(null);gt.register(cy);export{Yt as A,cy as a,gt as b};
//# sourceMappingURL=aws-85ea8cc3.js.map
